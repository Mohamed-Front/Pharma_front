import{u as W,i as z,J as F,j as J,r as m,d as M,Y as u,o as P,c as C,k as e,q as Y,t as s,m as o,z as l,v as g,B as j,y as G}from"./index-800b62dc.js";const H={class:"p-6 md:p-10 bg-gray-100 min-h-screen"},K={class:"container mx-auto"},O={class:"bg-white shadow-2xl rounded-2xl p-6 lg:p-10"},Q={class:"flex flex-col md:flex-row items-start md:items-center justify-between mb-8 pb-4 border-b-2 border-gray-200"},X={class:"text-3xl font-extrabold text-gray-800"},Z={class:"text-indigo-600"},ee={class:"flex flex-col md:flex-row"},te={key:0,class:"flex items-center justify-center h-64"},se={key:1,class:"space-y-8"},ie={class:"grid grid-cols-1 md:grid-cols-2 gap-8 p-6 bg-gray-50 rounded-xl shadow-inner"},oe={class:"space-y-4"},ae={class:"field"},le={class:"font-semibold text-gray-600"},ne={class:"text-gray-900 text-lg font-medium"},de={class:"field"},ce={class:"font-semibold text-gray-600"},re={class:"text-gray-900 text-lg font-medium"},ue={class:"field"},ve={class:"font-semibold text-gray-600"},_e={class:"text-gray-900 text-lg font-medium"},pe={class:"space-y-4"},me={class:"field"},ge={class:"font-semibold text-gray-600"},he={class:"field"},ye={class:"font-semibold text-gray-600"},be={class:"text-gray-900 text-lg font-medium"},xe={class:"field"},fe={class:"font-semibold text-gray-600"},we={class:"text-gray-900 text-lg font-medium"},$e={class:"field"},ke={class:"font-semibold text-gray-600"},Pe={class:"text-gray-900 text-lg font-medium"},Ce={class:"field"},Ne={class:"font-semibold text-gray-600"},De={class:"text-gray-900 text-lg font-medium"},Te={class:"field"},Se={class:"font-semibold text-gray-600"},Ae={class:"text-gray-900 text-lg font-medium"},Ie={class:"field"},Ve={class:"font-semibold text-gray-600"},Be={class:"text-gray-900 text-lg font-medium"},qe={class:"bg-gray-50 p-6 rounded-xl shadow-inner"},Ee={class:"text-2xl font-bold text-gray-800 mb-4"},Ue={class:"py-10 text-center text-gray-500"},je={class:"text-lg"},Le={key:2,class:"py-20 text-center text-gray-500"},Re={class:"text-2xl font-semibold"},We={key:0,class:"space-y-6 p-4"},ze={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Fe={class:"space-y-4"},Je={class:"field"},Me={class:"font-semibold text-gray-600"},Ye={class:"text-gray-900 text-lg font-medium"},Ge={class:"field"},He={class:"font-semibold text-gray-600"},Ke={class:"text-gray-900 text-lg font-medium"},Oe={class:"field"},Qe={class:"font-semibold text-gray-600"},Xe={class:"text-gray-900 text-lg font-medium"},Ze={class:"space-y-4"},et={class:"field"},tt={class:"font-semibold text-gray-600"},st={class:"field"},it={class:"font-semibold text-gray-600"},ot={class:"text-gray-900 text-lg font-medium"},at={class:"field"},lt={class:"font-semibold text-gray-600"},nt={class:"text-gray-900 text-lg font-medium"},dt={class:"field"},ct={class:"font-semibold text-gray-600"},rt={class:"text-gray-900 text-lg font-medium"},ut={class:"field"},vt={class:"font-semibold text-gray-600"},_t={class:"text-gray-900 text-lg font-medium"},pt={class:"field"},mt={class:"font-semibold text-gray-600"},gt={class:"text-gray-900 text-lg font-medium"},ht={class:"field"},yt={class:"font-semibold text-gray-600"},bt={class:"text-gray-900 text-lg font-medium"},xt={class:"space-y-6 p-4"},ft={class:"field"},wt={class:"font-semibold my-1 text-gray-600"},Pt={__name:"show",setup($t){const{t}=W();z();const B=F(),N=J(),v=m(!0),i=m(null),D=m(!1),h=m(!1),c=m(""),p=m(!1),q=d=>{switch(d==null?void 0:d.toLowerCase()){case"unpaid":return"warning";case"paid":return"success";case"cancelled":return"danger";default:return"info"}},E=async()=>{v.value=!0;try{const d=await j.get(`/api/invoice/${B.params.id}`);i.value=d.data.data}catch(d){N.add({severity:"error",summary:t("error"),detail:t("invoice.loadError"),life:3e3}),console.error("Error fetching invoice:",d)}finally{v.value=!1}},L=async()=>{if(!c.value||isNaN(c.value)||c.value<=0){N.add({severity:"error",summary:t("error"),detail:t("invoice.invalidAmount"),life:3e3});return}p.value=!0;try{await j.post(`/api/invoice/pay/${B.params.id}`,{amount:Number(c.value)}),N.add({severity:"success",summary:t("success"),detail:t("invoice.paymentSuccess"),life:3e3}),h.value=!1,c.value="",await E()}catch(d){N.add({severity:"error",summary:t("error"),detail:t("invoice.paymentError"),life:3e3}),console.error("Error processing payment:",d)}finally{p.value=!1}},R=()=>{var a,r,T,S,y,_,A,b,I,x,f,w,$,n,k;const d=window.open("","_blank");d.document.write(`
    <html>
      <head>
        <title>${t("invoice.printTitle")} #${((a=i.value)==null?void 0:a.number)||""}</title>
        <style>
          body { font-family: Arial, sans-serif; padding: 20px; }
          .invoice-container { max-width: 800px; margin: 0 auto; }
          .invoice-header { text-align: center; margin-bottom: 20px; }
          .invoice-details { margin-bottom: 20px; }
          .invoice-details p { margin: 5px 0; }
          .items-table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          .items-table th, .items-table td { border: 1px solid #ddd; padding: 8px; text-align: left; }
          .items-table th { background-color: #f4f4f4; }
          @media print {
            .no-print { display: none; }
          }
        </style>
      </head>
      <body>
        <div class="invoice-container">
          <div class="invoice-header">
            <h1>${t("invoice.printTitle")} #${((r=i.value)==null?void 0:r.number)||""}</h1>
          </div>
          <div class="invoice-details">
            <p><strong>${t("invoice.pharmacy")}:</strong> ${((S=(T=i.value)==null?void 0:T.pharmacy)==null?void 0:S.name)||"-"}</p>
            <p><strong>${t("invoice.warehouse")}:</strong> ${((_=(y=i.value)==null?void 0:y.warehouse)==null?void 0:_.name)||"-"}</p>
            <p><strong>${t("invoice.status")}:</strong> ${((A=i.value)==null?void 0:A.status_description)||"-"}</p>
            <p><strong>${t("invoice.originalPrice")}:</strong> ${((b=i.value)==null?void 0:b.original_price)||"-"}</p>
            <p><strong>${t("invoice.delivery")}:</strong> ${((I=i.value)==null?void 0:I.delivery)||"-"}</p>
            <p><strong>${t("invoice.totalDiscounts")}:</strong> ${((x=i.value)==null?void 0:x.total_discounts)||"-"}</p>
            <p><strong>${t("invoice.totalPrice")}:</strong> ${((f=i.value)==null?void 0:f.total_price)||"-"}</p>
            <p><strong>${t("invoice.totalPaid")}:</strong> ${((w=i.value)==null?void 0:w.total_paid)||"-"}</p>
            <p><strong>${t("invoice.createdAt")}:</strong> ${(($=i.value)==null?void 0:$.created_at)||"-"}</p>
          </div>
          <table class="items-table">
            <thead>
              <tr>
                <th>${t("invoice.itemName")}</th>
                <th>${t("invoice.quantity")}</th>
                <th>${t("invoice.price")}</th>
                <th>${t("invoice.total")}</th>
              </tr>
            </thead>
            <tbody>
              ${(k=(n=i.value)==null?void 0:n.items)==null?void 0:k.map(V=>{var U;return`
                <tr>
                  <td>${((U=V.product)==null?void 0:U.commercial_name)||"-"}</td>
                  <td>${V.quantity||"-"}</td>
                  <td>${V.original_price||"-"}</td>
                  <td>${V.total_price||"-"}</td>
                </tr>
              `}).join("")}
            </tbody>
          </table>
        </div>
      </body>
    </html>
  `),d.document.close(),d.print()};return M(()=>{E()}),(d,a)=>{var x,f,w,$;const r=u("Button"),T=u("Toast"),S=u("ProgressSpinner"),y=u("Tag"),_=u("Column"),A=u("DataTable"),b=u("Dialog"),I=u("InputNumber");return P(),C("div",H,[e("div",K,[e("div",O,[e("div",Q,[e("h1",X,[Y(s(o(t)("invoice.detailsTitle"))+" ",1),e("span",Z,"#"+s(((x=i.value)==null?void 0:x.number)||"..."),1)]),e("div",ee,[l(r,{label:o(t)("invoice.print"),icon:"pi pi-print",class:"px-6 py-2 rounded-full bg-indigo-600 text-white hover:bg-indigo-700 transition-colors duration-200",disabled:v.value||!i.value,onClick:R},null,8,["label","disabled"]),l(r,{label:o(t)("invoice.viewDetails"),icon:"pi pi-file",class:"px-6 py-2 mx-1 rounded-full bg-blue-600 text-white hover:bg-blue-700 transition-colors duration-200",disabled:v.value||!i.value,onClick:a[0]||(a[0]=n=>D.value=!0)},null,8,["label","disabled"]),l(r,{label:o(t)("invoice.pay"),icon:"pi pi-money-bill",class:"px-6 py-2 rounded-full bg-green-600 text-white hover:bg-green-700 transition-colors duration-200",disabled:v.value||!i.value||((f=i.value.status_description)==null?void 0:f.toLowerCase())!=="unpaid",onClick:a[1]||(a[1]=n=>h.value=!0)},null,8,["label","disabled"])])]),l(T),v.value?(P(),C("div",te,[l(S,{style:{width:"60px",height:"60px"},strokeWidth:"4",class:"text-indigo-600"})])):i.value?(P(),C("div",se,[e("div",ie,[e("div",oe,[e("div",ae,[e("label",le,s(o(t)("invoice.invoiceNumber")),1),e("p",ne,s(i.value.number),1)]),e("div",de,[e("label",ce,s(o(t)("invoice.pharmacy")),1),e("p",re,s(((w=i.value.pharmacy)==null?void 0:w.name)||"-"),1)]),e("div",ue,[e("label",ve,s(o(t)("invoice.warehouse")),1),e("p",_e,s((($=i.value.warehouse)==null?void 0:$.name)||"-"),1)])]),e("div",pe,[e("div",me,[e("label",ge,s(o(t)("invoice.status")),1),l(y,{value:i.value.status_description,severity:q(i.value.status_description),class:"px-3 py-1 text-sm font-semibold rounded-full"},null,8,["value","severity"])]),e("div",he,[e("label",ye,s(o(t)("invoice.originalPrice")),1),e("p",be,s(i.value.original_price),1)]),e("div",xe,[e("label",fe,s(o(t)("invoice.delivery")),1),e("p",we,s(i.value.delivery),1)]),e("div",$e,[e("label",ke,s(o(t)("invoice.totalDiscounts")),1),e("p",Pe,s(i.value.total_discounts),1)]),e("div",Ce,[e("label",Ne,s(o(t)("invoice.totalPrice")),1),e("p",De,s(i.value.total_price),1)]),e("div",Te,[e("label",Se,s(o(t)("invoice.totalPaid")),1),e("p",Ae,s(i.value.total_paid),1)]),e("div",Ie,[e("label",Ve,s(o(t)("invoice.createdAt")),1),e("p",Be,s(i.value.created_at),1)])])]),e("div",qe,[e("h3",Ee,s(o(t)("invoice.items")),1),l(A,{value:i.value.items,loading:v.value,"data-key":"item_id","responsive-layout":"scroll",class:"rounded-lg overflow-hidden border border-gray-200"},{empty:g(()=>[e("div",Ue,[a[7]||(a[7]=e("i",{class:"pi pi-exclamation-circle text-4xl mb-2"},null,-1)),e("p",je,s(o(t)("invoice.noItems")),1)])]),default:g(()=>[l(_,{field:"product.commercial_name",header:o(t)("invoice.itemName"),"header-style":"width:30%;"},null,8,["header"]),l(_,{field:"quantity",header:o(t)("invoice.quantity"),"header-style":"width:20%;"},null,8,["header"]),l(_,{field:"original_price",header:o(t)("invoice.price"),"header-style":"width:20%;"},null,8,["header"]),l(_,{field:"total_price",header:o(t)("invoice.total"),"header-style":"width:20%;"},null,8,["header"])]),_:1},8,["value","loading"])])])):(P(),C("div",Le,[a[8]||(a[8]=e("i",{class:"pi pi-exclamation-circle text-6xl mb-4"},null,-1)),e("p",Re,s(o(t)("invoice.notFound")),1)])),l(b,{visible:D.value,"onUpdate:visible":a[3]||(a[3]=n=>D.value=n),header:o(t)("invoice.detailsTitle"),modal:!0,style:{width:"50vw"},class:"rounded-lg",breakpoints:{"960px":"75vw","640px":"90vw"}},{footer:g(()=>[l(r,{label:o(t)("invoice.close"),icon:"pi pi-times",class:"p-button-text p-button-secondary",onClick:a[2]||(a[2]=n=>D.value=!1)},null,8,["label"])]),default:g(()=>{var n,k;return[i.value?(P(),C("div",We,[e("div",ze,[e("div",Fe,[e("div",Je,[e("label",Me,s(o(t)("invoice.invoiceNumber")),1),e("p",Ye,s(i.value.number),1)]),e("div",Ge,[e("label",He,s(o(t)("invoice.pharmacy")),1),e("p",Ke,s(((n=i.value.pharmacy)==null?void 0:n.name)||"-"),1)]),e("div",Oe,[e("label",Qe,s(o(t)("invoice.warehouse")),1),e("p",Xe,s(((k=i.value.warehouse)==null?void 0:k.name)||"-"),1)])]),e("div",Ze,[e("div",et,[e("label",tt,s(o(t)("invoice.status")),1),l(y,{value:i.value.status_description,severity:q(i.value.status_description),class:"px-3 py-1 text-sm font-semibold rounded-full"},null,8,["value","severity"])]),e("div",st,[e("label",it,s(o(t)("invoice.originalPrice")),1),e("p",ot,s(i.value.original_price),1)]),e("div",at,[e("label",lt,s(o(t)("invoice.delivery")),1),e("p",nt,s(i.value.delivery),1)]),e("div",dt,[e("label",ct,s(o(t)("invoice.totalDiscounts")),1),e("p",rt,s(i.value.total_discounts),1)]),e("div",ut,[e("label",vt,s(o(t)("invoice.totalPrice")),1),e("p",_t,s(i.value.total_price),1)]),e("div",pt,[e("label",mt,s(o(t)("invoice.totalPaid")),1),e("p",gt,s(i.value.total_paid),1)]),e("div",ht,[e("label",yt,s(o(t)("invoice.createdAt")),1),e("p",bt,s(i.value.created_at),1)])])])])):G("",!0)]}),_:1},8,["visible","header"]),l(b,{visible:h.value,"onUpdate:visible":a[6]||(a[6]=n=>h.value=n),header:o(t)("invoice.makePayment"),modal:!0,style:{width:"40vw"},class:"rounded-lg",breakpoints:{"960px":"75vw","640px":"90vw"}},{footer:g(()=>[l(r,{label:o(t)("invoice.cancel"),icon:"pi pi-times",class:"p-button-text p-button-secondary",disabled:p.value,onClick:a[5]||(a[5]=n=>{h.value=!1,c.value=""})},null,8,["label","disabled"]),l(r,{label:o(t)("invoice.pay"),icon:"pi pi-check",class:"p-button-success",loading:p.value,disabled:!c.value||p.value,onClick:L},null,8,["label","loading","disabled"])]),default:g(()=>[e("div",xt,[e("div",ft,[e("p",wt,s(o(t)("invoice.paymentAmount")),1),l(I,{modelValue:c.value,"onUpdate:modelValue":a[4]||(a[4]=n=>c.value=n),mode:"currency",currency:"USD",locale:"en-US",min:0,class:"w-full",disabled:p.value},null,8,["modelValue","disabled"])])])]),_:1},8,["visible","header"])])])])}}};export{Pt as default};
