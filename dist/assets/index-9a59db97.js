import{_ as oe,u as ce,i as ue,j as de,r as n,a4 as pe,w as ve,d as me,a5 as fe,o as F,c as R,k as a,z as s,v as c,m as e,t as o,F as be,x as ge,y as he,a6 as ye,B as y,H as T,D as d,aa as Se,A as _e,E as xe,ab as L,q as H,S as Q,ac as ke,l as $,a8 as we,R as W,Y as N,ad as Ce}from"./index-d45c326e.js";const $e={class:"grid"},Ve={class:"col-12"},De={class:"p-4 card shadow-2 border-round"},Ee={class:"text-2xl font-bold"},Ue={class:"flex gap-2"},Fe={class:"p-input-icon-left"},Re={class:"card shadow-1 surface-0"},Le={class:"py-4 text-center"},Ne={class:"text-xl"},Ie={class:"flex py-4 justify-content-center align-items-center"},Pe={key:0,class:"mt-3 p-paginator p-component p-unselectable-text"},Te={class:"p-paginator-left-content"},je={class:"p-paginator-current"},qe={class:"p-paginator-right-content"},Be={class:"p-paginator-pages"},Me=["disabled"],ze=["disabled"],Ae=["onClick","aria-label"],Oe=["disabled"],Ge=["disabled"],He={class:"p-paginator-rpp-options"},Qe={class:"p-fluid"},We={class:"field my-1"},Ye={for:"name",class:"my-1"},Je={class:"field my-1"},Ke={for:"description",class:"my-1"},Xe={class:"p-fluid"},Ze={class:"field my-1"},et={for:"name_edit",class:"my-1"},tt={class:"field my-1"},it={for:"description_edit",class:"my-1"},lt={class:"flex align-items-center justify-content-center"},at={class:"flex flex-column gap-3"},st={__name:"index",setup(rt){const{t:i}=ce();ue();const p=de(),V=n(!0),j=n(""),q=n(null),S=n(!1),_=n(!1),x=n(!1),k=n(!1);n(null);const B=n(null),M=n({}),D=n(""),u=n({name:"",description:""}),E=n(null),f=n({name:!1,description:!1}),h=n(null),U=n(!1),Y=n([{name:"Structure 1",description:"Description for Structure 1"}]),v=n(1),I=n(0),w=n(10),g=n(0),z=n(0),A=n(0),J=()=>{B.value.exportCSV()},K=r=>{j.value=r,S.value=!0},X=()=>{y.delete(`/api/scientific-structure/${j.value}`).then(()=>{b(),S.value=!1,p.add({severity:"success",summary:i("success"),detail:i("scientificStructure.deleteSuccess"),life:3e3})}).catch(r=>{p.add({severity:"error",summary:i("error"),detail:i("scientificStructure.deleteError"),life:3e3})})},Z=()=>{M.value={global:{value:null,matchMode:ye.CONTAINS}}},P=()=>{u.value={name:"",description:""},E.value=null,f.value={name:!1,description:!1}},ee=()=>(f.value.name=!u.value.name,f.value.description=!u.value.description,!f.value.name&&!f.value.description),te=()=>{P(),_.value=!0},ie=r=>{E.value=r,y.get(`/api/scientific-structure/${r}`).then(t=>{u.value={name:t.data.data.name,description:t.data.data.description},x.value=!0}).catch(t=>{p.add({severity:"error",summary:i("error"),detail:i("scientificStructure.loadError"),life:3e3}),console.error("Error fetching scientific structure:",t)})},O=()=>{ee()&&(E.value?y.put(`/api/scientific-structure/${E.value}`,u.value).then(()=>{b(),x.value=!1,p.add({severity:"success",summary:i("success"),detail:i("scientificStructure.updateSuccess"),life:3e3}),P()}).catch(r=>{p.add({severity:"error",summary:i("error"),detail:i("scientificStructure.updateError"),life:3e3})}):y.post("/api/scientific-structure",u.value).then(()=>{b(),_.value=!1,p.add({severity:"success",summary:i("success"),detail:i("scientificStructure.createSuccess"),life:3e3}),P()}).catch(r=>{p.add({severity:"error",summary:i("error"),detail:i("scientificStructure.createError"),life:3e3})}))},le=()=>{k.value=!0,h.value=null},ae=r=>{h.value=r.files[0]},se=()=>{if(!h.value){p.add({severity:"warn",summary:i("warning"),detail:i("scientificStructure.importNoFile"),life:3e3});return}U.value=!0;const r=new FormData;r.append("file",h.value),y.post("/api/import/scientific-structure",r).then(()=>{p.add({severity:"success",summary:i("success"),detail:i("scientificStructure.importSuccess"),life:3e3}),b(),k.value=!1,h.value=null;const t=document.querySelector('.p-fileupload input[type="file"]');t&&(t.value="")}).catch(t=>{p.add({severity:"error",summary:i("error"),detail:i("scientificStructure.importError"),life:3e3}),console.error("Error importing scientific structures:",t)}).finally(()=>{U.value=!1})},re=()=>{const r=`name,description
`+Y.value.map(l=>`"${l.id}","${l.name}","${l.description}"`).join(`
`),t=new Blob([r],{type:"text/csv;charset=utf-8;"}),m=document.createElement("a");if(m.download!==void 0){const l=URL.createObjectURL(t);m.setAttribute("href",l),m.setAttribute("download","scientific_structure_import_example.csv"),m.style.visibility="hidden",document.body.appendChild(m),m.click(),document.body.removeChild(m),window.URL.revokeObjectURL(l)}};pe(()=>{Z()});const b=()=>{V.value=!0,y.get("/api/scientific-structure",{params:{page:v.value,limit:w.value,search:D.value}}).then(r=>{V.value=!1,q.value=r.data.data,I.value=r.data.pagination.total,g.value=r.data.pagination.last_page,z.value=r.data.pagination.from,A.value=r.data.pagination.to}).catch(r=>{V.value=!1,p.add({severity:"error",summary:i("error"),detail:i("scientificStructure.loadError"),life:3e3}),console.error("Error fetching data:",r)})};ve(D,()=>{v.value=1,b()});const C=r=>{r>=1&&r<=g.value&&(v.value=r,b())},ne=r=>{w.value=r.value,v.value=1,b()};return me(()=>{b()}),(r,t)=>{const m=fe("tooltip");return F(),R("div",$e,[a("div",Ve,[a("div",De,[s(e(Se),{class:"mb-4"},{start:c(()=>[a("h2",Ee,o(e(i)("scientificStructures")),1)]),end:c(()=>[a("div",Ue,[a("span",Fe,[t[18]||(t[18]=a("i",{class:"pi pi-search"},null,-1)),s(e(T),{modelValue:D.value,"onUpdate:modelValue":t[0]||(t[0]=l=>D.value=l),placeholder:r.$t("scientificStructure.search")},null,8,["modelValue","placeholder"])]),s(e(d),{label:e(i)("scientificStructure.import"),icon:"pi pi-download",class:"",onClick:le,"aria-label":"Import scientific structures"},null,8,["label"]),s(e(d),{label:e(i)("scientificStructure.export"),icon:"pi pi-upload",class:"p-export",onClick:J,"aria-label":"Export scientific structures"},null,8,["label"]),s(e(d),{label:e(i)("scientificStructure.new"),icon:"pi pi-plus",class:"p-button-success",onClick:te,"aria-label":"Create new scientific structure"},null,8,["label"])])]),_:1}),s(e(_e)),a("div",Re,[s(e(ke),{ref_key:"dt",ref:B,value:q.value,loading:V.value,"data-key":"id",paginator:!1,rows:w.value,filters:M.value,totalRecords:I.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:c(()=>[a("div",Le,[t[19]||(t[19]=a("i",{class:"mb-2 text-2xl pi pi-exclamation-circle"},null,-1)),a("p",Ne,o(e(i)("scientificStructure.noData")),1)])]),loading:c(()=>[a("div",Ie,[s(e(xe),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:c(()=>[s(e(L),{"selection-mode":"multiple","header-style":"width: 3rem"}),s(e(L),{field:"name",header:e(i)("scientificStructure.name"),sortable:!0,"header-style":"width:20%; min-width:12rem;"},{body:c(l=>[H(o(l.data.name),1)]),_:1},8,["header"]),s(e(L),{field:"description",header:e(i)("scientificStructure.description"),sortable:!0,"header-style":"width:20%; min-width:12rem;"},{body:c(l=>[H(o(l.data.description),1)]),_:1},8,["header"]),s(e(L),{header:e(i)("actions"),"header-style":"min-width:10rem;"},{body:c(l=>[Q(s(e(d),{icon:"pi pi-pencil",class:"p-detail",onClick:G=>ie(l.data.id),"aria-label":"Edit scientific structure"},null,8,["onClick"]),[[m,e(i)("edit"),void 0,{top:!0}]]),Q(s(e(d),{icon:"pi pi-trash mx-2",class:"p-delete",onClick:G=>K(l.data.id),"aria-label":"Delete scientific structure"},null,8,["onClick"]),[[m,e(i)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"]),g.value>0?(F(),R("div",Pe,[a("div",Te,[a("span",je,o(e(i)("showing"))+" "+o(z.value)+" "+o(e(i)("to"))+" "+o(A.value)+" "+o(e(i)("of"))+" "+o(I.value)+" "+o(e(i)("entries")),1)]),a("div",qe,[a("span",Be,[a("button",{class:"p-paginator-first p-paginator-element p-link",disabled:v.value===1,onClick:t[1]||(t[1]=l=>C(1)),"aria-label":"First page"},[...t[20]||(t[20]=[a("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)])],8,Me),a("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:v.value===1,onClick:t[2]||(t[2]=l=>C(v.value-1)),"aria-label":"Previous page"},[...t[21]||(t[21]=[a("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)])],8,ze),(F(!0),R(be,null,ge(g.value,l=>(F(),R("button",{key:l,class:$(["p-paginator-page p-paginator-element p-link",{"p-highlight":v.value===l}]),onClick:G=>C(l),"aria-label":`Page ${l}`},o(l),11,Ae))),128)),a("button",{class:"p-paginator-next p-paginator-element p-link",disabled:v.value===g.value,onClick:t[3]||(t[3]=l=>C(v.value+1)),"aria-label":"Next page"},[...t[22]||(t[22]=[a("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)])],8,Oe),a("button",{class:"p-paginator-last p-paginator-element p-link",disabled:v.value===g.value,onClick:t[4]||(t[4]=l=>C(g.value)),"aria-label":"Last page"},[...t[23]||(t[23]=[a("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)])],8,Ge)]),a("span",He,[s(e(we),{modelValue:w.value,"onUpdate:modelValue":t[5]||(t[5]=l=>w.value=l),options:[5,10,20,30],onChange:ne,class:"ml-2",style:{width:"100px"},"aria-label":"Rows per page"},null,8,["modelValue"])])])])):he("",!0)]),s(e(N),{visible:_.value,"onUpdate:visible":t[9]||(t[9]=l=>_.value=l),style:{width:"450px"},header:e(i)("scientificStructure.createTitle"),modal:!0},{footer:c(()=>[s(e(d),{label:e(i)("cancel"),icon:"pi pi-times",class:"p-button-text",onClick:t[8]||(t[8]=l=>_.value=!1),"aria-label":"Cancel create"},null,8,["label"]),s(e(d),{label:e(i)("save"),icon:"pi pi-check",class:"p-button-text p-button-success",onClick:O,"aria-label":"Save scientific structure"},null,8,["label"])]),default:c(()=>[a("div",Qe,[a("div",We,[a("p",Ye,o(e(i)("scientificStructure.name")),1),s(e(T),{id:"name",modelValue:u.value.name,"onUpdate:modelValue":t[6]||(t[6]=l=>u.value.name=l),required:"",placeholder:e(i)("scientificStructure.name"),class:$({"p-invalid":f.value.name})},null,8,["modelValue","placeholder","class"])]),a("div",Je,[a("p",Ke,o(e(i)("scientificStructure.description")),1),s(e(W),{id:"description",modelValue:u.value.description,"onUpdate:modelValue":t[7]||(t[7]=l=>u.value.description=l),required:"",placeholder:e(i)("scientificStructure.description"),rows:"4",class:$({"p-invalid":f.value.description})},null,8,["modelValue","placeholder","class"])])])]),_:1},8,["visible","header"]),s(e(N),{visible:x.value,"onUpdate:visible":t[13]||(t[13]=l=>x.value=l),style:{width:"450px"},header:e(i)("scientificStructure.editTitle"),modal:!0},{footer:c(()=>[s(e(d),{label:e(i)("cancel"),icon:"pi pi-times",class:"p-button-text",onClick:t[12]||(t[12]=l=>x.value=!1),"aria-label":"Cancel edit"},null,8,["label"]),s(e(d),{label:e(i)("save"),icon:"pi pi-check",class:"p-button-text p-button-success",onClick:O,"aria-label":"Save scientific structure"},null,8,["label"])]),default:c(()=>[a("div",Xe,[a("div",Ze,[a("p",et,o(e(i)("scientificStructure.name")),1),s(e(T),{id:"name_edit",modelValue:u.value.name,"onUpdate:modelValue":t[10]||(t[10]=l=>u.value.name=l),required:"",placeholder:e(i)("scientificStructure.name"),class:$({"p-invalid":f.value.name})},null,8,["modelValue","placeholder","class"])]),a("div",tt,[a("p",it,o(e(i)("scientificStructure.description")),1),s(e(W),{id:"description_edit",modelValue:u.value.description,"onUpdate:modelValue":t[11]||(t[11]=l=>u.value.description=l),required:"",placeholder:e(i)("scientificStructure.description"),rows:"4",class:$({"p-invalid":f.value.description})},null,8,["modelValue","placeholder","class"])])])]),_:1},8,["visible","header"]),s(e(N),{visible:S.value,"onUpdate:visible":t[15]||(t[15]=l=>S.value=l),style:{width:"450px"},header:e(i)("scientificStructure.deleteConfirmTitle"),modal:!0},{footer:c(()=>[s(e(d),{label:e(i)("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[14]||(t[14]=l=>S.value=!1),"aria-label":"Cancel delete"},null,8,["label"]),s(e(d),{label:e(i)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:X,"aria-label":"Confirm delete"},null,8,["label"])]),default:c(()=>[a("div",lt,[t[24]||(t[24]=a("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),a("span",null,o(e(i)("scientificStructure.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"]),s(e(N),{visible:k.value,"onUpdate:visible":t[17]||(t[17]=l=>k.value=l),style:{width:"500px"},header:e(i)("scientificStructure.importInstructions"),modal:!0},{footer:c(()=>[s(e(d),{label:e(i)("cancel"),icon:"pi pi-times",text:"",onClick:t[16]||(t[16]=l=>k.value=!1),"aria-label":"Cancel import"},null,8,["label"]),s(e(d),{label:e(i)("import"),icon:"pi pi-check",class:"p-button-success",onClick:se,disabled:!h.value,loading:U.value,"aria-label":"Import scientific structures"},null,8,["label","disabled","loading"])]),default:c(()=>[a("div",at,[a("div",null,[s(e(d),{label:e(i)("scientificStructure.downloadExample"),icon:"pi pi-download",class:"",onClick:re,"aria-label":"Download example CSV"},null,8,["label"])]),s(e(Ce),{mode:"basic",name:"file",accept:".xlsx,.xls,.csv",maxFileSize:1e7,chooseLabel:e(i)("scientificStructure.chooseFile"),onSelect:ae,auto:!1,disabled:U.value,class:"mb-3"},null,8,["chooseLabel","disabled"])])]),_:1},8,["visible","header"])])])])}}},ot=oe(st,[["__scopeId","data-v-1d7223ec"]]);export{ot as default};
