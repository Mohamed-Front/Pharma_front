import{_ as V,i as M,r,d as P,Z as T,M as p,o as a,c as n,k as e,t,q as B,N as q,F as m,x as h,y as f,C as S,B as y,a0 as g}from"./index-abebc0c4.js";const U={class:"permission-manager"},E={class:"controls"},F={class:"name-input"},I={for:"roleName"},L=["placeholder"],R={key:0,class:"loading"},W={key:0,class:"table-view"},Z=["onClick","disabled"],j=["id","value"],z={key:1,class:"card-view"},A={class:"permission-items"},G={class:"permission-info"},H=["id","value"],J=["for"],K=["onClick","disabled"],O={key:2,class:"selection-summary"},Q={class:"id-chips"},X=["disabled"],Y={class:"modal-content"},x={__name:"create",setup(ee){const w=M(),_=r([]),b=r(!0),i=r([]),d=r(""),c=r(!1),$=r(""),v=r(!1),C=()=>{y.get("api/role/all/permissions").then(l=>{_.value=l.data.data,b.value=!1})},k=l=>{$.value=l||"No description available",c.value=!0},D=()=>{if(!d.value){alert("Please enter a role name");return}const l={name:d.value,permissions:i.value};y.post("/api/role",l).then(o=>{w.push({name:"roles"})}).catch(o=>{console.error("Error:",o)})};return P(()=>{C()}),(l,o)=>{const N=T("can");return p((a(),n("div",U,[e("h1",null,t(l.$t("role.role_Permissions_Manager")),1),e("div",E,[e("div",F,[e("label",I,[B(t(l.$t("role.role_Name")),1),o[6]||(o[6]=e("span",{class:"required"},"*",-1))]),p(e("input",{type:"text",id:"roleName","onUpdate:modelValue":o[0]||(o[0]=s=>d.value=s),placeholder:l.$t("role.enter_role_name"),required:""},null,8,L),[[q,d.value]])]),e("button",{onClick:o[1]||(o[1]=s=>v.value=!v.value),class:"view-toggle"},t(v.value?l.$t("role.switchToCardView"):l.$t("role.switchToTableView")),1)]),b.value?(a(),n("div",R,t(l.$t("role.loading.permissions")),1)):(a(),n(m,{key:1},[v.value?(a(),n("div",W,[e("table",null,[e("thead",null,[e("tr",null,[e("th",null,t(l.$t("role.permission")),1),e("th",null,t(l.$t("role.description")),1),e("th",null,t(l.$t("role.select")),1)])]),e("tbody",null,[(a(!0),n(m,null,h(_.value,s=>(a(),n("tr",{key:s.id},[e("td",null,t(s.name),1),e("td",null,[e("button",{onClick:u=>k(s.description),class:"description-btn",disabled:!s.description},t(s.description?l.$t("role.view"):l.$t("role.none")),9,Z)]),e("td",null,[p(e("input",{type:"checkbox",id:`permission-${s.id}-table`,value:s.id,"onUpdate:modelValue":o[2]||(o[2]=u=>i.value=u)},null,8,j),[[g,i.value]])])]))),128))])])])):(a(),n("div",z,[e("div",A,[(a(!0),n(m,null,h(_.value,s=>(a(),n("div",{key:s.id,class:"permission-item"},[e("div",G,[p(e("input",{type:"checkbox",id:`permission-${s.id}`,value:s.id,"onUpdate:modelValue":o[3]||(o[3]=u=>i.value=u)},null,8,H),[[g,i.value]]),e("label",{for:`permission-${s.id}`},t(s.name),9,J)]),e("button",{onClick:u=>k(s.description),class:"description-btn",disabled:!s.description},t(s.description?l.$t("role.viewDescription"):l.$t("role.noDescription")),9,K)]))),128))])]))],64)),i.value.length>0?(a(),n("div",O,[e("h3",null,t(l.$t("role.selectedPermissions")),1),e("p",null,t(l.$t("role.totalSelected"))+": "+t(i.value.length),1),e("div",Q,[(a(!0),n(m,null,h(i.value,s=>(a(),n("span",{key:s,class:"id-chip"},t(s),1))),128))])])):f("",!0),e("button",{onClick:D,class:"submit-btn",disabled:i.value.length===0||!d.value},t(l.$t("role.createWithPermissions")),9,X),c.value?(a(),n("div",{key:3,class:"modal-overlay",onClick:o[5]||(o[5]=S(s=>c.value=!1,["self"]))},[e("div",Y,[e("h3",null,t(l.$t("role.permission_Description")),1),e("p",null,t($.value),1),e("button",{onClick:o[4]||(o[4]=s=>c.value=!1),class:"close-modal"},t(l.$t("role.close")),1)])])):f("",!0)])),[[N,"create roles"]])}}},se=V(x,[["__scopeId","data-v-3321c89f"]]);export{se as default};
