import{_ as le,u as oe,i as ne,j as ie,r as i,X as re,w as de,d as ue,Y as p,Z as E,o as c,c as _,k as a,z as n,v as d,M as k,s as F,t as r,m as l,F as j,x as z,y as pe,$ as ce,B as A,q as $,l as ve}from"./index-abebc0c4.js";const me={class:"grid"},_e={class:"col-12"},he={class:"card p-4 shadow-2 border-round"},ge={class:"text-2xl font-bold"},be={class:"flex gap-2"},fe={class:"p-input-icon-left"},ye={class:"card shadow-1 surface-0"},xe={key:0},we={key:1},ke={class:"text-center py-4"},Ce={class:"text-xl"},Te={class:"flex justify-content-center align-items-center py-4"},De={key:0,class:"p-paginator p-component p-unselectable-text mt-3"},Ve={class:"p-paginator-left-content"},$e={class:"p-paginator-current"},Be={class:"p-paginator-right-content"},Me={class:"p-paginator-pages"},Ne=["disabled"],Se=["disabled"],Re=["onClick"],Ie=["disabled"],Pe=["disabled"],Ue={class:"p-paginator-rpp-options"},Ee={class:"flex align-items-center justify-content-center"},Fe={__name:"users",setup(je){const{t:s}=oe(),B=ne(),D=ie(),C=i(!0),M=i(""),N=i(null),g=i(!1);i(null);const S=i(null),R=i({}),T=i(""),u=i(1),V=i(0),b=i(10),v=i(0),I=i(0),P=i(0),G=()=>{S.value.exportCSV()},q=o=>{M.value=o,g.value=!0},L=()=>{A.delete(`/api/user/${M.value}`).then(()=>{f(),g.value=!1,D.add({severity:"success",summary:s("success"),detail:s("user.deleteSuccess"),life:3e3})}).catch(o=>{D.add({severity:"error",summary:s("error"),detail:s("user.deleteError"),life:3e3})})},O=()=>{R.value={global:{value:null,matchMode:ce.CONTAINS}}};re(()=>{O()});const f=()=>{C.value=!0,A.get("/api/user",{params:{page:u.value,limit:b.value,search:T.value}}).then(o=>{C.value=!1,N.value=o.data.data,V.value=o.data.pagination.total,v.value=o.data.pagination.last_page,I.value=o.data.pagination.from,P.value=o.data.pagination.to}).catch(o=>{C.value=!1,D.add({severity:"error",summary:s("error"),detail:s("user.loadError"),life:3e3}),console.error("Error fetching data:",o)})};de(T,o=>{u.value=1,f()});const y=o=>{o>=1&&o<=v.value&&(u.value=o,f())},Q=o=>{b.value=o,u.value=1,f()};ue(()=>{f()});const W=()=>{B.push({name:"user-create"})},X=o=>{B.push({name:"user-edit",params:{id:o}})};return(o,t)=>{const Y=p("InputText"),h=p("Button"),Z=p("Toolbar"),H=p("Toast"),m=p("Column"),J=p("Tag"),K=p("Chip"),ee=p("ProgressSpinner"),te=p("DataTable"),se=p("Dropdown"),ae=p("Dialog"),x=E("can"),U=E("tooltip");return c(),_("div",me,[a("div",_e,[a("div",he,[n(Z,{class:"mb-4"},{start:d(()=>[a("h2",ge,r(l(s)("user.users")),1)]),end:d(()=>[a("div",be,[a("span",fe,[t[8]||(t[8]=a("i",{class:"pi pi-search"},null,-1)),n(Y,{modelValue:T.value,"onUpdate:modelValue":t[0]||(t[0]=e=>T.value=e),placeholder:l(s)("user.search")},null,8,["modelValue","placeholder"])]),k(n(h,{label:l(s)("user.export"),icon:"pi pi-upload",class:"p-export",onClick:G},null,8,["label"]),[[x,"export users"]]),k(n(h,{label:l(s)("user.new"),icon:"pi pi-plus",class:"p-button-success",onClick:W},null,8,["label"]),[[x,"create users"]])])]),_:1}),n(H),a("div",ye,[k((c(),F(te,{ref_key:"dt",ref:S,value:N.value,loading:C.value,"data-key":"id",paginator:!1,rows:b.value,filters:R.value,totalRecords:V.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[a("div",ke,[t[9]||(t[9]=a("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),a("p",Ce,r(l(s)("user.noData")),1)])]),loading:d(()=>[a("div",Te,[n(ee,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[n(m,{"selection-mode":"multiple","header-style":"width: 3rem"}),n(m,{field:"name",header:l(s)("user.name"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(e=>[$(r(e.data.name),1)]),_:1},8,["header"]),n(m,{field:"email",header:l(s)("user.email"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(e=>[$(r(e.data.email),1)]),_:1},8,["header"]),n(m,{field:"phone",header:l(s)("user.phone"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(e=>[$(r(e.data.phone),1)]),_:1},8,["header"]),n(m,{field:"type_description",header:l(s)("user.type"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(e=>[n(J,{value:e.data.type_description,severity:{Admin:"info",Customer:"success",Guest:"danger"}[e.data.type_description]||"warning"},null,8,["value","severity"])]),_:1},8,["header"]),n(m,{field:"roles",header:l(s)("user.roles"),"header-style":"width:20%; min-width:15rem;"},{body:d(e=>[e.data.roles&&e.data.roles.length?(c(),_("div",xe,[(c(!0),_(j,null,z(e.data.roles,w=>(c(),F(K,{key:w.id,label:w.name,class:"mr-2 mb-2"},null,8,["label"]))),128))])):(c(),_("span",we,"-"))]),_:1},8,["header"]),n(m,{header:l(s)("actions"),"header-style":"min-width:10rem;"},{body:d(e=>[k(n(h,{icon:"pi pi-pencil",class:"p-detail",onClick:w=>X(e.data.id)},null,8,["onClick"]),[[x,"edit users"],[U,l(s)("edit"),void 0,{top:!0}]]),k(n(h,{icon:"pi pi-trash mx-2",class:"p-delete",onClick:w=>q(e.data.id)},null,8,["onClick"]),[[x,"delete users"],[U,l(s)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[x,"list users"]]),v.value>0?(c(),_("div",De,[a("div",Ve,[a("span",$e,r(l(s)("showing"))+" "+r(I.value)+" "+r(l(s)("to"))+" "+r(P.value)+" "+r(l(s)("of"))+" "+r(V.value)+" "+r(l(s)("entries")),1)]),a("div",Be,[a("span",Me,[a("button",{class:"p-paginator-first p-paginator-element p-link",disabled:u.value===1,onClick:t[1]||(t[1]=e=>y(1))},[...t[10]||(t[10]=[a("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)])],8,Ne),a("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:u.value===1,onClick:t[2]||(t[2]=e=>y(u.value-1))},[...t[11]||(t[11]=[a("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)])],8,Se),(c(!0),_(j,null,z(v.value,e=>(c(),_("button",{key:e,class:ve(["p-paginator-page p-paginator-element p-link",{"p-highlight":u.value===e}]),onClick:w=>y(e)},r(e),11,Re))),128)),a("button",{class:"p-paginator-next p-paginator-element p-link",disabled:u.value===v.value,onClick:t[3]||(t[3]=e=>y(u.value+1))},[...t[12]||(t[12]=[a("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)])],8,Ie),a("button",{class:"p-paginator-last p-paginator-element p-link",disabled:u.value===v.value,onClick:t[4]||(t[4]=e=>y(v.value))},[...t[13]||(t[13]=[a("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)])],8,Pe)]),a("span",Ue,[n(se,{modelValue:b.value,"onUpdate:modelValue":t[5]||(t[5]=e=>b.value=e),options:[5,10,20,30],onChange:Q,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])):pe("",!0)]),n(ae,{visible:g.value,"onUpdate:visible":t[7]||(t[7]=e=>g.value=e),style:{width:"450px"},header:l(s)("user.deleteConfirmTitle"),modal:!0},{footer:d(()=>[n(h,{label:l(s)("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[6]||(t[6]=e=>g.value=!1)},null,8,["label"]),n(h,{label:l(s)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:L},null,8,["label"])]),default:d(()=>[a("div",Ee,[t[14]||(t[14]=a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),a("span",null,r(l(s)("user.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},Ae=le(Fe,[["__scopeId","data-v-96e22a01"]]);export{Ae as default};
