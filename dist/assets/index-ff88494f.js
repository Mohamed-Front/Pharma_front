import{Z as re,W as ae,u as ne,e as se,s as le,r as v,d as A,V as N,a as ie,f as i,g as d,m as r,t as l,z as m,l as c,D as de,R as g,S as h,v as f,y as _,a9 as ue,F as ce,k as pe,j as O,i as me,B as k,x as ge,C as G,X as fe,A as _e,q as I,_ as ye}from"./index-b2b8894e.js";import{x as ve,O as he}from"./index.es-81c778bd.js";const be={class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center py-8"},we={class:"w-full max-w-4xl mx-auto bg-white rounded-2xl p-8 shadow-lg"},xe={class:"text-3xl font-bold text-center text-gray-800 mb-8 bg-gradient-to-r from-green-500 to-teal-500 bg-clip-text text-transparent font-[Inter]"},ke={key:0,class:"flex justify-center items-center h-64"},Le={key:1,class:"space-y-8"},$e={class:"grid gap-6 lg:grid-cols-2 grid-cols-1"},Ge={class:"relative"},Ie={for:"name",class:"block text-sm font-medium text-gray-700 mb-1 font-[Inter]"},Se=["placeholder"],qe={key:0,class:"text-red-500 mt-1 block"},Ce={class:"relative"},De={for:"owner_name",class:"block text-sm font-medium text-gray-700 mb-1 font-[Inter]"},Ve=["placeholder"],je={key:0,class:"text-red-500 mt-1 block"},Ee={class:"relative"},Fe={for:"phone",class:"block text-sm font-medium text-gray-700 mb-1 font-[Inter]"},Ue=["placeholder"],Be={key:0,class:"text-red-500 mt-1 block"},Me={class:"relative"},Ae={for:"country",class:"block text-sm font-medium text-gray-700 mb-1 font-[Inter]"},Ne=["placeholder"],Oe={key:0,class:"text-red-500 mt-1 block"},Pe={class:"relative"},Re={for:"city",class:"block text-sm font-medium text-gray-700 mb-1 font-[Inter]"},ze={value:"",disabled:"",selected:""},Te=["value"],He={key:0,class:"text-red-500 mt-1 block"},Ze={class:"relative"},Je={for:"address",class:"block text-sm font-medium text-gray-700 mb-1 font-[Inter]"},Qe=["placeholder"],We={key:0,class:"text-red-500 mt-1 block"},Xe={class:"relative"},Ke={for:"license_number",class:"block text-sm font-medium text-gray-700 mb-1 font-[Inter]"},Ye=["placeholder"],et={class:"space-y-6"},tt={class:"text-xl font-semibold text-gray-800 bg-gradient-to-r from-green-500 to-teal-500 bg-clip-text text-transparent font-[Inter]"},ot={class:"relative"},rt={class:"block text-sm font-medium text-gray-700 mb-1 font-[Inter]"},at={class:"space-y-6"},nt={class:"text-xl font-semibold text-gray-800 bg-gradient-to-r from-green-500 to-teal-500 bg-clip-text text-transparent font-[Inter]"},st={class:"relative"},lt={key:0,class:"p-4"},it={class:"relative group"},dt=["src"],ut={class:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-0 rounded-lg group-hover:bg-opacity-40 transition-all duration-300"},ct={class:"space-x-3 transform translate-y-4 opacity-0 group-hover:opacity-100 group-hover:translate-y-0 transition-all duration-300"},pt={class:"mt-2 text-sm text-center text-gray-500 font-[Inter]"},mt={key:1,class:"flex flex-col items-center justify-center h-full p-4"},gt={class:"mb-1 text-sm text-center text-gray-600 font-[Inter]"},ft={class:"font-medium text-green-500"},_t={class:"flex justify-between mt-8"},yt={class:"mb-4"},vt={class:"flex justify-end space-x-4"},ht=re({__name:"index",setup(bt){const P=ae(),{t:s}=ne(),u=se(),R=le(),S=v([{Governorate_ar:"دمشق",Governorate_en:"Damascus",Latitude:33.5158,Longitude:36.2939,Status:"active"},{Governorate_ar:"دمشق ريف",Governorate_en:"Rif Dimashq",Latitude:33.5719,Longitude:36.402,Status:"active"},{Governorate_ar:"حلب",Governorate_en:"Aleppo",Latitude:36.2019,Longitude:37.1612,Status:"active"},{Governorate_ar:"حمص",Governorate_en:"Homs",Latitude:34.7308,Longitude:36.709,Status:"active"},{Governorate_ar:"حماة",Governorate_en:"Hama",Latitude:35.1318,Longitude:36.7578,Status:"active"},{Governorate_ar:"إدلب",Governorate_en:"Idlib",Latitude:35.9306,Longitude:36.6339,Status:"active"},{Governorate_ar:"اللاذقية",Governorate_en:"Latakia",Latitude:35.5167,Longitude:35.7833,Status:"active"},{Governorate_ar:"طرطوس",Governorate_en:"Tartus",Latitude:34.889,Longitude:35.8866,Status:"active"},{Governorate_ar:"الرقة",Governorate_en:"Raqqa",Latitude:35.95,Longitude:39.0167,Status:"active"},{Governorate_ar:"دير الزور",Governorate_en:"Deir ez-Zor",Latitude:35.3333,Longitude:40.15,Status:"active"},{Governorate_ar:"الحسكة",Governorate_en:"Al-Hasakah",Latitude:36.502,Longitude:40.747,Status:"active"},{Governorate_ar:"درعا",Governorate_en:"Daraa",Latitude:32.6189,Longitude:36.1029,Status:"active"},{Governorate_ar:"السويداء",Governorate_en:"As-Suwayda",Latitude:32.708,Longitude:36.569,Status:"active"},{Governorate_ar:"القنيطرة",Governorate_en:"Quneitra",Latitude:33.125,Longitude:35.823,Status:"active"}]),z=A(()=>S.value.filter(e=>e.Status==="active")),L=v([]),$=v(!1),y=v(!1),w=v(!1),b=v({pharmacy_logo:!1}),t=N({id:null,name:"",owner_name:"",license_number:"",phone:"",country:"سوريا",city:"",address:"",lat:"",long:"",location_link:"",status:null,status_description:"",total_rating:null,media:[],pharmacy_logo:null,pharmacy_logo_preview:null,pharmacy_logo_file:null}),n=N({name:"",owner_name:"",phone:"",country:"",city:"",address:""}),q=async()=>{try{const e=await I.get("/api/warehouse/profile/data");e.data.success&&e.data.data?(Object.assign(t,e.data.data),t.country="سوريا",e.data.data.media&&e.data.data.media.length>0&&(t.pharmacy_logo=e.data.data.media[0].url)):u.add({severity:"warn",summary:s("warning"),detail:s("profile.fetchError"),life:3e3})}catch(e){u.add({severity:"error",summary:s("error"),detail:s("profile.fetchError"),life:3e3}),console.error("Error fetching profile:",e)}},T=async()=>{$.value=!0;try{const e=await I.get("/api/order");e.data.success&&e.data.data?L.value=e.data.data:(L.value=[],u.add({severity:"warn",summary:s("warning"),detail:s("orders.empty"),life:3e3}))}catch(e){L.value=[],u.add({severity:"error",summary:s("error"),detail:s("orders.fetchError"),life:3e3}),console.error("Error fetching orders:",e)}finally{$.value=!1}},C=()=>{t.name.trim()?n.name="":n.name=s("profile.warehouse_name_required")},D=()=>{t.owner_name.trim()?n.owner_name="":n.owner_name=s("profile.owner_name_required")},V=()=>{t.phone.trim()?t.phone.length>15?n.phone=s("profile.phone_too_long"):n.phone="":n.phone=s("profile.phone_required")},H=()=>{t.country.trim()?n.country="":n.country=s("profile.country_required")},Z=()=>{t.city.trim()?n.city="":n.city=s("profile.city_required")},j=()=>{t.address.trim()?n.address="":n.address=s("profile.address_required")},E=A(()=>t.name.trim()!==""&&t.owner_name.trim()!==""&&t.phone.trim()!==""&&t.phone.length<=15&&(t==null?void 0:t.country)!==""&&(t==null?void 0:t.city)!==""&&t.address.trim()!==""&&!n.name&&!n.owner_name&&!n.phone&&!n.country&&!n.city&&!n.address),J=e=>{b.value[e]=!0},Q=e=>{b.value[e]=!1},F=(e,o)=>{var p,x,U;const a=((x=(p=e.dataTransfer)==null?void 0:p.files)==null?void 0:x[0])||((U=e.target.files)==null?void 0:U[0]);if(a){if(!a.type.match("image.*")){u.add({severity:"error",summary:s("error"),detail:s("profile.invalid_image_type"),life:3e3});return}if(a.size>1024*1024){u.add({severity:"error",summary:s("error"),detail:s("profile.image_too_large"),life:3e3});return}t[`${o}_file`]=a;const B=new FileReader;B.onload=oe=>{var M;t[`${o}_preview`]=(M=oe.target)==null?void 0:M.result},B.readAsDataURL(a),b.value[o]=!1}},W=e=>{t[`${e}_file`]=null,t[`${e}_preview`]=null,t.pharmacy_logo=null;const o=document.getElementById(e);o&&(o.value="")},X=e=>{const o=document.getElementById(e);o&&o.click()},K=e=>{const o=e.latLng;t.lat=o.lat().toString(),t.long=o.lng().toString(),t.location_link=`https://www.google.com/maps?q=${t.lat},${t.long}`},Y=()=>{const e=S.value.find(o=>o.Governorate_en===t.city);e&&(t.lat=e.Latitude.toString(),t.long=e.Longitude.toString(),t.location_link=`https://www.google.com/maps?q=${e.Latitude},${e.Longitude}`)},ee=async()=>{var o,a;if(y.value)return;if(y.value=!0,C(),D(),V(),H(),Z(),j(),!E.value){y.value=!1;return}const e=new FormData;e.append("name",t.name),e.append("owner_name",t.owner_name),e.append("phone",t.phone),e.append("country",t.country),e.append("city",t.city),e.append("address",t.address),t.license_number&&e.append("license_number",t.license_number),t.lat&&e.append("lat",t.lat),t.long&&e.append("long",t.long),t.location_link&&e.append("location_link",t.location_link),t.pharmacy_logo_file&&e.append("pharmacy_logo",t.pharmacy_logo_file);try{(await I.post("/api/warehouse/profile/update",e)).data.success?(u.add({severity:"success",summary:s("success"),detail:s("profile.update_success"),life:3e3}),await q()):u.add({severity:"warn",summary:s("warning"),detail:s("profile.update_failed"),life:3e3})}catch(p){const x=(a=(o=p.response)==null?void 0:o.data)!=null&&a.errors?Object.values(p.response.data.errors).join(", "):s("profile.update_failed");u.add({severity:"error",summary:s("error"),detail:x,life:3e3}),console.error("Error updating profile:",p)}finally{y.value=!1}},te=async()=>{try{await P.pharmacyhandleLogout(),R.push({name:"login"})}catch(e){u.add({severity:"error",summary:s("error"),detail:s("profile.logoutError"),life:3e3}),console.error("Error logging out:",e)}finally{w.value=!1}};return ie(()=>{q(),T()}),(e,o)=>(i(),d("div",be,[r("div",we,[r("h2",xe,l(e.$t("profile.title")),1),$.value?(i(),d("div",ke,[m(c(de))])):(i(),d("div",Le,[r("div",$e,[r("div",Ge,[r("label",Ie,l(e.$t("profile.warehouse_name"))+" * ",1),g(r("input",{"onUpdate:modelValue":o[0]||(o[0]=a=>t.name=a),id:"name",name:"name",type:"text",required:"",class:f(["w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all duration-300 font-[Inter]",{"border-red-500":n.name}]),placeholder:e.$t("profile.enter_warehouse_name"),onInput:C},null,42,Se),[[h,t.name]]),n.name?(i(),d("small",qe,l(n.name),1)):_("",!0)]),r("div",Ce,[r("label",De,l(e.$t("profile.owner_name"))+" * ",1),g(r("input",{"onUpdate:modelValue":o[1]||(o[1]=a=>t.owner_name=a),id:"owner_name",name:"owner_name",type:"text",required:"",class:f(["w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all duration-300 font-[Inter]",{"border-red-500":n.owner_name}]),placeholder:e.$t("profile.enter_owner_name"),onInput:D},null,42,Ve),[[h,t.owner_name]]),n.owner_name?(i(),d("small",je,l(n.owner_name),1)):_("",!0)]),r("div",Ee,[r("label",Fe,l(e.$t("profile.phone"))+" * ",1),g(r("input",{"onUpdate:modelValue":o[2]||(o[2]=a=>t.phone=a),id:"phone",name:"phone",type:"tel",required:"",class:f(["w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all duration-300 font-[Inter]",{"border-red-500":n.phone}]),placeholder:e.$t("profile.enter_phone"),onInput:V},null,42,Ue),[[h,t.phone]]),n.phone?(i(),d("small",Be,l(n.phone),1)):_("",!0)]),r("div",Me,[r("label",Ae,l(e.$t("profile.country"))+" * ",1),g(r("input",{"onUpdate:modelValue":o[3]||(o[3]=a=>t.country=a),id:"country",name:"country",type:"text",readonly:"",required:"",class:f(["w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all duration-300 font-[Inter]",{"border-red-500":n.country}]),placeholder:e.$t("profile.enter_country")},null,10,Ne),[[h,t.country]]),n.country?(i(),d("small",Oe,l(n.country),1)):_("",!0)]),r("div",Pe,[r("label",Re,l(e.$t("profile.city"))+" * ",1),g(r("select",{"onUpdate:modelValue":o[4]||(o[4]=a=>t.city=a),id:"city",name:"city",required:"",onChange:Y,class:f(["w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all duration-300 font-[Inter]",{"border-red-500":n.city}])},[r("option",ze,l(e.$t("profile.select_city")),1),(i(!0),d(ce,null,pe(z.value,a=>(i(),d("option",{key:a.Governorate_en,value:a.Governorate_en},l(a.Governorate_ar)+" ("+l(a.Governorate_en)+") ",9,Te))),128))],34),[[ue,t.city]]),n.city?(i(),d("small",He,l(n.city),1)):_("",!0)]),r("div",Ze,[r("label",Je,l(e.$t("profile.address"))+" * ",1),g(r("input",{"onUpdate:modelValue":o[5]||(o[5]=a=>t.address=a),id:"address",name:"address",type:"text",required:"",class:f(["w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all duration-300 font-[Inter]",{"border-red-500":n.address}]),placeholder:e.$t("profile.enter_address"),onInput:j},null,42,Qe),[[h,t.address]]),n.address?(i(),d("small",We,l(n.address),1)):_("",!0)]),r("div",Xe,[r("label",Ke,l(e.$t("profile.license_number")),1),g(r("input",{"onUpdate:modelValue":o[6]||(o[6]=a=>t.license_number=a),id:"license_number",name:"license_number",type:"text",class:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all duration-300 font-[Inter]",placeholder:e.$t("profile.enter_license_number")},null,8,Ye),[[h,t.license_number]])])]),r("div",et,[r("h4",tt,l(e.$t("profile.location_information")),1),r("div",ot,[r("label",rt,l(e.$t("profile.location")),1),m(c(he),{onClick:K,style:{width:"100%",height:"300px","border-radius":"12px",overflow:"hidden"},center:{lat:t.lat?parseFloat(t.lat):33.5158,lng:t.long?parseFloat(t.long):36.2939},zoom:14,class:"shadow-md"},{default:O(()=>[t.lat&&t.long?(i(),me(c(ve),{key:0,options:{position:{lat:parseFloat(t.lat),lng:parseFloat(t.long)}}},null,8,["options"])):_("",!0)]),_:1},8,["center"])])]),r("div",at,[r("h4",nt,l(e.$t("profile.pharmacy_logo")),1),r("div",st,[r("label",{onDragover:o[10]||(o[10]=k(a=>J("pharmacy_logo"),["prevent"])),onDragleave:o[11]||(o[11]=a=>Q("pharmacy_logo")),onDrop:o[12]||(o[12]=k(a=>F(a,"pharmacy_logo"),["prevent"])),class:f([{"border-green-400 bg-green-50":b.value.pharmacy_logo,"border-gray-200":!b.value.pharmacy_logo},"w-full h-28 rounded-lg cursor-pointer transition-all duration-300 hover:border-green-400 border"])},[r("input",{type:"file",onChange:o[7]||(o[7]=a=>F(a,"pharmacy_logo")),accept:"image/*",class:"hidden",id:"pharmacy_logo"},null,32),t.pharmacy_logo_preview||t.pharmacy_logo?(i(),d("div",lt,[r("div",it,[r("img",{src:t.pharmacy_logo_preview||t.pharmacy_logo,alt:"Pharmacy Logo Preview",class:"object-cover w-full h-32 rounded-lg shadow-md group-hover:scale-105 transition-transform duration-300"},null,8,dt),r("div",ut,[r("div",ct,[r("button",{type:"button",onClick:o[8]||(o[8]=k(a=>W("pharmacy_logo"),["stop"])),class:"p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition"},[...o[15]||(o[15]=[r("i",{class:"text-sm pi pi-trash"},null,-1)])]),r("button",{type:"button",onClick:o[9]||(o[9]=k(a=>X("pharmacy_logo"),["stop"])),class:"p-2 bg-white text-gray-700 rounded-full hover:bg-gray-100 transition"},[...o[16]||(o[16]=[r("i",{class:"text-sm pi pi-pencil"},null,-1)])])])])]),r("p",pt,l(e.$t("profile.click_or_drag_to_change_photo")),1)])):(i(),d("div",mt,[o[17]||(o[17]=r("div",{class:"p-3 mb-2 bg-green-100 rounded-full"},[r("i",{class:"text-xl text-green-500 pi pi-image"})],-1)),r("p",gt,[r("span",ft,l(e.$t("profile.click_to_upload")),1),ge(" "+l(e.$t("profile.or_drag_and_drop")),1)]),o[18]||(o[18]=r("p",{class:"text-xs text-gray-400 font-[Inter]"},"SVG, PNG, JPG or GIF (max. 1MB)",-1))]))],34)])]),r("div",_t,[m(c(G),{label:e.$t("profile.save_changes"),disabled:!E.value||y.value,loading:y.value,class:"px-6 py-2 bg-gradient-to-r from-green-500 to-teal-500 text-white font-semibold rounded-lg shadow-md hover:from-green-600 hover:to-teal-600 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-offset-2 transition-all duration-300 font-[Inter]",onClick:ee},null,8,["label","disabled","loading"])])])),m(c(fe),{visible:w.value,"onUpdate:visible":o[14]||(o[14]=a=>w.value=a),header:e.$t("profile.logout"),modal:"",style:{width:"400px"},class:"font-[Inter]"},{default:O(()=>[r("p",yt,l(e.$t("profile.logout_confirm")),1),r("div",vt,[m(c(G),{label:e.$t("profile.cancel"),text:"",onClick:o[13]||(o[13]=a=>w.value=!1)},null,8,["label"]),m(c(G),{label:e.$t("profile.logout"),severity:"danger",onClick:te},null,8,["label"])])]),_:1},8,["visible","header"]),m(c(_e))])]))}});const kt=ye(ht,[["__scopeId","data-v-60ce296e"]]);export{kt as default};
