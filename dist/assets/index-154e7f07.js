import{_ as qe,u as Ce,z as Re,a as we,r as d,a7 as Te,m as ae,o as je,d as u,a8 as te,e as h,h as D,g as l,i as o,w as r,j as s,a9 as De,b as _,t as i,C as x,f as I,B as b,Z as P,F as Ve,y as $e,A as Me}from"./index-2cd76906.js";const Se={class:"grid"},Ee={class:"col-12"},Ie={class:"p-4 card shadow-2 border-round"},Pe={class:"text-2xl font-bold"},Be={class:"flex gap-2"},Ue={key:0,class:"p-input-icon-left"},Ne={class:"py-4 text-center"},ze={class:"text-xl"},Fe={class:"flex py-4 justify-content-center align-items-center"},Ae={class:"flex gap-2"},Ge={class:"py-4 text-center"},Le={class:"text-xl"},We={class:"flex py-4 justify-content-center align-items-center"},Oe={key:0,class:"mt-3 p-paginator p-component"},Qe={class:"p-paginator-left-content"},Ze={class:"p-paginator-current"},He={class:"p-paginator-right-content flex align-items-center gap-3"},Je={class:"p-paginator-pages"},Ke=["disabled"],Xe=["disabled"],Ye=["onClick"],ea=["disabled"],aa=["disabled"],ta={class:"flex align-items-center justify-content-center gap-3"},sa={class:"flex align-items-center justify-content-center gap-3"},la={class:"flex align-items-center justify-content-center gap-3"},oa={class:"flex flex-column gap-4"},ra={class:"flex align-items-center gap-3"},na={for:"rejectedMessage"},ia={__name:"index",setup(da){const{t:e}=Ce(),z=Re(),v=we(),y=d(0),F=d([]),V=d(!0),se=d(""),k=d(!1),$=d(!0),A=d(""),G=d(""),L=d(""),W=d([]),q=d(!1),C=d(!1),R=d(!1),B=d(null),O=d({}),w=d(""),T=d(""),p=d(1),Q=d(0),U=d(10),g=d(0),Z=d(0),H=d(0),le=()=>{B.value&&B.value.exportCSV()},oe=()=>{_.delete(`/api/pharmacy/${se.value}`).then(()=>{N(),k.value=!1,v.add({severity:"success",summary:e("success"),detail:e("pharmacy.deleteSuccess"),life:3e3})}).catch(n=>{k.value=!1,v.add({severity:"error",summary:e("error"),detail:e("pharmacy.deleteError"),life:3e3}),console.error("Delete pharmacy error:",n)})},re=n=>{A.value=n,q.value=!0},ne=n=>{G.value=n,T.value="",C.value=!0},ie=n=>{L.value=n,R.value=!0},de=()=>{_.delete(`/api/pharmacy-request/${A.value}`).then(()=>{f(),q.value=!1,v.add({severity:"success",summary:e("success"),detail:e("pharmacyRequest.deleteSuccess"),life:3e3})}).catch(()=>{v.add({severity:"error",summary:e("error"),detail:e("pharmacyRequest.deleteError"),life:3e3})})},ce=()=>{_.post(`/api/pharmacy-request/accept/${L.value}`).then(()=>{f(),R.value=!1,v.add({severity:"success",summary:e("success"),detail:e("pharmacyRequest.acceptSuccess"),life:3e3})}).catch(()=>{v.add({severity:"error",summary:e("error"),detail:e("pharmacyRequest.acceptError"),life:3e3})})},ue=()=>{if(!T.value.trim()){v.add({severity:"error",summary:e("error"),detail:e("pharmacyRequest.rejectedMessageRequired"),life:3e3});return}_.post(`/api/pharmacy-request/reject/${G.value}`,{rejected_message:T.value}).then(()=>{f(),C.value=!1,v.add({severity:"success",summary:e("success"),detail:e("pharmacyRequest.rejectSuccess"),life:3e3})}).catch(()=>{v.add({severity:"error",summary:e("error"),detail:e("pharmacyRequest.rejectError"),life:3e3})})},pe=n=>{z.push({name:"pharmacy_request_show",params:{id:n}})},me=n=>{switch(n){case 1:return"success";case 2:return"warning";case 3:return"danger";default:return"info"}},ve=()=>{O.value={global:{value:null,matchMode:De.CONTAINS}}};Te(()=>{ve()});const N=()=>{V.value=!0,_.get("/api/pharmacy").then(n=>{F.value=n.data.data||[],V.value=!1}).catch(n=>{V.value=!1,v.add({severity:"error",summary:e("error"),detail:e("pharmacy.loadError"),life:3e3}),console.error("Error fetching pharmacies:",n)})},f=()=>{$.value=!0,_.get("/api/pharmacy-request",{params:{page:p.value,limit:U.value,search:w.value}}).then(n=>{$.value=!1,W.value=n.data.data||[];const a=n.data.pagination||{};Q.value=a.total||0,g.value=a.last_page||1,Z.value=a.from||0,H.value=a.to||0}).catch(n=>{$.value=!1,v.add({severity:"error",summary:e("error"),detail:e("pharmacyRequest.loadError"),life:3e3}),console.error("Error fetching requests:",n)})};ae(w,()=>{y.value===1&&(p.value=1,f())});const j=n=>{n>=1&&n<=g.value&&(p.value=n,f())},he=()=>{p.value=1,f()};je(()=>{y.value===0?N():f()}),ae(y,n=>{n===0?N():(w.value="",p.value=1,f())});const ye=()=>{z.push({name:"add-pharmacy"})};return(n,a)=>{const fe=u("InputText"),c=u("Button"),be=u("Toolbar"),m=u("Column"),J=u("Tag"),K=u("ProgressSpinner"),X=u("DataTable"),Y=u("TabPanel"),ge=u("Toast"),_e=u("Dropdown"),xe=u("TabView"),M=u("Dialog"),ke=u("Textarea"),S=te("tooltip"),ee=te("can");return h(),D("div",Se,[l("div",Ee,[l("div",Ie,[o(be,{class:"mb-4"},{start:r(()=>[l("h2",Pe,i(y.value===0?s(e)("pharmacy.title"):s(e)("pharmacyRequest.title")),1)]),end:r(()=>[l("div",Be,[y.value===1?(h(),D("span",Ue,[a[16]||(a[16]=l("i",{class:"pi pi-search"},null,-1)),o(fe,{modelValue:w.value,"onUpdate:modelValue":a[0]||(a[0]=t=>w.value=t),placeholder:s(e)("pharmacyRequest.search")},null,8,["modelValue","placeholder"])])):x("",!0),y.value===1?(h(),I(c,{key:1,label:s(e)("pharmacyRequest.export"),icon:"pi pi-upload",class:"p-export",onClick:le},null,8,["label"])):x("",!0),o(c,{label:s(e)("pharmacyRequest.new"),icon:"pi pi-plus",class:"p-button-success",onClick:ye},null,8,["label"])])]),_:1}),o(xe,{activeIndex:y.value,"onUpdate:activeIndex":a[6]||(a[6]=t=>y.value=t)},{default:r(()=>[o(Y,{header:s(e)("pharmacy.tabPharmacies")},{default:r(()=>[o(X,{value:F.value,loading:V.value,responsiveLayout:"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:r(()=>[l("div",Ne,[a[17]||(a[17]=l("i",{class:"mb-2 text-2xl pi pi-exclamation-circle"},null,-1)),l("p",ze,i(s(e)("pharmacy.noData")),1)])]),loading:r(()=>[l("div",Fe,[o(K,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:r(()=>[o(m,{field:"name",header:s(e)("pharmacy.name"),sortable:!0},{body:r(t=>[b(i(t.data.name),1)]),_:1},8,["header"]),o(m,{field:"phone",header:s(e)("pharmacy.phone"),sortable:!0},{body:r(t=>[b(i(t.data.phone),1)]),_:1},8,["header"]),o(m,{field:"city",header:s(e)("pharmacy.city"),sortable:!0},{body:r(t=>[b(i(t.data.city||"-"),1)]),_:1},8,["header"]),o(m,{field:"address",header:s(e)("pharmacy.address"),sortable:!0},{body:r(t=>[b(i(t.data.address),1)]),_:1},8,["header"]),o(m,{field:"status_description",header:s(e)("pharmacy.status")},{body:r(t=>[o(J,{value:t.data.status_description,severity:t.data.status===1?"success":"danger"},null,8,["value","severity"])]),_:1},8,["header"])]),_:1},8,["value","loading"])]),_:1},8,["header"]),o(Y,{header:s(e)("pharmacyRequest.tabRequests")},{default:r(()=>[o(ge),o(X,{ref_key:"dt",ref:B,value:W.value,loading:$.value,"data-key":"id",paginator:!1,filters:O.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:r(()=>[l("div",Ge,[a[18]||(a[18]=l("i",{class:"mb-2 text-2xl pi pi-exclamation-circle"},null,-1)),l("p",Le,i(s(e)("pharmacyRequest.noData")),1)])]),loading:r(()=>[l("div",We,[o(K,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:r(()=>[o(m,{"selection-mode":"multiple","header-style":"width: 3rem"}),o(m,{field:"number",header:s(e)("pharmacyRequest.number"),sortable:!0},{body:r(t=>[b(i(t.data.number),1)]),_:1},8,["header"]),o(m,{field:"name",header:s(e)("pharmacyRequest.name"),sortable:!0},{body:r(t=>[b(i(t.data.name),1)]),_:1},8,["header"]),o(m,{field:"email",header:s(e)("pharmacyRequest.email"),sortable:!0},{body:r(t=>[b(i(t.data.email||"-"),1)]),_:1},8,["header"]),o(m,{field:"address",header:s(e)("pharmacyRequest.address"),sortable:!0},{body:r(t=>[b(i(t.data.address),1)]),_:1},8,["header"]),o(m,{field:"status_description",header:s(e)("pharmacyRequest.status")},{body:r(t=>[o(J,{value:t.data.status_description,severity:me(t.data.status)},null,8,["value","severity"])]),_:1},8,["header"]),o(m,{header:s(e)("actions"),"header-style":"min-width:15rem;"},{body:r(t=>[l("div",Ae,[P(o(c,{icon:"pi pi-eye",class:"p-button-rounded p-detail p-button-sm",onClick:E=>pe(t.data.id)},null,8,["onClick"]),[[S,s(e)("role.view"),void 0,{top:!0}]]),t.data.status===2?P((h(),I(c,{key:0,icon:"pi pi-check",class:"p-button-rounded p-detail p-button-sm",onClick:E=>ie(t.data.id)},null,8,["onClick"])),[[ee,"accept pharmacy requests"],[S,s(e)("order.accept"),void 0,{top:!0}]]):x("",!0),t.data.status===2?P((h(),I(c,{key:1,icon:"pi pi-times",class:"p-button-rounded p-delete p-button-sm",onClick:E=>ne(t.data.id)},null,8,["onClick"])),[[ee,"reject pharmacy requests"],[S,s(e)("order.reject"),void 0,{top:!0}]]):x("",!0),t.data.status===2||t.data.status===3?P((h(),I(c,{key:2,icon:"pi pi-trash",class:"p-button-rounded p-delete p-button-sm",onClick:E=>re(t.data.id)},null,8,["onClick"])),[[S,s(e)("delete"),void 0,{top:!0}]]):x("",!0)])]),_:1},8,["header"])]),_:1},8,["value","loading","filters"]),g.value>0?(h(),D("div",Oe,[l("div",Qe,[l("span",Ze,i(s(e)("showing"))+" "+i(Z.value)+" "+i(s(e)("to"))+" "+i(H.value)+" "+i(s(e)("of"))+" "+i(Q.value)+" "+i(s(e)("entries")),1)]),l("div",He,[l("div",Je,[l("button",{class:"p-paginator-first p-link",disabled:p.value===1,onClick:a[1]||(a[1]=t=>j(1))},[...a[19]||(a[19]=[l("span",{class:"pi pi-angle-double-left"},null,-1)])],8,Ke),l("button",{class:"p-paginator-prev p-link",disabled:p.value===1,onClick:a[2]||(a[2]=t=>j(p.value-1))},[...a[20]||(a[20]=[l("span",{class:"pi pi-angle-left"},null,-1)])],8,Xe),(h(!0),D(Ve,null,$e(g.value,t=>(h(),D("button",{key:t,class:Me(["p-paginator-page p-link",{"p-highlight":p.value===t}]),onClick:E=>j(t)},i(t),11,Ye))),128)),l("button",{class:"p-paginator-next p-link",disabled:p.value===g.value,onClick:a[3]||(a[3]=t=>j(p.value+1))},[...a[21]||(a[21]=[l("span",{class:"pi pi-angle-right"},null,-1)])],8,ea),l("button",{class:"p-paginator-last p-link",disabled:p.value===g.value,onClick:a[4]||(a[4]=t=>j(g.value))},[...a[22]||(a[22]=[l("span",{class:"pi pi-angle-double-right"},null,-1)])],8,aa)]),o(_e,{modelValue:U.value,"onUpdate:modelValue":a[5]||(a[5]=t=>U.value=t),options:[5,10,20,30,50],onChange:he,class:"ml-3",style:{width:"100px"}},null,8,["modelValue"])])])):x("",!0)]),_:1},8,["header"])]),_:1},8,["activeIndex"]),o(M,{visible:k.value,"onUpdate:visible":a[8]||(a[8]=t=>k.value=t),style:{width:"450px"},header:s(e)("pharmacy.deleteConfirmTitle"),modal:!0},{footer:r(()=>[o(c,{label:s(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:a[7]||(a[7]=t=>k.value=!1)},null,8,["label"]),o(c,{label:s(e)("yes"),icon:"pi pi-check",class:"p-button-danger",onClick:oe},null,8,["label"])]),default:r(()=>[l("div",ta,[a[23]||(a[23]=l("i",{class:"pi pi-exclamation-triangle",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),l("span",null,i(s(e)("pharmacy.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"]),o(M,{visible:q.value,"onUpdate:visible":a[10]||(a[10]=t=>q.value=t),style:{width:"450px"},header:s(e)("pharmacyRequest.deleteConfirmTitle"),modal:!0},{footer:r(()=>[o(c,{label:s(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:a[9]||(a[9]=t=>q.value=!1)},null,8,["label"]),o(c,{label:s(e)("yes"),icon:"pi pi-check",class:"p-button-danger",onClick:de},null,8,["label"])]),default:r(()=>[l("div",sa,[a[24]||(a[24]=l("i",{class:"pi pi-exclamation-triangle",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),l("span",null,i(s(e)("pharmacyRequest.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"]),o(M,{visible:R.value,"onUpdate:visible":a[12]||(a[12]=t=>R.value=t),style:{width:"450px"},header:s(e)("pharmacyRequest.acceptConfirmTitle"),modal:!0},{footer:r(()=>[o(c,{label:s(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:a[11]||(a[11]=t=>R.value=!1)},null,8,["label"]),o(c,{label:s(e)("yes"),icon:"pi pi-check",class:"p-button-success",onClick:ce},null,8,["label"])]),default:r(()=>[l("div",la,[a[25]||(a[25]=l("i",{class:"pi pi-check-circle",style:{"font-size":"2rem",color:"var(--green-500)"}},null,-1)),l("span",null,i(s(e)("pharmacyRequest.acceptConfirmMessage")),1)])]),_:1},8,["visible","header"]),o(M,{visible:C.value,"onUpdate:visible":a[15]||(a[15]=t=>C.value=t),style:{width:"500px"},header:s(e)("pharmacyRequest.rejectConfirmTitle"),modal:!0},{footer:r(()=>[o(c,{label:s(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:a[14]||(a[14]=t=>C.value=!1)},null,8,["label"]),o(c,{label:s(e)("yes"),icon:"pi pi-check",class:"p-button-danger",onClick:ue},null,8,["label"])]),default:r(()=>[l("div",oa,[l("div",ra,[a[26]||(a[26]=l("i",{class:"pi pi-exclamation-triangle",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),l("span",null,i(s(e)("pharmacyRequest.rejectConfirmMessage")),1)]),l("div",null,[l("label",na,i(s(e)("pharmacyRequest.rejectedMessage")),1),o(ke,{modelValue:T.value,"onUpdate:modelValue":a[13]||(a[13]=t=>T.value=t),id:"rejectedMessage",rows:"4",class:"w-full mt-2",placeholder:s(e)("pharmacyRequest.rejectedMessagePlaceholder")},null,8,["modelValue","placeholder"])])])]),_:1},8,["visible","header"])])])])}}},ua=qe(ia,[["__scopeId","data-v-84569b54"]]);export{ua as default};
