import{_ as ie,u as de,i as re,j as ce,r as i,X as pe,w as ue,d as me,Y as v,Z as Q,M as b,o as D,c as P,k as t,z as s,v as c,s as ve,t as d,m as o,F as ye,x as fe,y as _e,$ as ge,B as T,q as W,l as $}from"./index-abebc0c4.js";const be={class:"grid"},he={class:"col-12"},xe={class:"p-4 card shadow-2 border-round"},ke={class:"text-2xl font-bold"},Ce={class:"flex gap-2"},we={class:"p-input-icon-left"},Ve={class:"card shadow-1 surface-0"},De={class:"py-4 text-center"},Te={class:"text-xl"},$e={class:"flex py-4 justify-content-center align-items-center"},Ee={key:0,class:"mt-3 p-paginator p-component p-unselectable-text"},Se={class:"p-paginator-left-content"},Ue={class:"p-paginator-current"},Be={class:"p-paginator-right-content"},Pe={class:"p-paginator-pages"},Fe=["disabled"],Me=["disabled"],Ne=["onClick"],Ie=["disabled"],Re=["disabled"],qe={class:"p-paginator-rpp-options"},je={class:"p-fluid"},ze={class:"field my-1"},Ae={for:"name",class:"my-1"},Ge={class:"field my-1"},Le={for:"date",class:"my-1"},Oe={class:"p-fluid"},Qe={class:"field my-1"},We={for:"name_edit",class:"my-1"},Xe={class:"field my-1"},Ye={for:"date_edit",class:"my-1"},Ze={class:"flex align-items-center justify-content-center"},He={__name:"index",setup(Je){const{t:a}=de();re();const y=ce(),E=i(!0),I=i(""),R=i(null),h=i(!1),x=i(!1),k=i(!1);i(null);const q=i(null),j=i({}),S=i(""),r=i({name:"",date:""}),U=i(null),m=i({name:!1,date:!1}),p=i(1),F=i(0),C=i(10),f=i(0),z=i(0),A=i(0),X=()=>{q.value.exportCSV()},Y=n=>{I.value=n,h.value=!0},Z=()=>{T.delete(`/api/company/${I.value}`).then(()=>{_(),h.value=!1,y.add({severity:"success",summary:a("success"),detail:a("company.deleteSuccess"),life:3e3})}).catch(n=>{y.add({severity:"error",summary:a("error"),detail:a("company.deleteError"),life:3e3})})},H=()=>{j.value={global:{value:null,matchMode:ge.CONTAINS}}},M=()=>{r.value={name:"",date:""},U.value=null,m.value={name:!1,date:!1}},J=()=>(m.value.name=!r.value.name,m.value.date=!r.value.date,!m.value.name&&!m.value.date),K=()=>{M(),x.value=!0},ee=n=>{U.value=n,T.get(`/api/company/${n}`).then(e=>{r.value={name:e.data.data.name,date:e.data.data.date},k.value=!0}).catch(e=>{y.add({severity:"error",summary:a("error"),detail:a("company.loadError"),life:3e3}),console.error("Error fetching company:",e)})},G=()=>{J()&&(U.value?T.put(`/api/company/${U.value}`,r.value).then(()=>{_(),k.value=!1,y.add({severity:"success",summary:a("success"),detail:a("company.updateSuccess"),life:3e3}),M()}).catch(n=>{y.add({severity:"error",summary:a("error"),detail:a("company.updateError"),life:3e3})}):T.post("/api/company",r.value).then(()=>{_(),x.value=!1,y.add({severity:"success",summary:a("success"),detail:a("company.createSuccess"),life:3e3}),M()}).catch(n=>{y.add({severity:"error",summary:a("error"),detail:a("company.createError"),life:3e3})}))};pe(()=>{H()});const _=()=>{E.value=!0,T.get("/api/company",{params:{page:p.value,limit:C.value,search:S.value}}).then(n=>{E.value=!1,R.value=n.data.data,F.value=n.data.pagination.total,f.value=n.data.pagination.last_page,z.value=n.data.pagination.from,A.value=n.data.pagination.to}).catch(n=>{E.value=!1,y.add({severity:"error",summary:a("error"),detail:a("company.loadError"),life:3e3}),console.error("Error fetching data:",n)})};ue(S,()=>{p.value=1,_()});const w=n=>{n>=1&&n<=f.value&&(p.value=n,_())},ae=n=>{C.value=n.value,p.value=1,_()};return me(()=>{_()}),(n,e)=>{const V=v("InputText"),u=v("Button"),te=v("Toolbar"),le=v("Toast"),B=v("Column"),oe=v("ProgressSpinner"),se=v("DataTable"),ne=v("Dropdown"),N=v("Dialog"),g=Q("can"),L=Q("tooltip");return b((D(),P("div",be,[t("div",he,[t("div",xe,[s(te,{class:"mb-4"},{start:c(()=>[t("h2",ke,d(o(a)("companies")),1)]),end:c(()=>[t("div",Ce,[t("span",we,[e[16]||(e[16]=t("i",{class:"pi pi-search"},null,-1)),s(V,{modelValue:S.value,"onUpdate:modelValue":e[0]||(e[0]=l=>S.value=l),placeholder:o(a)("company.search")},null,8,["modelValue","placeholder"])]),b(s(u,{label:o(a)("company.export"),icon:"pi pi-upload",class:"p-export",onClick:X},null,8,["label"]),[[g,"create companies"]]),b(s(u,{label:o(a)("company.new"),icon:"pi pi-plus",class:"p-button-success",onClick:K},null,8,["label"]),[[g,"create companies"]])])]),_:1}),s(le),t("div",Ve,[b((D(),ve(se,{ref_key:"dt",ref:q,value:R.value,loading:E.value,"data-key":"id",paginator:!1,rows:C.value,filters:j.value,totalRecords:F.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:c(()=>[t("div",De,[e[17]||(e[17]=t("i",{class:"mb-2 text-2xl pi pi-exclamation-circle"},null,-1)),t("p",Te,d(o(a)("company.noData")),1)])]),loading:c(()=>[t("div",$e,[s(oe,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:c(()=>[s(B,{"selection-mode":"multiple","header-style":"width: 3rem"}),s(B,{field:"name",header:o(a)("company.name"),sortable:!0,"header-style":"width:20%; min-width:12rem;"},{body:c(l=>[W(d(l.data.name),1)]),_:1},8,["header"]),s(B,{field:"date",header:o(a)("company.date"),sortable:!0,"header-style":"width:20%; min-width:12rem;"},{body:c(l=>[W(d(l.data.date),1)]),_:1},8,["header"]),s(B,{header:o(a)("actions"),"header-style":"min-width:10rem;"},{body:c(l=>[b(s(u,{icon:"pi pi-pencil",class:"p-detail",onClick:O=>ee(l.data.id)},null,8,["onClick"]),[[g,"edit companies"],[L,o(a)("edit"),void 0,{top:!0}]]),b(s(u,{icon:"pi pi-trash mx-2",class:"p-delete",onClick:O=>Y(l.data.id)},null,8,["onClick"]),[[g,"delete companies"],[L,o(a)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[g,"list companies"]]),f.value>0?(D(),P("div",Ee,[t("div",Se,[t("span",Ue,d(o(a)("showing"))+" "+d(z.value)+" "+d(o(a)("to"))+" "+d(A.value)+" "+d(o(a)("of"))+" "+d(F.value)+" "+d(o(a)("entries")),1)]),t("div",Be,[t("span",Pe,[t("button",{class:"p-paginator-first p-paginator-element p-link",disabled:p.value===1,onClick:e[1]||(e[1]=l=>w(1))},[...e[18]||(e[18]=[t("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)])],8,Fe),t("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:p.value===1,onClick:e[2]||(e[2]=l=>w(p.value-1))},[...e[19]||(e[19]=[t("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)])],8,Me),(D(!0),P(ye,null,fe(f.value,l=>(D(),P("button",{key:l,class:$(["p-paginator-page p-paginator-element p-link",{"p-highlight":p.value===l}]),onClick:O=>w(l)},d(l),11,Ne))),128)),t("button",{class:"p-paginator-next p-paginator-element p-link",disabled:p.value===f.value,onClick:e[3]||(e[3]=l=>w(p.value+1))},[...e[20]||(e[20]=[t("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)])],8,Ie),t("button",{class:"p-paginator-last p-paginator-element p-link",disabled:p.value===f.value,onClick:e[4]||(e[4]=l=>w(f.value))},[...e[21]||(e[21]=[t("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)])],8,Re)]),t("span",qe,[s(ne,{modelValue:C.value,"onUpdate:modelValue":e[5]||(e[5]=l=>C.value=l),options:[5,10,20,30],onChange:ae,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])):_e("",!0)]),s(N,{visible:x.value,"onUpdate:visible":e[9]||(e[9]=l=>x.value=l),style:{width:"450px"},header:o(a)("company.createTitle"),modal:!0},{footer:c(()=>[s(u,{label:o(a)("cancel"),icon:"pi pi-times",class:"p-button-text",onClick:e[8]||(e[8]=l=>x.value=!1)},null,8,["label"]),s(u,{label:o(a)("save"),icon:"pi pi-check",class:"p-button-text p-button-success",onClick:G},null,8,["label"])]),default:c(()=>[t("div",je,[t("div",ze,[t("p",Ae,d(o(a)("company.name")),1),s(V,{id:"name",modelValue:r.value.name,"onUpdate:modelValue":e[6]||(e[6]=l=>r.value.name=l),required:"",placeholder:o(a)("company.name"),class:$({"p-invalid":m.value.name})},null,8,["modelValue","placeholder","class"])]),t("div",Ge,[t("p",Le,d(o(a)("company.date")),1),s(V,{id:"date",modelValue:r.value.date,"onUpdate:modelValue":e[7]||(e[7]=l=>r.value.date=l),type:"date",required:"",placeholder:o(a)("company.date"),class:$({"p-invalid":m.value.date})},null,8,["modelValue","placeholder","class"])])])]),_:1},8,["visible","header"]),s(N,{visible:k.value,"onUpdate:visible":e[13]||(e[13]=l=>k.value=l),style:{width:"450px"},header:o(a)("company.editTitle"),modal:!0},{footer:c(()=>[s(u,{label:o(a)("cancel"),icon:"pi pi-times",class:"p-button-text",onClick:e[12]||(e[12]=l=>k.value=!1)},null,8,["label"]),s(u,{label:o(a)("save"),icon:"pi pi-check",class:"p-button-text p-button-success",onClick:G},null,8,["label"])]),default:c(()=>[t("div",Oe,[t("div",Qe,[t("p",We,d(o(a)("company.name")),1),s(V,{id:"name_edit",modelValue:r.value.name,"onUpdate:modelValue":e[10]||(e[10]=l=>r.value.name=l),required:"",placeholder:o(a)("company.name"),class:$({"p-invalid":m.value.name})},null,8,["modelValue","placeholder","class"])]),t("div",Xe,[t("p",Ye,d(o(a)("company.date")),1),s(V,{id:"date_edit",modelValue:r.value.date,"onUpdate:modelValue":e[11]||(e[11]=l=>r.value.date=l),type:"date",required:"",placeholder:o(a)("company.date"),class:$({"p-invalid":m.value.date})},null,8,["modelValue","placeholder","class"])])])]),_:1},8,["visible","header"]),s(N,{visible:h.value,"onUpdate:visible":e[15]||(e[15]=l=>h.value=l),style:{width:"450px"},header:o(a)("company.deleteConfirmTitle"),modal:!0},{footer:c(()=>[s(u,{label:o(a)("no"),icon:"pi pi-times",class:"p-button-text",onClick:e[14]||(e[14]=l=>h.value=!1)},null,8,["label"]),s(u,{label:o(a)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:Z},null,8,["label"])]),default:c(()=>[t("div",Ze,[e[22]||(e[22]=t("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),t("span",null,d(o(a)("company.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])),[[g,"list companies"]])}}},ea=ie(He,[["__scopeId","data-v-f89138e6"]]);export{ea as default};
