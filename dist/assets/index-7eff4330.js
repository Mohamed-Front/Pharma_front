import{_ as ie,u as ne,s as ue,e as ce,r as n,a3 as pe,w as me,a as ve,Y as v,a4 as G,R as y,f as D,g as q,m as l,z as r,j as u,i as _e,t as s,l as o,F as he,k as ye,y as be,a5 as fe,q as N,x as T,v as ge}from"./index-b2b8894e.js";const we={class:"grid"},Ve={class:"col-12"},xe={class:"p-4 card shadow-2 border-round"},ke={class:"text-2xl font-bold"},Ce={class:"flex gap-2"},De={class:"p-input-icon-left"},Te={class:"p-input-icon-left"},Ue={class:"card shadow-1 surface-0"},$e={class:"py-4 text-center"},Ie={class:"text-xl"},Se={class:"flex py-4 justify-content-center align-items-center"},qe={key:0,class:"mt-3 p-paginator p-component p-unselectable-text"},Ne={class:"p-paginator-left-content"},Pe={class:"p-paginator-current"},Ee={class:"p-paginator-right-content"},Be={class:"p-paginator-pages"},Re=["disabled"],Fe=["disabled"],Me=["onClick"],Oe=["disabled"],je=["disabled"],ze={class:"p-paginator-rpp-options"},Ae={class:"p-fluid"},Le={class:"field my-1"},Ge={for:"number",class:"my-1"},We={class:"field my-1"},Ye={for:"pharmacy_id",class:"my-1"},He={class:"field my-1"},Je={for:"warehouse_id",class:"my-1"},Ke={class:"field my-1"},Qe={for:"status",class:"my-1"},Xe={class:"field my-1"},Ze={for:"total_price",class:"my-1"},et={class:"p-fluid"},tt={class:"field my-1"},at={for:"number_edit",class:"my-1"},lt={class:"field my-1"},ot={for:"pharmacy_id_edit",class:"my-1"},rt={class:"field my-1"},st={for:"warehouse_id_edit",class:"my-1"},dt={class:"field my-1"},it={for:"status_edit",class:"my-1"},nt={class:"field my-1"},ut={for:"total_price_edit",class:"my-1"},ct={class:"flex align-items-center justify-content-center"},pt={__name:"index",setup(mt){const{t:e}=ne(),W=ue(),b=ce(),U=n(!0),F=n(""),M=n(null),w=n(!1),$=n(!1),P=n(!1);n(null);const O=n(null),j=n({}),I=n(""),S=n(""),i=n({number:"",pharmacy_id:"",warehouse_id:"",status:"",total_price:""}),Y=n(null),m=n(1),E=n(0),V=n(10),f=n(0),z=n(0),A=n(0),H=d=>{switch(d.toLowerCase()){case"pending":return"warning";case"completed":return"success";case"cancelled":return"danger";default:return"info"}},J=()=>{O.value.exportCSV()},K=d=>{F.value=d,w.value=!0},Q=()=>{N.delete(`/api/order/${F.value}`).then(()=>{g(),w.value=!1,b.add({severity:"success",summary:e("success"),detail:e("order.deleteSuccess"),life:3e3})}).catch(d=>{b.add({severity:"error",summary:e("error"),detail:e("order.deleteError"),life:3e3})})},B=(d,t)=>{N.post(`/api/order/change-status/${d}?status=${t}`).then(()=>{g(),b.add({severity:"success",summary:e("success"),detail:e(t===1?"order.acceptSuccess":"order.cancelSuccess"),life:3e3})}).catch(c=>{b.add({severity:"error",summary:e("error"),detail:e(t===1?"order.acceptError":"order.cancelError"),life:3e3})})},X=()=>{j.value={global:{value:null,matchMode:fe.CONTAINS}}},Z=()=>{i.value={number:"",pharmacy_id:"",warehouse_id:"",status:"",total_price:""},Y.value=null},ee=d=>{W.push({name:"order_show",params:{id:d}})},L=()=>{N.post("/api/order",i.value).then(()=>{g(),$.value=!1,b.add({severity:"success",summary:e("success"),detail:e("order.createSuccess"),life:3e3}),Z()}).catch(d=>{b.add({severity:"error",summary:e("error"),detail:e("order.createError"),life:3e3})})};pe(()=>{X()});const g=()=>{U.value=!0,N.get("/api/order",{params:{page:m.value,limit:V.value,from:I.value,to:S.value}}).then(d=>{U.value=!1,M.value=d.data.data,E.value=d.data.pagination.total,f.value=d.data.pagination.last_page,z.value=d.data.pagination.from,A.value=d.data.pagination.to}).catch(d=>{U.value=!1,b.add({severity:"error",summary:e("error"),detail:e("order.loadError"),life:3e3}),console.error("Error fetching data:",d)})};me([I,S],()=>{m.value=1,g()});const x=d=>{d>=1&&d<=f.value&&(m.value=d,g())},te=d=>{V.value=d.value,m.value=1,g()};return ve(()=>{g()}),(d,t)=>{const c=v("InputText"),p=v("Button"),ae=v("Toolbar"),le=v("Toast"),_=v("Column"),oe=v("Tag"),re=v("ProgressSpinner"),se=v("DataTable"),de=v("Dropdown"),R=v("Dialog"),h=G("can"),k=G("tooltip");return y((D(),q("div",we,[l("div",Ve,[l("div",xe,[r(ae,{class:"mb-4"},{start:u(()=>[l("h2",ke,s(o(e)("order.managementTitle")),1)]),end:u(()=>[l("div",Ce,[l("span",De,[t[23]||(t[23]=l("i",{class:"pi pi-calendar"},null,-1)),r(c,{modelValue:I.value,"onUpdate:modelValue":t[0]||(t[0]=a=>I.value=a),type:"date",placeholder:o(e)("order.fromDate")},null,8,["modelValue","placeholder"])]),l("span",Te,[t[24]||(t[24]=l("i",{class:"pi pi-calendar"},null,-1)),r(c,{modelValue:S.value,"onUpdate:modelValue":t[1]||(t[1]=a=>S.value=a),type:"date",placeholder:o(e)("order.toDate")},null,8,["modelValue","placeholder"])]),y(r(p,{label:o(e)("order.export"),icon:"pi pi-upload",class:"p-export",onClick:J},null,8,["label"]),[[h,"create orders"]])])]),_:1}),r(le),l("div",Ue,[y((D(),_e(se,{ref_key:"dt",ref:O,value:M.value,loading:U.value,"data-key":"id",paginator:!1,rows:V.value,filters:j.value,totalRecords:E.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:u(()=>[l("div",$e,[t[25]||(t[25]=l("i",{class:"mb-2 text-2xl pi pi-exclamation-circle"},null,-1)),l("p",Ie,s(o(e)("order.noData")),1)])]),loading:u(()=>[l("div",Se,[r(re,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:u(()=>[r(_,{"selection-mode":"multiple","header-style":"width: 3rem"}),r(_,{field:"number",header:o(e)("order.orderNumber"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:u(a=>[T(s(a.data.number),1)]),_:1},8,["header"]),r(_,{field:"pharmacy.name",header:o(e)("order.pharmacy"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:u(a=>[T(s(a.data.pharmacy.name),1)]),_:1},8,["header"]),r(_,{field:"warehouse.name",header:o(e)("order.warehouse"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:u(a=>[T(s(a.data.warehouse.name),1)]),_:1},8,["header"]),r(_,{field:"status_description",header:o(e)("order.status"),sortable:!0,"header-style":"width:10%; min-width:8rem;"},{body:u(a=>[r(oe,{value:a.data.status_description,severity:H(a.data.status_description)},null,8,["value","severity"])]),_:1},8,["header"]),r(_,{field:"total_price",header:o(e)("order.totalPrice"),sortable:!0,"header-style":"width:10%; min-width:8rem;"},{body:u(a=>[T(s(a.data.total_price),1)]),_:1},8,["header"]),r(_,{field:"created_at",header:o(e)("order.createdAt"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:u(a=>[T(s(a.data.created_at),1)]),_:1},8,["header"]),r(_,{header:o(e)("order.actions"),"header-style":"min-width:18rem;"},{body:u(a=>[y(r(p,{icon:"pi pi-eye",class:"p-detail",onClick:C=>ee(a.data.id)},null,8,["onClick"]),[[h,"edit orders"],[k,o(e)("edit"),void 0,{top:!0}]]),y(r(p,{icon:"pi pi-trash mx-2",class:"p-delete",onClick:C=>K(a.data.id)},null,8,["onClick"]),[[h,"delete orders"],[k,o(e)("delete"),void 0,{top:!0}]]),y(r(p,{icon:"pi pi-check",class:"p-detail",onClick:C=>B(a.data.id,1)},null,8,["onClick"]),[[h,"edit orders"],[k,o(e)("order.accept"),void 0,{top:!0}]]),y(r(p,{icon:"pi pi-times",class:"p-delete",onClick:C=>B(a.data.id,5)},null,8,["onClick"]),[[h,"edit orders"],[k,o(e)("order.cancel"),void 0,{top:!0}]]),y(r(p,{icon:"pi pi-truck",class:"p-detail",onClick:C=>B(a.data.id,3)},null,8,["onClick"]),[[h,"edit orders"],[k,o(e)("order.delivered"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[h,"list orders"]]),f.value>0?(D(),q("div",qe,[l("div",Ne,[l("span",Pe,s(o(e)("order.showing"))+" "+s(z.value)+" "+s(o(e)("order.to"))+" "+s(A.value)+" "+s(o(e)("order.of"))+" "+s(E.value)+" "+s(o(e)("order.entries")),1)]),l("div",Ee,[l("span",Be,[l("button",{class:"p-paginator-first p-paginator-element p-link",disabled:m.value===1,onClick:t[2]||(t[2]=a=>x(1))},[...t[26]||(t[26]=[l("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)])],8,Re),l("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:m.value===1,onClick:t[3]||(t[3]=a=>x(m.value-1))},[...t[27]||(t[27]=[l("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)])],8,Fe),(D(!0),q(he,null,ye(f.value,a=>(D(),q("button",{key:a,class:ge(["p-paginator-page p-paginator-element p-link",{"p-highlight":m.value===a}]),onClick:C=>x(a)},s(a),11,Me))),128)),l("button",{class:"p-paginator-next p-paginator-element p-link",disabled:m.value===f.value,onClick:t[4]||(t[4]=a=>x(m.value+1))},[...t[28]||(t[28]=[l("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)])],8,Oe),l("button",{class:"p-paginator-last p-paginator-element p-link",disabled:m.value===f.value,onClick:t[5]||(t[5]=a=>x(f.value))},[...t[29]||(t[29]=[l("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)])],8,je)]),l("span",ze,[r(de,{modelValue:V.value,"onUpdate:modelValue":t[6]||(t[6]=a=>V.value=a),options:[5,10,20,30],onChange:te,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])):be("",!0)]),r(R,{visible:$.value,"onUpdate:visible":t[13]||(t[13]=a=>$.value=a),style:{width:"450px"},header:o(e)("order.createTitle"),modal:!0},{footer:u(()=>[r(p,{label:o(e)("cancel"),icon:"pi pi-times",class:"p-button-text",onClick:t[12]||(t[12]=a=>$.value=!1)},null,8,["label"]),r(p,{label:o(e)("save"),icon:"pi pi-check",class:"p-button-text p-button-success",onClick:L},null,8,["label"])]),default:u(()=>[l("div",Ae,[l("div",Le,[l("p",Ge,s(o(e)("order.orderNumber")),1),r(c,{id:"number",modelValue:i.value.number,"onUpdate:modelValue":t[7]||(t[7]=a=>i.value.number=a),required:"",placeholder:o(e)("order.orderNumber")},null,8,["modelValue","placeholder"])]),l("div",We,[l("p",Ye,s(o(e)("order.pharmacyId")),1),r(c,{id:"pharmacy_id",modelValue:i.value.pharmacy_id,"onUpdate:modelValue":t[8]||(t[8]=a=>i.value.pharmacy_id=a),type:"number",required:"",placeholder:o(e)("order.pharmacyId")},null,8,["modelValue","placeholder"])]),l("div",He,[l("p",Je,s(o(e)("order.warehouseId")),1),r(c,{id:"warehouse_id",modelValue:i.value.warehouse_id,"onUpdate:modelValue":t[9]||(t[9]=a=>i.value.warehouse_id=a),type:"number",required:"",placeholder:o(e)("order.warehouseId")},null,8,["modelValue","placeholder"])]),l("div",Ke,[l("p",Qe,s(o(e)("order.status")),1),r(c,{id:"status",modelValue:i.value.status,"onUpdate:modelValue":t[10]||(t[10]=a=>i.value.status=a),required:"",placeholder:o(e)("order.status")},null,8,["modelValue","placeholder"])]),l("div",Xe,[l("p",Ze,s(o(e)("order.totalPrice")),1),r(c,{id:"total_price",modelValue:i.value.total_price,"onUpdate:modelValue":t[11]||(t[11]=a=>i.value.total_price=a),type:"number",required:"",placeholder:o(e)("order.totalPrice")},null,8,["modelValue","placeholder"])])])]),_:1},8,["visible","header"]),r(R,{visible:P.value,"onUpdate:visible":t[20]||(t[20]=a=>P.value=a),style:{width:"450px"},header:o(e)("order.editTitle"),modal:!0},{footer:u(()=>[r(p,{label:o(e)("cancel"),icon:"pi pi-times",class:"p-button-text",onClick:t[19]||(t[19]=a=>P.value=!1)},null,8,["label"]),r(p,{label:o(e)("save"),icon:"pi pi-check",class:"p-button-text p-button-success",onClick:L},null,8,["label"])]),default:u(()=>[l("div",et,[l("div",tt,[l("p",at,s(o(e)("order.orderNumber")),1),r(c,{id:"number_edit",modelValue:i.value.number,"onUpdate:modelValue":t[14]||(t[14]=a=>i.value.number=a),required:"",placeholder:o(e)("order.orderNumber")},null,8,["modelValue","placeholder"])]),l("div",lt,[l("p",ot,s(o(e)("order.pharmacyId")),1),r(c,{id:"pharmacy_id_edit",modelValue:i.value.pharmacy_id,"onUpdate:modelValue":t[15]||(t[15]=a=>i.value.pharmacy_id=a),type:"number",required:"",placeholder:o(e)("order.pharmacyId")},null,8,["modelValue","placeholder"])]),l("div",rt,[l("p",st,s(o(e)("order.warehouseId")),1),r(c,{id:"warehouse_id_edit",modelValue:i.value.warehouse_id,"onUpdate:modelValue":t[16]||(t[16]=a=>i.value.warehouse_id=a),type:"number",required:"",placeholder:o(e)("order.warehouseId")},null,8,["modelValue","placeholder"])]),l("div",dt,[l("p",it,s(o(e)("order.status")),1),r(c,{id:"status_edit",modelValue:i.value.status,"onUpdate:modelValue":t[17]||(t[17]=a=>i.value.status=a),required:"",placeholder:o(e)("order.status")},null,8,["modelValue","placeholder"])]),l("div",nt,[l("p",ut,s(o(e)("order.totalPrice")),1),r(c,{id:"total_price_edit",modelValue:i.value.total_price,"onUpdate:modelValue":t[18]||(t[18]=a=>i.value.total_price=a),type:"number",required:"",placeholder:o(e)("order.totalPrice")},null,8,["modelValue","placeholder"])])])]),_:1},8,["visible","header"]),r(R,{visible:w.value,"onUpdate:visible":t[22]||(t[22]=a=>w.value=a),style:{width:"450px"},header:o(e)("order.deleteConfirmTitle"),modal:!0},{footer:u(()=>[r(p,{label:o(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[21]||(t[21]=a=>w.value=!1)},null,8,["label"]),r(p,{label:o(e)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:Q},null,8,["label"])]),default:u(()=>[l("div",ct,[t[30]||(t[30]=l("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),l("span",null,s(o(e)("order.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])),[[h,"list orders"]])}}},_t=ie(pt,[["__scopeId","data-v-9bca763d"]]);export{_t as default};
