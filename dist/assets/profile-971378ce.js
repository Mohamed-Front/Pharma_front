import{_ as L,R as j,u as D,j as S,i as B,r as h,d as A,o as n,c as d,k as e,m as a,t as s,l as x,q as g,z as _,F,x as N,v as T,B as v,E as V,D as y,S as z,A as I}from"./index-abebc0c4.js";const M={class:"bg-gray-50 min-h-screen p-4 md:p-8"},P={class:"bg-white rounded-xl shadow-md p-6 flex flex-col md:flex-row items-center justify-between gap-6 mb-8"},R={class:"flex flex-col-reverse md:flex-row items-center text-center gap-6"},q=["src","alt"],G={class:"flex flex-col items-center gap-2"},O={class:"text-2xl md:text-3xl font-bold text-gray-900"},U={class:"flex items-center gap-2"},W={class:"text-sm text-gray-700"},H={class:"flex items-center gap-2"},J=["href"],K={class:"flex items-center gap-2"},Q={class:"text-sm text-gray-700"},X={class:"flex items-center gap-2"},Y={class:"text-sm text-gray-700"},Z={class:"flex items-start gap-4"},ee={class:"flex flex-col items-end gap-2"},te={class:"flex items-center gap-2 mb-2 bg-[#DCFCE7] px-2 rounded-md"},se={class:"text-sm font-semibold text-gray-700"},oe={key:0,class:"pi pi-check text-xs"},ae={key:1,class:"pi pi-times text-xs"},re={class:"bg-white rounded-xl shadow-md p-6"},le={class:"flex flex-col-reverse md:flex-row items-center justify-between gap-4 mb-6"},ie={class:"text-xl md:text-2xl font-bold text-gray-900"},ne={class:"text-green-600 hover:underline text-sm font-semibold"},de={key:0,class:"flex justify-center mb-10"},ce={key:1,class:"text-center text-gray-600 py-8"},pe={key:2,class:"overflow-x-auto"},ue={class:"w-full text-left rtl:text-right table-auto"},_e={class:"text-gray-500 text-sm border-b border-gray-200"},fe={class:"p-4 whitespace-nowrap"},he={class:"p-4 whitespace-nowrap"},me={class:"p-4 whitespace-nowrap"},xe={class:"p-4 whitespace-nowrap"},ge={class:"p-4 whitespace-nowrap"},ve={class:"p-4 text-gray-700 font-medium whitespace-nowrap"},ye={class:"p-4 text-gray-500 whitespace-nowrap"},we={class:"p-4 text-gray-700 whitespace-nowrap"},be={class:"p-4 whitespace-nowrap"},ke={class:"p-4 text-gray-700 font-semibold whitespace-nowrap"},Ee={class:"m-0 mb-4"},Ce={class:"flex justify-end gap-2"},$e={__name:"profile",setup(Le){const w=j(),{t}=D(),c=S(),m=B(),p=h([]),f=h(!1),u=h(!1),i=h({id:null,name:"",owner_name:"",license_number:"",phone:"",address:"",lat:"",long:"",status:null,pharmacy_logo:null,status_description:""}),b=async()=>{try{const r=await v.get("/api/pharmacy/profile/data");r.data.success&&r.data.data?i.value=r.data.data:c.add({severity:"warn",summary:t("warning"),detail:t("profile.fetchError"),life:3e3})}catch(r){c.add({severity:"error",summary:t("error"),detail:t("profile.fetchError"),life:3e3}),console.error("Error fetching profile:",r)}},k=async()=>{f.value=!0;try{const r=await v.get("/api/order");r.data.success&&r.data.data?p.value=r.data.data:(p.value=[],c.add({severity:"warn",summary:t("warning"),detail:t("orders.empty"),life:3e3}))}catch(r){p.value=[],c.add({severity:"error",summary:t("error"),detail:t("orders.fetchError"),life:3e3}),console.error("Error fetching orders:",r)}finally{f.value=!1}},E=async()=>{try{w.pharmacyhandleLogout(),m.push({name:"login"})}catch(r){c.add({severity:"error",summary:t("error"),detail:t("profile.logoutError"),life:3e3}),console.error("Error logging out:",r)}finally{u.value=!1}},C=()=>{m.push({name:"profile-edit"})},$=r=>new Date(r).toLocaleDateString("ar-EG",{day:"2-digit",month:"long",year:"numeric"});return A(()=>{b(),k()}),(r,o)=>(n(),d("div",M,[e("div",P,[e("div",R,[e("img",{src:i.value.pharmacy_logo||`https://api.dicebear.com/9.x/initials/svg?seed=${i.value.name}`,alt:a(t)("profile.alt"),class:"w-24 h-24 md:w-32 md:h-32 rounded-xl object-cover border-4 border-gray-200 shadow-md"},null,8,q),e("div",G,[e("h1",O,s(i.value.name),1),e("div",U,[o[3]||(o[3]=e("i",{class:"pi pi-map-marker text-green-600"},null,-1)),e("span",W,s(i.value.address),1)]),e("div",H,[o[4]||(o[4]=e("i",{class:"pi pi-phone text-green-600"},null,-1)),e("a",{href:"tel:"+i.value.phone,class:"text-sm text-gray-700"},s(i.value.phone),9,J)]),e("div",K,[o[5]||(o[5]=e("i",{class:"pi pi-user text-green-600"},null,-1)),e("span",Q,s(i.value.owner_name),1)]),e("div",X,[o[6]||(o[6]=e("i",{class:"pi pi-id-card text-green-600"},null,-1)),e("span",Y,s(i.value.license_number),1)])])]),e("div",Z,[e("div",ee,[e("div",te,[e("span",se,s(a(t)(`profile.status.${i.value.status_description}`)),1),e("span",{class:x(["p-1 rounded-full",i.value.status_description==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"])},[i.value.status_description==="active"?(n(),d("i",oe)):(n(),d("i",ae))],2)]),e("button",{onClick:C,class:"bg-[#0E3758] text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 transition-colors"},[g(s(a(t)("profile.edit"))+" ",1),o[7]||(o[7]=e("i",{class:"pi pi-file-edit"},null,-1))]),e("button",{onClick:o[0]||(o[0]=l=>u.value=!0),class:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 transition-colors"},[g(s(a(t)("profile.logout"))+" ",1),o[8]||(o[8]=e("i",{class:"pi pi-sign-out"},null,-1))])])])]),e("div",re,[e("div",le,[e("h2",ie,s(a(t)("orders.title")),1),e("button",ne,s(a(t)("orders.viewAll")),1)]),f.value?(n(),d("div",de,[_(a(V),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])):!f.value&&p.value.length===0?(n(),d("div",ce,[e("p",null,s(a(t)("orders.empty")),1)])):(n(),d("div",pe,[e("table",ue,[e("thead",null,[e("tr",_e,[e("th",fe,s(a(t)("orders.id")),1),e("th",he,s(a(t)("orders.date")),1),e("th",me,s(a(t)("orders.warehouse")),1),e("th",xe,s(a(t)("orders.statu")),1),e("th",ge,s(a(t)("orders.amount")),1)])]),e("tbody",null,[(n(!0),d(F,null,N(p.value,l=>(n(),d("tr",{key:l.id,class:"border-b border-gray-100"},[e("td",ve,s(l.number),1),e("td",ye,s($(l.created_at)),1),e("td",we,s(l.warehouse.name),1),e("td",be,[e("span",{class:x(["px-3 py-1 text-xs font-medium rounded-full",{"bg-green-100 text-green-700":l.status_description==="delivered","bg-red-100 text-red-700":l.status_description==="cancelled","bg-yellow-100 text-yellow-700":l.status_description==="pending"}])},s(a(t)(`orders.status.${l.status_description}`)),3)]),e("td",ke,s(l.total_price),1)]))),128))])])]))]),_(a(z),{visible:u.value,"onUpdate:visible":o[2]||(o[2]=l=>u.value=l),modal:"",header:"Confirm Logout",style:{width:"25rem"}},{default:T(()=>[e("p",Ee,s(a(t)("profile.logoutConfirm")),1),e("div",Ce,[_(a(y),{label:"Cancel",severity:"secondary",onClick:o[1]||(o[1]=l=>u.value=!1)}),_(a(y),{label:"Logout",severity:"danger",onClick:E})])]),_:1},8,["visible"]),_(a(I))]))}},De=L($e,[["__scopeId","data-v-8f5b5d25"]]);export{De as default};
