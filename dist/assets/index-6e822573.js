import{_ as U,r as m,d as E,Y as t,Z as M,M as z,o as h,c as y,k as o,t as _,z as a,v as p,B as $,F,x as R,s as j}from"./index-abebc0c4.js";const A={class:"permissions-container"},H={class:"card"},K={class:"header"},L={class:"subtitle"},O={class:"toolbar"},S={class:"empty-message"},Y={class:"p-fluid"},Z={class:"p-field"},q={for:"permissionName"},G={class:"p-field"},J={for:"description"},Q={__name:"index",setup(W){const w=m([]),f=m([]),l=m(!0),g=m(0),v=m(!1),c=m({id:"",name:"",description:""}),D=e=>{const s={};return e.forEach(n=>{const r=n.name.match(/^(list|show|create|edit|delete)\s+(.+)/),d=r?r[2]:"other";s[d]||(s[d]={name:d.charAt(0).toUpperCase()+d.slice(1),value:d,permissions:[]}),s[d].permissions.push(n)}),Object.values(s).sort((n,r)=>n.name.localeCompare(r.name))},b=()=>{l.value=!0,$.get("api/role/all/permissions").then(e=>{w.value=e.data.data,f.value=D(e.data.data),l.value=!1}).catch(e=>{console.error("Error fetching permissions:",e),l.value=!1})},T=e=>{v.value=!0,c.value={id:e.id,name:e.name,description:e.description||""}},k=()=>{l.value=!0,$.put(`/api/role/permission/${c.value.id}`,{description:c.value.description}).then(()=>{b(),v.value=!1}).catch(e=>{console.error("Update failed:",e)}).finally(()=>{l.value=!1})};return E(()=>{b()}),(e,s)=>{const n=t("Button"),r=t("Column"),d=t("Tag"),x=t("DataTable"),C=t("TabPanel"),V=t("TabView"),B=t("InputText"),I=t("Textarea"),N=t("Dialog"),P=M("can");return z((h(),y("div",A,[o("div",H,[o("div",K,[o("h1",null,_(e.$t("permission.permissions_Management")),1),o("p",L,_(e.$t("permission.view_and_manage_all_system_permissions_grouped_by_modules")),1)]),o("div",O,[a(n,{icon:"pi pi-refresh",label:e.$t("permission.refresh"),onClick:b,loading:l.value},null,8,["label","loading"])]),a(V,{activeIndex:g.value,"onUpdate:activeIndex":s[0]||(s[0]=i=>g.value=i),class:"grouped-tabs"},{default:p(()=>[(h(!0),y(F,null,R(f.value,i=>(h(),j(C,{key:i.value,header:i.name},{default:p(()=>[a(x,{value:i.permissions,stripedRows:"",class:"p-datatable-sm",loading:l.value,dataKey:"id",scrollable:"",scrollHeight:"flex"},{empty:p(()=>[o("div",S,[s[5]||(s[5]=o("i",{class:"pi pi-database",style:{"font-size":"2rem"}},null,-1)),o("p",null,_(e.$t("permission.no_permissions_found_in_this_group")),1)])]),default:p(()=>[a(r,{field:"id",header:e.$t("permission.id"),sortable:"",style:{width:"80px"}},null,8,["header"]),a(r,{field:"name",header:e.$t("permission.name"),sortable:""},{body:p(({data:u})=>[a(d,{value:u.name,severity:u.name.includes("delete")?"danger":u.name.includes("edit")?"warning":u.name.includes("create")?"success":"info"},null,8,["value","severity"])]),_:1},8,["header"]),a(r,{header:e.$t("permission.actions"),style:{width:"100px"}},{body:p(({data:u})=>[a(n,{icon:"pi pi-cog",class:"p-button-rounded p-button-text p-button-sm",onClick:X=>T(u)},null,8,["onClick"])]),_:1},8,["header"])]),_:1},8,["value","loading"])]),_:2},1032,["header"]))),128))]),_:1},8,["activeIndex"]),a(N,{visible:v.value,"onUpdate:visible":s[4]||(s[4]=i=>v.value=i),modal:"",header:e.$t("permission.update_Permission_Description"),style:{width:"50vw"},breakpoints:{"960px":"75vw","640px":"90vw"}},{footer:p(()=>[a(n,{label:e.$t("permission.cancel"),icon:"pi pi-times",onClick:s[3]||(s[3]=i=>v.value=!1),class:"p-button-text"},null,8,["label"]),a(n,{label:e.$t("permission.save"),icon:"pi pi-check",onClick:k,loading:l.value,autofocus:""},null,8,["label","loading"])]),default:p(()=>[o("div",Y,[o("div",Z,[o("label",q,_(e.$t("permission.permission_Name")),1),a(B,{id:"permissionName",modelValue:c.value.name,"onUpdate:modelValue":s[1]||(s[1]=i=>c.value.name=i),disabled:""},null,8,["modelValue"])]),o("div",G,[o("label",J,_(e.$t("permission.description")),1),a(I,{id:"description",modelValue:c.value.description,"onUpdate:modelValue":s[2]||(s[2]=i=>c.value.description=i),rows:"5",autoResize:"",placeholder:e.$t("permission.enter_permission_description")},null,8,["modelValue","placeholder"])])])]),_:1},8,["visible","header"])])])),[[P,"list permissions"]])}}},se=U(Q,[["__scopeId","data-v-38601006"]]);export{se as default};
