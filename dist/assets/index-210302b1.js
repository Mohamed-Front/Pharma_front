import{a2 as ae,a0 as ne,u as se,a as le,z as ie,r as p,o as O,c as V,Y as A,e as i,h as d,g as o,t as l,i as _,j as h,s as de,Z as m,$ as b,A as f,C as g,ae as ce,F as ue,y as pe,D as $,B as me,E as D,w as fe,a1 as ge,k as ye,b as I,_ as _e}from"./index-2cd76906.js";const he={class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center py-8"},be={class:"w-full max-w-4xl mx-auto bg-white rounded-2xl p-8 shadow-lg"},ve={class:"text-3xl font-bold text-center text-gray-800 mb-8 bg-gradient-to-r from-green-500 to-teal-500 bg-clip-text text-transparent font-[Inter]"},we={key:0,class:"flex justify-center items-center h-64"},xe={key:1,class:"space-y-8"},ke={class:"grid gap-6 lg:grid-cols-2 grid-cols-1"},$e={class:"relative"},Ie={for:"name",class:"block text-sm font-medium text-gray-700 mb-1 font-[Inter]"},qe=["placeholder"],Ce={key:0,class:"text-red-500 mt-1 block"},Ve={class:"relative"},De={for:"owner_name",class:"block text-sm font-medium text-gray-700 mb-1 font-[Inter]"},Ee=["placeholder"],je={key:0,class:"text-red-500 mt-1 block"},Se={class:"relative"},Ue={for:"phone",class:"block text-sm font-medium text-gray-700 mb-1 font-[Inter]"},Le=["placeholder"],Be={key:0,class:"text-red-500 mt-1 block"},Fe={class:"relative"},Me={for:"country",class:"block text-sm font-medium text-gray-700 mb-1 font-[Inter]"},Ne=["placeholder"],ze={key:0,class:"text-red-500 mt-1 block"},Pe={class:"relative"},Ge={for:"city",class:"block text-sm font-medium text-gray-700 mb-1 font-[Inter]"},Oe=["value"],Ae={key:0,class:"text-red-500 mt-1 block"},Te={class:"relative"},Re={for:"address",class:"block text-sm font-medium text-gray-700 mb-1 font-[Inter]"},Je=["placeholder"],Ye={key:0,class:"text-red-500 mt-1 block"},Ze={class:"relative"},He={for:"license_number",class:"block text-sm font-medium text-gray-700 mb-1 font-[Inter]"},Ke=["placeholder"],Qe={class:"space-y-6"},We={class:"text-xl font-semibold text-gray-800 bg-gradient-to-r from-green-500 to-teal-500 bg-clip-text text-transparent font-[Inter]"},Xe={key:0,class:"w-full h-80 rounded-lg overflow-hidden shadow-md"},et=["src"],tt={class:"space-y-6"},rt={class:"text-xl font-semibold text-gray-800 bg-gradient-to-r from-green-500 to-teal-500 bg-clip-text text-transparent font-[Inter]"},ot={class:"relative"},at={key:0,class:"p-4"},nt={class:"relative group"},st=["src"],lt={class:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-0 rounded-lg group-hover:bg-opacity-40 transition-all duration-300"},it={class:"space-x-3 transform translate-y-4 opacity-0 group-hover:opacity-100 group-hover:translate-y-0 transition-all duration-300"},dt={class:"mt-2 text-sm text-center text-gray-500 font-[Inter]"},ct={key:1,class:"flex flex-col items-center justify-center h-full p-4"},ut={class:"mb-1 text-sm text-center text-gray-600 font-[Inter]"},pt={class:"font-medium text-green-500"},mt={class:"flex justify-between mt-8"},ft={class:"mb-4"},gt={class:"flex justify-end space-x-4"},yt=ae({__name:"index",setup(_t){const T=ne(),{t:s}=se(),c=le(),R=ie(),w=p([]),J=()=>{I.get("api/city?type=warehouse&status=1").then(e=>{w.value=e.data.data})};O(()=>{J()}),V(()=>w.value.filter(e=>e.Status==="active"));const E=p(""),q=p([]),C=p(!1),y=p(!1),x=p(!1),v=p({pharmacy_logo:!1}),t=A({id:null,name:"",owner_name:"",license_number:"",phone:"",country:"سوريا",city:"",address:"",lat:"",long:"",location_link:"",status:null,status_description:"",total_rating:null,media:[],pharmacy_logo:null,pharmacy_logo_preview:null,pharmacy_logo_file:null}),a=A({name:"",owner_name:"",phone:"",country:"",city:"",address:""}),j=V(()=>t.location_link?`https://www.google.com/maps?q=${t.lat},${t.long}&hl=es;z=14&output=embed`:E.value),S=async()=>{try{const e=await I.get("/api/warehouse/profile/data");e.data.success&&e.data.data?(Object.assign(t,e.data.data),t.country="سوريا",e.data.data.media&&e.data.data.media.length>0&&(t.pharmacy_logo=e.data.data.media[0].url),E.value=`https://www.google.com/maps?q=${e.data.data.lat},${e.data.data.long}&hl=es;z=14&output=embed`):c.add({severity:"warn",summary:s("warning"),detail:s("profile.fetchError"),life:3e3})}catch(e){c.add({severity:"error",summary:s("error"),detail:s("profile.fetchError"),life:3e3}),console.error("Error fetching profile:",e)}},Y=async()=>{C.value=!0;try{const e=await I.get("/api/order");e.data.success&&e.data.data?q.value=e.data.data:(q.value=[],c.add({severity:"warn",summary:s("warning"),detail:s("orders.empty"),life:3e3}))}catch(e){q.value=[],c.add({severity:"error",summary:s("error"),detail:s("orders.fetchError"),life:3e3}),console.error("Error fetching orders:",e)}finally{C.value=!1}},U=()=>{t.name.trim()?a.name="":a.name=s("profile.warehouse_name_required")},L=()=>{t.owner_name.trim()?a.owner_name="":a.owner_name=s("profile.owner_name_required")},B=()=>{t.phone.trim()?t.phone.length>15?a.phone=s("profile.phone_too_long"):a.phone="":a.phone=s("profile.phone_required")},Z=()=>{t.country.trim()?a.country="":a.country=s("profile.country_required")},H=()=>{t.city.trim()?a.city="":a.city=s("profile.city_required")},F=()=>{t.address.trim()?a.address="":a.address=s("profile.address_required")},M=V(()=>t.name.trim()!==""&&t.owner_name.trim()!==""&&t.phone.trim()!==""&&t.phone.length<=15&&(t==null?void 0:t.country)!==""&&(t==null?void 0:t.city)!==""&&t.address.trim()!==""&&!a.name&&!a.owner_name&&!a.phone&&!a.country&&!a.city&&!a.address),K=e=>{v.value[e]=!0},Q=e=>{v.value[e]=!1},N=(e,r)=>{var u,k,z;const n=((k=(u=e.dataTransfer)==null?void 0:u.files)==null?void 0:k[0])||((z=e.target.files)==null?void 0:z[0]);if(n){if(!n.type.match("image.*")){c.add({severity:"error",summary:s("error"),detail:s("profile.invalid_image_type"),life:3e3});return}if(n.size>1024*1024){c.add({severity:"error",summary:s("error"),detail:s("profile.image_too_large"),life:3e3});return}t[`${r}_file`]=n;const P=new FileReader;P.onload=oe=>{var G;t[`${r}_preview`]=(G=oe.target)==null?void 0:G.result},P.readAsDataURL(n),v.value[r]=!1}},W=e=>{t[`${e}_file`]=null,t[`${e}_preview`]=null,t.pharmacy_logo=null;const r=document.getElementById(e);r&&(r.value="")},X=e=>{const r=document.getElementById(e);r&&r.click()},ee=()=>{const e=w.value.find(r=>r.name===t.city);e&&(t.lat=e.lat.toString(),t.long=e.long.toString(),t.location_link=`https://www.google.com/maps?q=${e.lat},${e.long}`)},te=async()=>{var r,n;if(y.value)return;if(y.value=!0,U(),L(),B(),Z(),H(),F(),!M.value){y.value=!1;return}const e=new FormData;e.append("name",t.name),e.append("owner_name",t.owner_name),e.append("phone",t.phone),e.append("country",t.country),e.append("city",t.city),e.append("address",t.address),t.license_number&&e.append("license_number",t.license_number),t.lat&&e.append("lat",t.lat),t.long&&e.append("long",t.long),t.location_link&&e.append("location_link",t.location_link),t.pharmacy_logo_file&&e.append("pharmacy_logo",t.pharmacy_logo_file);try{(await I.post("/api/warehouse/profile/update",e)).data.success?(c.add({severity:"success",summary:s("success"),detail:s("profile.update_success"),life:3e3}),await S()):c.add({severity:"warn",summary:s("warning"),detail:s("profile.update_failed"),life:3e3})}catch(u){const k=(n=(r=u.response)==null?void 0:r.data)!=null&&n.errors?Object.values(u.response.data.errors).join(", "):s("profile.update_failed");c.add({severity:"error",summary:s("error"),detail:k,life:3e3}),console.error("Error updating profile:",u)}finally{y.value=!1}},re=async()=>{try{await T.pharmacyhandleLogout(),R.push({name:"login"})}catch(e){c.add({severity:"error",summary:s("error"),detail:s("profile.logoutError"),life:3e3}),console.error("Error logging out:",e)}finally{x.value=!1}};return O(()=>{S(),Y()}),(e,r)=>(i(),d("div",he,[o("div",be,[o("h2",ve,l(e.$t("profile.title")),1),C.value?(i(),d("div",we,[_(h(de))])):(i(),d("div",xe,[o("div",ke,[o("div",$e,[o("label",Ie,l(e.$t("profile.warehouse_name"))+" * ",1),m(o("input",{"onUpdate:modelValue":r[0]||(r[0]=n=>t.name=n),id:"name",name:"name",type:"text",required:"",class:f(["w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all duration-300 font-[Inter]",{"border-red-500":a.name}]),placeholder:e.$t("profile.enter_warehouse_name"),onInput:U},null,42,qe),[[b,t.name]]),a.name?(i(),d("small",Ce,l(a.name),1)):g("",!0)]),o("div",Ve,[o("label",De,l(e.$t("profile.owner_name"))+" * ",1),m(o("input",{"onUpdate:modelValue":r[1]||(r[1]=n=>t.owner_name=n),id:"owner_name",name:"owner_name",type:"text",required:"",class:f(["w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all duration-300 font-[Inter]",{"border-red-500":a.owner_name}]),placeholder:e.$t("profile.enter_owner_name"),onInput:L},null,42,Ee),[[b,t.owner_name]]),a.owner_name?(i(),d("small",je,l(a.owner_name),1)):g("",!0)]),o("div",Se,[o("label",Ue,l(e.$t("profile.phone"))+" * ",1),m(o("input",{"onUpdate:modelValue":r[2]||(r[2]=n=>t.phone=n),id:"phone",name:"phone",type:"tel",required:"",class:f(["w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all duration-300 font-[Inter]",{"border-red-500":a.phone}]),placeholder:e.$t("profile.enter_phone"),onInput:B},null,42,Le),[[b,t.phone]]),a.phone?(i(),d("small",Be,l(a.phone),1)):g("",!0)]),o("div",Fe,[o("label",Me,l(e.$t("profile.country"))+" * ",1),m(o("input",{"onUpdate:modelValue":r[3]||(r[3]=n=>t.country=n),id:"country",name:"country",type:"text",readonly:"",required:"",class:f(["w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all duration-300 font-[Inter]",{"border-red-500":a.country}]),placeholder:e.$t("profile.enter_country")},null,10,Ne),[[b,t.country]]),a.country?(i(),d("small",ze,l(a.country),1)):g("",!0)]),o("div",Pe,[o("label",Ge,l(e.$t("profile.city"))+" * ",1),m(o("select",{"onUpdate:modelValue":r[4]||(r[4]=n=>t.city=n),id:"city",name:"city",required:"",onChange:ee,class:f(["w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all duration-300 font-[Inter]",{"border-red-500":a.city}])},[r[15]||(r[15]=o("option",{value:"",disabled:"",selected:""},"اختر المدينة",-1)),(i(!0),d(ue,null,pe(w.value,n=>(i(),d("option",{key:n.name,value:n.name},l(n.name),9,Oe))),128))],34),[[ce,t.city]]),a.city?(i(),d("small",Ae,l(a.city),1)):g("",!0)]),o("div",Te,[o("label",Re,l(e.$t("profile.address"))+" * ",1),m(o("input",{"onUpdate:modelValue":r[5]||(r[5]=n=>t.address=n),id:"address",name:"address",type:"text",required:"",class:f(["w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all duration-300 font-[Inter]",{"border-red-500":a.address}]),placeholder:e.$t("profile.enter_address"),onInput:F},null,42,Je),[[b,t.address]]),a.address?(i(),d("small",Ye,l(a.address),1)):g("",!0)]),o("div",Ze,[o("label",He,l(e.$t("profile.license_number")),1),m(o("input",{"onUpdate:modelValue":r[6]||(r[6]=n=>t.license_number=n),id:"license_number",name:"license_number",type:"text",class:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all duration-300 font-[Inter]",placeholder:e.$t("profile.enter_license_number")},null,8,Ke),[[b,t.license_number]])])]),o("div",Qe,[o("h4",We,l(e.$t("profile.location_information")),1),j.value?(i(),d("div",Xe,[o("iframe",{src:j.value,width:"100%",height:"100%",style:{border:"0"},loading:"lazy",referrerpolicy:"no-referrer-when-downgrade"},null,8,et)])):g("",!0)]),o("div",tt,[o("h4",rt,l(e.$t("profile.pharmacy_logo")),1),o("div",ot,[o("label",{onDragover:r[10]||(r[10]=$(n=>K("pharmacy_logo"),["prevent"])),onDragleave:r[11]||(r[11]=n=>Q("pharmacy_logo")),onDrop:r[12]||(r[12]=$(n=>N(n,"pharmacy_logo"),["prevent"])),class:f([{"border-green-400 bg-green-50":v.value.pharmacy_logo,"border-gray-200":!v.value.pharmacy_logo},"w-full h-28 rounded-lg cursor-pointer transition-all duration-300 hover:border-green-400 border"])},[o("input",{type:"file",onChange:r[7]||(r[7]=n=>N(n,"pharmacy_logo")),accept:"image/*",class:"hidden",id:"pharmacy_logo"},null,32),t.pharmacy_logo_preview||t.pharmacy_logo?(i(),d("div",at,[o("div",nt,[o("img",{src:t.pharmacy_logo_preview||t.pharmacy_logo,alt:"Pharmacy Logo Preview",class:"object-cover w-full h-32 rounded-lg shadow-md group-hover:scale-105 transition-transform duration-300"},null,8,st),o("div",lt,[o("div",it,[o("button",{type:"button",onClick:r[8]||(r[8]=$(n=>W("pharmacy_logo"),["stop"])),class:"p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition"},[...r[16]||(r[16]=[o("i",{class:"text-sm pi pi-trash"},null,-1)])]),o("button",{type:"button",onClick:r[9]||(r[9]=$(n=>X("pharmacy_logo"),["stop"])),class:"p-2 bg-white text-gray-700 rounded-full hover:bg-gray-100 transition"},[...r[17]||(r[17]=[o("i",{class:"text-sm pi pi-pencil"},null,-1)])])])])]),o("p",dt,l(e.$t("profile.click_or_drag_to_change_photo")),1)])):(i(),d("div",ct,[r[18]||(r[18]=o("div",{class:"p-3 mb-2 bg-green-100 rounded-full"},[o("i",{class:"text-xl text-green-500 pi pi-image"})],-1)),o("p",ut,[o("span",pt,l(e.$t("profile.click_to_upload")),1),me(" "+l(e.$t("profile.or_drag_and_drop")),1)]),r[19]||(r[19]=o("p",{class:"text-xs text-gray-400 font-[Inter]"},"SVG, PNG, JPG or GIF (max. 1MB)",-1))]))],34)])]),o("div",mt,[_(h(D),{label:e.$t("profile.save_changes"),disabled:!M.value||y.value,loading:y.value,class:"px-6 py-2 bg-gradient-to-r from-green-500 to-teal-500 text-white font-semibold rounded-lg shadow-md hover:from-green-600 hover:to-teal-600 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-offset-2 transition-all duration-300 font-[Inter]",onClick:te},null,8,["label","disabled","loading"])])])),_(h(ge),{visible:x.value,"onUpdate:visible":r[14]||(r[14]=n=>x.value=n),header:e.$t("profile.logout"),modal:"",style:{width:"400px"},class:"font-[Inter]"},{default:fe(()=>[o("p",ft,l(e.$t("profile.logout_confirm")),1),o("div",gt,[_(h(D),{label:e.$t("profile.cancel"),text:"",onClick:r[13]||(r[13]=n=>x.value=!1)},null,8,["label"]),_(h(D),{label:e.$t("profile.logout"),severity:"danger",onClick:re},null,8,["label"])])]),_:1},8,["visible","header"]),_(h(ye))])]))}});const bt=_e(yt,[["__scopeId","data-v-6892631d"]]);export{bt as default};
