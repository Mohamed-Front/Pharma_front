import{_ as N,g as E,o,c as n,z as v,m as d,E as A,F as j,x as P,s as I,G as R,D as h,u as U,j as W,r as p,w as G,d as H,k as r,v as q,y as S,B as L,H as Q,t as _,q as J,A as K}from"./index-2f0b6a57.js";const O={key:0,class:"flex justify-center mb-10"},X={key:1,class:"flex flex-wrap justify-center gap-3 mb-10"},Y={__name:"Categories",props:{categories:{type:Array,required:!0},selectedCategory:{type:String,required:!0},loading:{type:Boolean,required:!0}},emits:["selectCategory"],setup(V,{emit:s}){const u=V,y=s,b=E(()=>localStorage.getItem("appLang")||"ar"),f=l=>b.value==="en"?l.name_en:l.name_ar;return(l,i)=>u.loading?(o(),n("div",O,[v(d(A),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])):(o(),n("div",X,[(o(!0),n(j,null,P(u.categories,c=>(o(),I(d(h),{key:c.id,label:f(c),style:R(u.selectedCategory===c.id?{padding:"0.5rem 1.25rem",borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease",backgroundColor:"#059669",color:"#ffffff",":hover":{backgroundColor:"#047857"}}:{padding:"0.5rem 1.25rem",borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease",backgroundColor:"#ffffff !important",color:"#000000",border:"1px solid #e5e7eb",":hover":{backgroundColor:"#f3f4f6"}}),onClick:g=>y("selectCategory",c.id)},null,8,["label","style","onClick"]))),128))]))}},Z=N(Y,[["__scopeId","data-v-dba9c9b2"]]);const ee={class:"bg-gray-50"},ae={class:"py-10 px-4 max-w-7xl m-auto"},te={class:"flex justify-center mb-8"},re={class:"relative w-full max-w-lg"},se={key:0,class:"flex justify-center mb-10"},oe={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-10"},le={class:"flex justify-between"},ne={class:"text-lg md:text-xl font-bold text-gray-900"},ie={class:"text-sm text-gray-600"},de=["src"],ce={class:"flex items-center gap-2 my-3"},ue={class:"text-sm text-gray-700"},ge={class:"text-sm text-gray-700"},fe={class:"flex flex-wrap gap-2 mb-4"},me={class:"flex items-center justify-between w-full mt-auto mb-4"},pe={class:"bg-green-100 text-green-800 text-xs font-semibold px-2 py-1 rounded-full"},ve={class:"text-lg md:text-xl font-bold text-green-600"},ye={key:2,class:"flex justify-center items-center gap-2"},be={key:0,class:"px-4 py-2 text-gray-500"},xe={__name:"categories",setup(V){const{t:s}=U(),u=W(),y=p([]),b=p([]),f=p("all"),l=p(1),i=p(1),c=p(!1),g=p(""),C=p({}),B=[],T=[];E(()=>{if(f.value==="all")return"";const t=y.value.find(a=>a.id===f.value),e=localStorage.getItem("appLang")||"ar";return t?e==="en"?t.name_en:t.name_ar:""});const z=async()=>{var t;c.value=!0;try{const e=await L.get("/api/pharmacy-home/get/categories");e.data.success&&((t=e.data.data)==null?void 0:t.length)>0?y.value=[{id:"all",name_ar:"الكل",name_en:"All"},...e.data.data]:(y.value=B,u.add({severity:"warn",summary:s("warning"),detail:s("error.noCategories"),life:3e3}))}catch(e){y.value=B,u.add({severity:"error",summary:s("error"),detail:s("error.fetchCategories"),life:3e3}),console.error("Error fetching categories:",e)}finally{c.value=!1}},k=async(t=1)=>{var e;c.value=!0;try{const a=f.value==="all"?"":`category_id=${f.value}&`,w=g.value?`search=${encodeURIComponent(g.value)}&`:"",m=await L.get(`/api/pharmacy-home/get/products?${a}${w}page=${t}`);m.data.success&&((e=m.data.data)==null?void 0:e.length)>0?(b.value=m.data.data.map(x=>({...x,discount:""})),i.value=m.data.pagination.last_page||1,l.value=m.data.pagination.current_page||1):(b.value=T,i.value=1,l.value=1,u.add({severity:"warn",summary:s("warning"),detail:s("error.noProducts"),life:3e3}))}catch(a){b.value=T,i.value=1,l.value=1,u.add({severity:"error",summary:s("error"),detail:s("error.fetchProducts"),life:3e3}),console.error("Error fetching products:",a)}finally{c.value=!1}},D=async t=>{C.value[t]=!0;try{const e=await L.post("/api/cart/add/item",{product_id:t,quantity:1});if(e.data.success)u.add({severity:"success",summary:s("success"),detail:s("cart.addSuccess"),life:3e3});else throw new Error(e.data.message||s("error.addToCart"))}catch(e){u.add({severity:"error",summary:s("error"),detail:e.message||s("error.addToCart"),life:3e3}),console.error("Error adding to cart:",e)}finally{C.value[t]=!1}},F=E(()=>g.value?b.value.filter(t=>t.commercial_name.toLowerCase().includes(g.value.toLowerCase())||t.scientific_structure.some(e=>e.toLowerCase().includes(g.value.toLowerCase()))):b.value),M=t=>{f.value=t,l.value=1,k(1)},$=t=>{t>=1&&t<=i.value&&(l.value=t,k(t))};return G(g,()=>{l.value=1,k(1)}),H(()=>{z(),k()}),(t,e)=>(o(),n("div",ee,[r("div",ae,[r("div",te,[r("div",re,[v(d(Q),{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=a=>g.value=a),placeholder:d(s)("search.placeholder"),class:"w-full p-3 pr-12 text-gray-700 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"},null,8,["modelValue","placeholder"]),e[5]||(e[5]=r("i",{class:"pi pi-search absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500"},null,-1))])]),v(Z,{categories:y.value,selectedCategory:f.value,loading:c.value,onSelectCategory:M},null,8,["categories","selectedCategory","loading"]),c.value?(o(),n("div",se,[v(d(A),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])):(o(),n("div",oe,[(o(!0),n(j,null,P(F.value,a=>{var w,m;return o(),n("div",{key:a.id,class:"bg-white rounded-xl shadow-md p-4 relative overflow-hidden flex flex-col"},[r("div",le,[r("div",null,[e[6]||(e[6]=r("div",{class:"flex justify-between items-start mb-2"},[r("span",{class:"bg-green-500 text-white text-xs font-semibold px-2 py-1 rounded-full"},"أدوية فقط")],-1)),r("div",null,[r("h3",ne,_(a.commercial_name),1),r("p",ie,_(a.pharmaceutical_form),1)])]),r("div",null,[(m=(w=a.media)==null?void 0:w[0])!=null&&m.url?(o(),n("img",{key:0,src:a.media[0].url,alt:"Product Image",class:"w-16 h-16 object-cover rounded-lg mr-3",onError:e[1]||(e[1]=(...x)=>t.handleImageError&&t.handleImageError(...x))},null,40,de)):S("",!0)])]),r("div",ce,[e[7]||(e[7]=r("i",{class:"pi pi-map-marker text-green-600 text-lg"},null,-1)),r("span",ue,_(a.warehouse.name),1),e[8]||(e[8]=r("i",{class:"pi pi-building text-green-600 text-lg"},null,-1)),r("span",ge,_(a.warehouse.address),1)]),r("div",fe,[(o(!0),n(j,null,P(a.scientific_structure,x=>(o(),n("span",{key:x,class:"bg-gray-200 text-gray-800 text-xs font-medium px-3 py-1 rounded-full"},_(x),1))),128))]),r("div",me,[r("span",pe,_(a.discount),1),r("span",ve,[J(" $"+_(a.price)+" ",1),e[9]||(e[9]=r("span",{class:"text-gray-500 text-sm font-normal"},null,-1))])]),v(d(h),{label:C.value[a.id]?d(s)("cart.adding"):d(s)("cart.addToCart"),icon:C.value[a.id]?"pi pi-spin pi-spinner ml-2":"pi pi-cart-plus ml-2",class:"bg-green-600 hover:bg-green-700 text-white font-bold py-3 w-full rounded-lg transition-colors flex items-center justify-center",disabled:C.value[a.id],onClick:x=>D(a.id)},null,8,["label","icon","disabled","onClick"])])}),128))])),!c.value&&i.value>1?(o(),n("div",ye,[v(d(h),{disabled:l.value===1,class:"px-4 py-2 bg-white text-gray-600 rounded-lg shadow-sm border border-gray-200 hover:bg-gray-100 transition-colors disabled:opacity-50",onClick:e[2]||(e[2]=a=>$(l.value-1))},{default:q(()=>[...e[10]||(e[10]=[r("i",{class:"pi pi-chevron-right"},null,-1)])]),_:1},8,["disabled"]),(o(!0),n(j,null,P(Math.min(i.value,5),a=>(o(),I(d(h),{key:a,label:a.toString(),style:R(l.value===a?{padding:"0.5rem 1rem",borderRadius:"0.5rem",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",backgroundColor:"#059669",color:"#ffffff",":hover":{backgroundColor:"#047857"}}:{padding:"0.5rem 1rem",borderRadius:"0.5rem",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",backgroundColor:"#ffffff !important",color:"#1f2937",border:"1px solid #e5e7eb",":hover":{backgroundColor:"#f3f4f6"}}),onClick:w=>$(a)},null,8,["label","style","onClick"]))),128)),i.value>5?(o(),n("span",be,"...")):S("",!0),i.value>5?(o(),I(d(h),{key:1,label:i.value.toString(),style:R(l.value===i.value?{padding:"0.5rem 1rem",borderRadius:"0.5rem",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",backgroundColor:"#059669",color:"#ffffff",":hover":{backgroundColor:"#047857"}}:{padding:"0.5rem 1rem",borderRadius:"0.5rem",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",backgroundColor:"#ffffff",color:"#1f2937",border:"1px solid #e5e7eb",":hover":{backgroundColor:"#f3f4f6"}}),onClick:e[3]||(e[3]=a=>$(i.value))},null,8,["label","style"])):S("",!0),v(d(h),{disabled:l.value===i.value,class:"px-4 py-2 bg-white text-gray-600 rounded-lg shadow-sm border border-gray-200 hover:bg-gray-100 transition-colors disabled:opacity-50",onClick:e[4]||(e[4]=a=>$(l.value+1))},{default:q(()=>[...e[11]||(e[11]=[r("i",{class:"pi pi-chevron-left"},null,-1)])]),_:1},8,["disabled"])])):S("",!0),v(d(K))])]))}},he=N(xe,[["__scopeId","data-v-f56ea90f"]]);export{he as default};
