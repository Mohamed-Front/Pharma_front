import{_ as ue,u as ce,a as he,r,m as K,a7 as me,o as ve,d as m,e as b,h as w,g as a,t as l,j as n,i,w as d,a9 as X,b as Y,B as h,F as Z,y as ee,A as ae,C as te}from"./index-2cd76906.js";const ge={class:"grid"},_e={class:"col-12"},fe={class:"p-4 card shadow-2 border-round"},be={class:"text-2xl font-bold mb-4"},we={class:"card"},ye={class:"flex justify-between mb-3"},xe={class:"text-xl font-semibold"},ke={class:"flex gap-2"},Pe={class:"p-input-icon-left"},Ce={class:"py-4 text-center"},Te={class:"text-xl"},Ve={class:"flex py-4 justify-content-center align-items-center"},We={key:0,class:"mt-3 p-paginator p-component p-unselectable-text"},Re={class:"p-paginator-left-content"},Se={class:"p-paginator-current"},Ie={class:"p-paginator-right-content"},$e={class:"p-paginator-pages"},De=["disabled"],Ne=["disabled"],Be=["onClick"],Ee=["disabled"],Me=["disabled"],je={class:"p-paginator-rpp-options"},Fe={class:"card"},Ue={class:"flex justify-between mb-3"},Le={class:"text-xl font-semibold"},Ae={class:"flex gap-2"},Ge={class:"p-input-icon-left"},Oe={class:"py-4 text-center"},Qe={class:"text-xl"},ze={class:"flex py-4 justify-content-center align-items-center"},qe={key:0,class:"mt-3 p-paginator p-component p-unselectable-text"},He={class:"p-paginator-left-content"},Je={class:"p-paginator-current"},Ke={class:"p-paginator-right-content"},Xe={class:"p-paginator-pages"},Ye=["disabled"],Ze=["disabled"],ea=["onClick"],aa=["disabled"],ta=["disabled"],sa={class:"p-paginator-rpp-options"},oa={__name:"index",setup(la){const{t:s}=ce(),C=he(),T=r(!0),V=r(!0),$=r(null),D=r(null),N=r(null),B=r(null),j=r({}),F=r({}),W=r(""),R=r(""),U=r(0);r(localStorage.getItem("appLang")||"en");const p=r(1),E=r(0),y=r(10),g=r(0),L=r(0),A=r(0),u=r(1),M=r(0),x=r(10),_=r(0),G=r(0),O=r(0),se=()=>{var o;N.value&&((o=$.value)!=null&&o.length)?N.value.exportCSV():C.add({severity:"warn",summary:s("warning"),detail:s("report.noDataToExport"),life:3e3})},oe=()=>{var o;B.value&&((o=D.value)!=null&&o.length)?B.value.exportCSV():C.add({severity:"warn",summary:s("warning"),detail:s("report.noDataToExport"),life:3e3})},le=()=>{j.value={global:{value:null,matchMode:X.CONTAINS}}},ne=()=>{F.value={global:{value:null,matchMode:X.CONTAINS}}},S=()=>{T.value=!0,Y.get("https://pharma-service-838894765790.us-central1.run.app/api/report/admin/warehouses",{params:{page:p.value,limit:y.value,search:W.value}}).then(o=>{T.value=!1,$.value=o.data.data,E.value=o.data.pagination.total,g.value=o.data.pagination.last_page,L.value=o.data.pagination.from,A.value=o.data.pagination.to}).catch(o=>{var f,v;T.value=!1;const e=((v=(f=o.response)==null?void 0:f.data)==null?void 0:v.message)||s("report.warehousesLoadError");C.add({severity:"error",summary:s("error"),detail:e,life:3e3}),console.error("Error fetching warehouses report:",o)})},I=()=>{V.value=!0,Y.get("https://pharma-service-838894765790.us-central1.run.app/api/report/admin/pharmacies",{params:{page:u.value,limit:x.value,search:R.value}}).then(o=>{V.value=!1,D.value=o.data.data,M.value=o.data.pagination.total,_.value=o.data.pagination.last_page,G.value=o.data.pagination.from,O.value=o.data.pagination.to}).catch(o=>{var f,v;V.value=!1;const e=((v=(f=o.response)==null?void 0:f.data)==null?void 0:v.message)||s("report.pharmaciesLoadError");C.add({severity:"error",summary:s("error"),detail:e,life:3e3}),console.error("Error fetching pharmacies report:",o)})};K(W,()=>{p.value=1,S()}),K(R,()=>{u.value=1,I()});const k=o=>{o>=1&&o<=g.value&&(p.value=o,S())},re=o=>{y.value=o.value,p.value=1,S()},P=o=>{o>=1&&o<=_.value&&(u.value=o,I())},ie=o=>{x.value=o.value,u.value=1,I()};return me(()=>{le(),ne()}),ve(()=>{S(),I()}),(o,e)=>{const f=m("Toast"),v=m("InputText"),Q=m("Button"),c=m("Column"),z=m("ProgressSpinner"),q=m("DataTable"),H=m("Dropdown"),J=m("TabPanel"),de=m("TabView");return b(),w("div",ge,[a("div",_e,[a("div",fe,[a("h2",be,l(n(s)("report.title")),1),i(f),i(de,{activeIndex:U.value,"onUpdate:activeIndex":e[12]||(e[12]=t=>U.value=t)},{default:d(()=>[i(J,{header:n(s)("report.warehousesTitle")},{default:d(()=>[a("div",we,[a("div",ye,[a("h3",xe,l(n(s)("report.warehousesTitle")),1),a("div",ke,[a("span",Pe,[e[13]||(e[13]=a("i",{class:"pi pi-search"},null,-1)),i(v,{modelValue:W.value,"onUpdate:modelValue":e[0]||(e[0]=t=>W.value=t),placeholder:n(s)("report.searchWarehouses")},null,8,["modelValue","placeholder"])]),i(Q,{label:n(s)("report.export"),icon:"pi pi-upload",class:"p-export",onClick:se},null,8,["label"])])]),i(q,{ref_key:"dtWarehouses",ref:N,value:$.value,loading:T.value,"data-key":"id",paginator:!1,rows:y.value,filters:j.value,totalRecords:E.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[a("div",Ce,[e[14]||(e[14]=a("i",{class:"mb-2 text-2xl pi pi-exclamation-circle"},null,-1)),a("p",Te,l(n(s)("report.noWarehousesData")),1)])]),loading:d(()=>[a("div",Ve,[i(z,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[i(c,{field:"name",header:n(s)("warehouse.name"),sortable:!0,"header-style":"width:25%; min-width:15rem;"},{body:d(t=>[h(l(t.data.name),1)]),_:1},8,["header"]),i(c,{field:"phone",header:n(s)("warehouse.phone"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:d(t=>[h(l(t.data.phone),1)]),_:1},8,["header"]),i(c,{field:"total_sold",header:n(s)("report.totalSold"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:d(t=>[h(l(t.data.total_sold||0),1)]),_:1},8,["header"]),i(c,{field:"orders_count",header:n(s)("report.ordersCount"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:d(t=>[h(l(t.data.orders_count||0),1)]),_:1},8,["header"]),i(c,{field:"status_description",header:n(s)("warehouse.status"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:d(t=>[h(l(t.data.status_description),1)]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"]),g.value>0?(b(),w("div",We,[a("div",Re,[a("span",Se,l(n(s)("warehouse.showing"))+" "+l(L.value)+" "+l(n(s)("warehouse.to"))+" "+l(A.value)+" "+l(n(s)("warehouse.of"))+" "+l(E.value)+" "+l(n(s)("warehouse.entries")),1)]),a("div",Ie,[a("span",$e,[a("button",{class:"p-paginator-first p-paginator-element p-link",disabled:p.value===1,onClick:e[1]||(e[1]=t=>k(1))},[...e[15]||(e[15]=[a("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)])],8,De),a("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:p.value===1,onClick:e[2]||(e[2]=t=>k(p.value-1))},[...e[16]||(e[16]=[a("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)])],8,Ne),(b(!0),w(Z,null,ee(g.value,t=>(b(),w("button",{key:t,class:ae(["p-paginator-page p-paginator-element p-link",{"p-highlight":p.value===t}]),onClick:pe=>k(t)},l(t),11,Be))),128)),a("button",{class:"p-paginator-next p-paginator-element p-link",disabled:p.value===g.value,onClick:e[3]||(e[3]=t=>k(p.value+1))},[...e[17]||(e[17]=[a("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)])],8,Ee),a("button",{class:"p-paginator-last p-paginator-element p-link",disabled:p.value===g.value,onClick:e[4]||(e[4]=t=>k(g.value))},[...e[18]||(e[18]=[a("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)])],8,Me)]),a("span",je,[i(H,{modelValue:y.value,"onUpdate:modelValue":e[5]||(e[5]=t=>y.value=t),options:[5,10,20,30],onChange:re,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])):te("",!0)])]),_:1},8,["header"]),i(J,{header:n(s)("report.pharmaciesTitle")},{default:d(()=>[a("div",Fe,[a("div",Ue,[a("h3",Le,l(n(s)("report.pharmaciesTitle")),1),a("div",Ae,[a("span",Ge,[e[19]||(e[19]=a("i",{class:"pi pi-search"},null,-1)),i(v,{modelValue:R.value,"onUpdate:modelValue":e[6]||(e[6]=t=>R.value=t),placeholder:n(s)("report.searchPharmacies")},null,8,["modelValue","placeholder"])]),i(Q,{label:n(s)("report.export"),icon:"pi pi-upload",class:"p-export",onClick:oe},null,8,["label"])])]),i(q,{ref_key:"dtPharmacies",ref:B,value:D.value,loading:V.value,"data-key":"id",paginator:!1,rows:x.value,filters:F.value,totalRecords:M.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[a("div",Oe,[e[20]||(e[20]=a("i",{class:"mb-2 text-2xl pi pi-exclamation-circle"},null,-1)),a("p",Qe,l(n(s)("report.noPharmaciesData")),1)])]),loading:d(()=>[a("div",ze,[i(z,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[i(c,{field:"name",header:n(s)("pharmacy.name"),sortable:!0,"header-style":"width:25%; min-width:15rem;"},{body:d(t=>[h(l(t.data.name),1)]),_:1},8,["header"]),i(c,{field:"phone",header:n(s)("pharmacy.phone"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:d(t=>[h(l(t.data.phone),1)]),_:1},8,["header"]),i(c,{field:"total_sold",header:n(s)("report.totalSold"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:d(t=>[h(l(t.data.total_sold||0),1)]),_:1},8,["header"]),i(c,{field:"orders_count",header:n(s)("report.ordersCount"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:d(t=>[h(l(t.data.orders_count||0),1)]),_:1},8,["header"]),i(c,{field:"status_description",header:n(s)("pharmacy.status"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:d(t=>[h(l(t.data.status_description),1)]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"]),_.value>0?(b(),w("div",qe,[a("div",He,[a("span",Je,l(n(s)("pharmacy.showing"))+" "+l(G.value)+" "+l(n(s)("pharmacy.to"))+" "+l(O.value)+" "+l(n(s)("pharmacy.of"))+" "+l(M.value)+" "+l(n(s)("pharmacy.entries")),1)]),a("div",Ke,[a("span",Xe,[a("button",{class:"p-paginator-first p-paginator-element p-link",disabled:u.value===1,onClick:e[7]||(e[7]=t=>P(1))},[...e[21]||(e[21]=[a("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)])],8,Ye),a("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:u.value===1,onClick:e[8]||(e[8]=t=>P(u.value-1))},[...e[22]||(e[22]=[a("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)])],8,Ze),(b(!0),w(Z,null,ee(_.value,t=>(b(),w("button",{key:t,class:ae(["p-paginator-page p-paginator-element p-link",{"p-highlight":u.value===t}]),onClick:pe=>P(t)},l(t),11,ea))),128)),a("button",{class:"p-paginator-next p-paginator-element p-link",disabled:u.value===_.value,onClick:e[9]||(e[9]=t=>P(u.value+1))},[...e[23]||(e[23]=[a("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)])],8,aa),a("button",{class:"p-paginator-last p-paginator-element p-link",disabled:u.value===_.value,onClick:e[10]||(e[10]=t=>P(_.value))},[...e[24]||(e[24]=[a("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)])],8,ta)]),a("span",sa,[i(H,{modelValue:x.value,"onUpdate:modelValue":e[11]||(e[11]=t=>x.value=t),options:[5,10,20,30],onChange:ie,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])):te("",!0)])]),_:1},8,["header"])]),_:1},8,["activeIndex"])])])])}}},ra=ue(oa,[["__scopeId","data-v-18964d2f"]]);export{ra as default};
