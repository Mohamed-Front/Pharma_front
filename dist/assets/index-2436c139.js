import{_ as U,r as m,a as E,Y as t,a4 as z,R as M,f,g as y,m as a,t as _,z as o,j as p,q as $,F as R,k as j,i as F}from"./index-b2b8894e.js";const q={class:"permissions-container"},A={class:"card"},H={class:"header"},K={class:"subtitle"},L={class:"toolbar"},O={class:"empty-message"},S={class:"p-fluid"},Y={class:"p-field"},G={for:"permissionName"},J={class:"p-field"},Q={for:"description"},W={__name:"index",setup(X){const w=m([]),h=m([]),l=m(!0),g=m(0),v=m(!1),c=m({id:"",name:"",description:""}),D=e=>{const s={};return e.forEach(n=>{const r=n.name.match(/^(list|show|create|edit|delete)\s+(.+)/),d=r?r[2]:"other";s[d]||(s[d]={name:d.charAt(0).toUpperCase()+d.slice(1),value:d,permissions:[]}),s[d].permissions.push(n)}),Object.values(s).sort((n,r)=>n.name.localeCompare(r.name))},b=()=>{l.value=!0,$.get("api/role/all/permissions").then(e=>{w.value=e.data.data,h.value=D(e.data.data),l.value=!1}).catch(e=>{console.error("Error fetching permissions:",e),l.value=!1})},T=e=>{v.value=!0,c.value={id:e.id,name:e.name,description:e.description||""}},k=()=>{l.value=!0,$.put(`/api/role/permission/${c.value.id}`,{description:c.value.description}).then(()=>{b(),v.value=!1}).catch(e=>{console.error("Update failed:",e)}).finally(()=>{l.value=!1})};return E(()=>{b()}),(e,s)=>{const n=t("Button"),r=t("Column"),d=t("Tag"),C=t("DataTable"),x=t("TabPanel"),V=t("TabView"),B=t("InputText"),I=t("Textarea"),N=t("Dialog"),P=z("can");return M((f(),y("div",q,[a("div",A,[a("div",H,[a("h1",null,_(e.$t("permission.permissions_Management")),1),a("p",K,_(e.$t("permission.view_and_manage_all_system_permissions_grouped_by_modules")),1)]),a("div",L,[o(n,{icon:"pi pi-refresh",label:e.$t("permission.refresh"),onClick:b,loading:l.value},null,8,["label","loading"])]),o(V,{activeIndex:g.value,"onUpdate:activeIndex":s[0]||(s[0]=i=>g.value=i),class:"grouped-tabs"},{default:p(()=>[(f(!0),y(R,null,j(h.value,i=>(f(),F(x,{key:i.value,header:i.name},{default:p(()=>[o(C,{value:i.permissions,stripedRows:"",class:"p-datatable-sm",loading:l.value,dataKey:"id",scrollable:"",scrollHeight:"flex"},{empty:p(()=>[a("div",O,[s[5]||(s[5]=a("i",{class:"pi pi-database",style:{"font-size":"2rem"}},null,-1)),a("p",null,_(e.$t("permission.no_permissions_found_in_this_group")),1)])]),default:p(()=>[o(r,{field:"id",header:e.$t("permission.id"),sortable:"",style:{width:"80px"}},null,8,["header"]),o(r,{field:"name",header:e.$t("permission.name"),sortable:""},{body:p(({data:u})=>[o(d,{value:u.name,severity:u.name.includes("delete")?"danger":u.name.includes("edit")?"warning":u.name.includes("create")?"success":"info"},null,8,["value","severity"])]),_:1},8,["header"]),o(r,{header:e.$t("permission.actions"),style:{width:"100px"}},{body:p(({data:u})=>[o(n,{icon:"pi pi-cog",class:"p-button-rounded p-button-text p-button-sm",onClick:Z=>T(u)},null,8,["onClick"])]),_:1},8,["header"])]),_:1},8,["value","loading"])]),_:2},1032,["header"]))),128))]),_:1},8,["activeIndex"]),o(N,{visible:v.value,"onUpdate:visible":s[4]||(s[4]=i=>v.value=i),modal:"",header:e.$t("permission.update_Permission_Description"),style:{width:"50vw"},breakpoints:{"960px":"75vw","640px":"90vw"}},{footer:p(()=>[o(n,{label:e.$t("permission.cancel"),icon:"pi pi-times",onClick:s[3]||(s[3]=i=>v.value=!1),class:"p-button-text"},null,8,["label"]),o(n,{label:e.$t("permission.save"),icon:"pi pi-check",onClick:k,loading:l.value,autofocus:""},null,8,["label","loading"])]),default:p(()=>[a("div",S,[a("div",Y,[a("label",G,_(e.$t("permission.permission_Name")),1),o(B,{id:"permissionName",modelValue:c.value.name,"onUpdate:modelValue":s[1]||(s[1]=i=>c.value.name=i),disabled:""},null,8,["modelValue"])]),a("div",J,[a("label",Q,_(e.$t("permission.description")),1),o(I,{id:"description",modelValue:c.value.description,"onUpdate:modelValue":s[2]||(s[2]=i=>c.value.description=i),rows:"5",autoResize:"",placeholder:e.$t("permission.enter_permission_description")},null,8,["modelValue","placeholder"])])])]),_:1},8,["visible","header"])])])),[[P,"list permissions"]])}}},se=U(W,[["__scopeId","data-v-38601006"]]);export{se as default};
