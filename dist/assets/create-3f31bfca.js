import{_ as B,i as I,j as N,u as O,r as _,d as E,Z as c,$ as G,o as v,c as b,M as L,k as l,t as u,z as r,v as h,C as M,F as z,B as w,q as n,l as i}from"./index-a2c89516.js";const R={class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg"},S={class:"text-3xl font-bold text-center mb-8 text-gray-800"},A={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},P={class:"space-y-2"},Z={for:"product",class:"block text-sm font-medium text-gray-700"},H={class:"space-y-2"},J={for:"min_limit",class:"block text-sm font-medium text-gray-700"},K={class:"space-y-2"},Q={for:"max_limit",class:"block text-sm font-medium text-gray-700"},W={class:"space-y-2"},X={for:"quantity",class:"block text-sm font-medium text-gray-700"},Y={class:"space-y-2"},ee={for:"quantity_unit",class:"block text-sm font-medium text-gray-700"},te={class:"space-y-2"},le={for:"discount_type",class:"block text-sm font-medium text-gray-700"},ae={class:"space-y-2"},oe={for:"discount_value",class:"block text-sm font-medium text-gray-700"},se={class:"space-y-2"},re={for:"start_date",class:"block text-sm font-medium text-gray-700"},ue={class:"space-y-2"},ne={for:"end_date",class:"block text-sm font-medium text-gray-700"},ie={class:"space-y-2 md:col-span-2"},de={for:"description",class:"block text-sm font-medium text-gray-700"},ce={class:"pt-4 flex justify-center"},pe={key:0},fe={key:1,class:"pi pi-spinner pi-spin"},me={__name:"create",setup(_e){const q=I(),y=N(),{t:p}=O(),$=_(),m=_(!1),g=_([]),t=_({product_id:null,min_limit:null,max_limit:null,quantity:null,quantity_unit:null,discount_type:null,discount_value:null,start_date:null,end_date:null,description:""}),o=_({product_id:!1,min_limit:!1,max_limit:!1,quantity:!1,quantity_unit:!1,discount_type:!1,discount_value:!1,start_date:!1,end_date:!1}),k=async()=>{try{const a=await w.get("/api/product");g.value=a.data.data}catch(a){console.error("Error fetching products:",a),y.add({severity:"error",summary:p("error"),detail:p("error_fetching_data"),life:3e3})}},C=()=>(o.value.product_id=!t.value.product_id,o.value.min_limit=t.value.min_limit===null||t.value.min_limit==="",o.value.max_limit=t.value.max_limit===null||t.value.max_limit==="",o.value.quantity=t.value.quantity===null||t.value.quantity==="",o.value.quantity_unit=!t.value.quantity_unit,o.value.discount_type=!t.value.discount_type,o.value.discount_value=t.value.discount_value===null||t.value.discount_value==="",o.value.start_date=!t.value.start_date,o.value.end_date=!t.value.end_date,!Object.values(o.value).some(a=>a)),x=async()=>{var a,e;if(C()){m.value=!0;try{await w.post("/api/offer",t.value),q.push({name:"offers"}),y.add({severity:"success",summary:p("success"),detail:p("offer_created"),life:3e3})}catch(d){console.error("Error:",d);const f=(e=(a=d.response)==null?void 0:a.data)!=null&&e.errors?Object.values(d.response.data.errors).flat().join(", "):p("error_creating_offer");y.add({severity:"error",summary:p("error"),detail:f,life:3e3})}finally{m.value=!1}}};return E(()=>{k()}),(a,e)=>{const d=c("Dropdown"),f=c("InputNumber"),V=c("InputText"),U=c("Textarea"),D=c("Button"),F=c("Form"),T=c("Toast"),j=G("can");return v(),b(z,null,[L((v(),b("div",R,[l("h1",S,u(a.$t("offer.create_new_offer")),1),r(F,{ref_key:"form",ref:$,model:t.value,onSubmit:M(x,["prevent"]),class:"space-y-6"},{default:h(()=>[l("div",A,[l("div",P,[l("label",Z,[n(u(a.$t("offer.product"))+" ",1),e[10]||(e[10]=l("span",{class:"text-red-500"},"*",-1))]),r(d,{filter:"",id:"product",modelValue:t.value.product_id,"onUpdate:modelValue":e[0]||(e[0]=s=>t.value.product_id=s),options:g.value,optionLabel:"commercial_name",optionValue:"id",placeholder:a.$t("offer.select_product"),class:i(["w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",{"p-invalid":o.value.product_id}])},null,8,["modelValue","options","placeholder","class"])]),l("div",H,[l("label",J,[n(u(a.$t("offer.min_limit"))+" ",1),e[11]||(e[11]=l("span",{class:"text-red-500"},"*",-1))]),r(f,{id:"min_limit",modelValue:t.value.min_limit,"onUpdate:modelValue":e[1]||(e[1]=s=>t.value.min_limit=s),useGrouping:!1,placeholder:a.$t("offer.enter_min_limit"),class:i(["w-full",{"p-invalid":o.value.min_limit}]),inputClass:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue","placeholder","class"])]),l("div",K,[l("label",Q,[n(u(a.$t("offer.max_limit"))+" ",1),e[12]||(e[12]=l("span",{class:"text-red-500"},"*",-1))]),r(f,{id:"max_limit",modelValue:t.value.max_limit,"onUpdate:modelValue":e[2]||(e[2]=s=>t.value.max_limit=s),useGrouping:!1,placeholder:a.$t("offer.enter_max_limit"),class:i(["w-full",{"p-invalid":o.value.max_limit}]),inputClass:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue","placeholder","class"])]),l("div",W,[l("label",X,[n(u(a.$t("offer.quantity"))+" ",1),e[13]||(e[13]=l("span",{class:"text-red-500"},"*",-1))]),r(f,{id:"quantity",modelValue:t.value.quantity,"onUpdate:modelValue":e[3]||(e[3]=s=>t.value.quantity=s),useGrouping:!1,placeholder:a.$t("offer.enter_quantity"),class:i(["w-full",{"p-invalid":o.value.quantity}]),inputClass:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue","placeholder","class"])]),l("div",Y,[l("label",ee,[n(u(a.$t("offer.quantity_unit"))+" ",1),e[14]||(e[14]=l("span",{class:"text-red-500"},"*",-1))]),r(d,{id:"quantity_unit",modelValue:t.value.quantity_unit,"onUpdate:modelValue":e[4]||(e[4]=s=>t.value.quantity_unit=s),options:[{label:"Tablets",value:1},{label:"Capsules",value:2},{label:"Units",value:3},{label:"bottle",value:4},{label:"can",value:5}],optionLabel:"label",optionValue:"value",placeholder:a.$t("offer.select_quantity_unit"),class:i(["w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",{"p-invalid":o.value.quantity_unit}])},null,8,["modelValue","placeholder","class"])]),l("div",te,[l("label",le,[n(u(a.$t("offer.discount_type"))+" ",1),e[15]||(e[15]=l("span",{class:"text-red-500"},"*",-1))]),r(d,{filter:"",id:"discount_type",modelValue:t.value.discount_type,"onUpdate:modelValue":e[5]||(e[5]=s=>t.value.discount_type=s),options:[{label:"Percentage",value:1},{label:"Fixed Amount",value:2}],optionLabel:"label",optionValue:"value",placeholder:a.$t("offer.select_discount_type"),class:i(["w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",{"p-invalid":o.value.discount_type}])},null,8,["modelValue","placeholder","class"])]),l("div",ae,[l("label",oe,[n(u(a.$t("offer.discount_value"))+" ",1),e[16]||(e[16]=l("span",{class:"text-red-500"},"*",-1))]),r(f,{id:"discount_value",modelValue:t.value.discount_value,"onUpdate:modelValue":e[6]||(e[6]=s=>t.value.discount_value=s),mode:"decimal",minFractionDigits:2,maxFractionDigits:2,placeholder:a.$t("offer.enter_discount_value"),class:i(["w-full",{"p-invalid":o.value.discount_value}]),inputClass:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue","placeholder","class"])]),l("div",se,[l("label",re,[n(u(a.$t("offer.start_date"))+" ",1),e[17]||(e[17]=l("span",{class:"text-red-500"},"*",-1))]),r(V,{id:"start_date",modelValue:t.value.start_date,"onUpdate:modelValue":e[7]||(e[7]=s=>t.value.start_date=s),type:"date",placeholder:a.$t("offer.enter_start_date"),class:i(["w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",{"p-invalid":o.value.start_date}])},null,8,["modelValue","placeholder","class"])]),l("div",ue,[l("label",ne,[n(u(a.$t("offer.end_date"))+" ",1),e[18]||(e[18]=l("span",{class:"text-red-500"},"*",-1))]),r(V,{id:"end_date",modelValue:t.value.end_date,"onUpdate:modelValue":e[8]||(e[8]=s=>t.value.end_date=s),type:"date",placeholder:a.$t("offer.enter_end_date"),class:i(["w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",{"p-invalid":o.value.end_date}])},null,8,["modelValue","placeholder","class"])]),l("div",ie,[l("label",de,u(a.$t("offer.description")),1),r(U,{id:"description",modelValue:t.value.description,"onUpdate:modelValue":e[9]||(e[9]=s=>t.value.description=s),placeholder:a.$t("offer.enter_description"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue","placeholder"])])]),l("div",ce,[r(D,{type:"submit",label:"Create Offer",icon:"pi pi-plus",loading:m.value,class:"px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:m.value,onClick:x},{default:h(()=>[m.value?(v(),b("i",fe)):(v(),b("span",pe,u(a.$t("offer.create_offer")),1))]),_:1},8,["loading","disabled"])])]),_:1},8,["model"])])),[[j,"create offers"]]),r(T)],64)}}},be=B(me,[["__scopeId","data-v-2eaa0925"]]);export{be as default};
