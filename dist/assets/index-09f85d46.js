import{_ as Y,u as ee,i as te,j as le,r as i,w as oe,a4 as ae,d as se,Z as c,a5 as E,o as w,c as T,k as t,z as n,v as p,S as f,s as ne,t as r,m as s,F as ie,x as re,a6 as de,B as F,q as j,l as pe}from"./index-d45c326e.js";const ce={class:"grid"},ue={class:"col-12"},ve={class:"card p-4 shadow-2 border-round"},me={class:"text-2xl font-bold"},_e={class:"flex gap-2"},ge={class:"p-input-icon-left"},he={class:"card shadow-1 surface-0"},be={class:"text-center py-4"},fe={class:"text-xl"},xe={class:"flex justify-content-center align-items-center py-4"},ye={class:"p-paginator p-component p-unselectable-text mt-3"},ke={class:"p-paginator-left-content"},we={class:"p-paginator-current"},Ce={class:"p-paginator-right-content"},De={class:"p-paginator-pages"},Te=["disabled"],Ve=["disabled"],$e=["onClick"],Be=["disabled"],Pe=["disabled"],Re={class:"p-paginator-rpp-options"},Se={class:"flex align-items-center justify-content-center"},Me={__name:"index",setup(Ne){const{t:l}=ee(),V=te(),C=le(),x=i(!0);i({name:"",permissions:[]});const $=i([]),m=i(!1);i(null);const B=i(null),P=i({}),R=i(""),y=i(""),d=i(1),D=i(0),_=i(10),u=i(0),S=i(0),M=i(0),z=()=>{P.value={global:{value:null,matchMode:de.CONTAINS}}},g=()=>{x.value=!0,F.get("/api/role",{params:{page:d.value,limit:_.value,search:y.value}}).then(a=>{x.value=!1,$.value=a.data.data,D.value=a.data.pagination.total,u.value=a.data.pagination.last_page,S.value=a.data.pagination.from,M.value=a.data.pagination.to}).catch(a=>{x.value=!1,C.add({severity:"error",summary:l("error"),detail:l("role.loadError"),life:3e3}),console.error("Error fetching roles:",a)})},h=a=>{a>=1&&a<=u.value&&(d.value=a,g())},U=a=>{_.value=a.value,d.value=1,g()};oe(y,a=>{d.value=1,g()});const q=()=>{V.push({name:"roles-create"})},A=a=>{V.push({name:"roles-update",params:{id:a}})},G=a=>{R.value=a,m.value=!0},L=()=>{F.delete(`/api/role/${R.value}`).then(()=>{g(),m.value=!1,C.add({severity:"success",summary:l("success"),detail:l("role.deleteSuccess"),life:3e3})}).catch(a=>{C.add({severity:"error",summary:l("error"),detail:l("role.deleteError"),life:3e3})})},O=()=>{B.value.exportCSV()};return ae(()=>{z()}),se(()=>{g()}),(a,e)=>{const Q=c("InputText"),v=c("Button"),W=c("Toolbar"),Z=c("Toast"),k=c("Column"),H=c("ProgressSpinner"),J=c("DataTable"),K=c("Dropdown"),X=c("Dialog"),b=E("can"),N=E("tooltip");return w(),T("div",ce,[t("div",ue,[t("div",ve,[n(W,{class:"mb-4"},{start:p(()=>[t("h2",me,r(s(l)("role.roles")),1)]),end:p(()=>[t("div",_e,[t("span",ge,[e[8]||(e[8]=t("i",{class:"pi pi-search"},null,-1)),n(Q,{modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=o=>y.value=o),placeholder:a.$t("role.search")},null,8,["modelValue","placeholder"])]),f(n(v,{label:s(l)("role.export"),icon:"pi pi-upload",class:"p-export",onClick:O},null,8,["label"]),[[b,"export roles"]]),f(n(v,{label:s(l)("role.new"),icon:"pi pi-plus",class:"p-button-success",onClick:q},null,8,["label"]),[[b,"create roles"]])])]),_:1}),n(Z),t("div",he,[f((w(),ne(J,{ref_key:"dt",ref:B,value:$.value,loading:x.value,"data-key":"id",paginator:!1,rows:_.value,filters:P.value,totalRecords:D.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:p(()=>[t("div",be,[e[9]||(e[9]=t("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),t("p",fe,r(s(l)("role.noData")),1)])]),loading:p(()=>[t("div",xe,[n(H,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:p(()=>[n(k,{"selection-mode":"multiple","header-style":"width: 3rem"}),n(k,{field:"id",header:s(l)("role.iD"),sortable:!0,"header-style":"width:14%; min-width:5rem;"},{body:p(o=>[j(r(o.data.id),1)]),_:1},8,["header"]),n(k,{field:"name",header:s(l)("role.name"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:p(o=>[j(r(o.data.name),1)]),_:1},8,["header"]),n(k,{header:s(l)("actions"),"header-style":"min-width:10rem;"},{body:p(o=>[f(n(v,{icon:"pi pi-pencil",class:"p-detail",onClick:I=>A(o.data.id)},null,8,["onClick"]),[[b,"edit roles"],[N,s(l)("edit"),void 0,{top:!0}]]),f(n(v,{icon:"pi pi-trash mx-2",class:"p-delete",onClick:I=>G(o.data.id)},null,8,["onClick"]),[[b,"delete roles"],[N,s(l)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[b,"list roles"]]),t("div",ye,[t("div",ke,[t("span",we,r(s(l)("role.showing"))+" "+r(S.value)+" "+r(s(l)("role.to"))+" "+r(M.value)+" "+r(s(l)("role.of"))+" "+r(D.value)+" "+r(s(l)("role.entries")),1)]),t("div",Ce,[t("span",De,[t("button",{class:"p-paginator-first p-paginator-element p-link",disabled:d.value===1,onClick:e[1]||(e[1]=o=>h(1))},[...e[10]||(e[10]=[t("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)])],8,Te),t("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:d.value===1,onClick:e[2]||(e[2]=o=>h(d.value-1))},[...e[11]||(e[11]=[t("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)])],8,Ve),(w(!0),T(ie,null,re(u.value,o=>(w(),T("button",{key:o,class:pe(["p-paginator-page p-paginator-element p-link",{"p-highlight":o===d.value}]),onClick:I=>h(o)},r(o),11,$e))),128)),t("button",{class:"p-paginator-next p-paginator-element p-link",disabled:d.value===u.value,onClick:e[3]||(e[3]=o=>h(d.value+1))},[...e[12]||(e[12]=[t("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)])],8,Be),t("button",{class:"p-paginator-last p-paginator-element p-link",disabled:d.value===u.value,onClick:e[4]||(e[4]=o=>h(u.value))},[...e[13]||(e[13]=[t("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)])],8,Pe)]),t("span",Re,[n(K,{modelValue:_.value,"onUpdate:modelValue":e[5]||(e[5]=o=>_.value=o),options:[5,10,20,30],onChange:U,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])]),n(X,{visible:m.value,"onUpdate:visible":e[7]||(e[7]=o=>m.value=o),style:{width:"450px"},header:s(l)("role.deleteConfirmTitle"),modal:!0},{footer:p(()=>[n(v,{label:s(l)("no"),icon:"pi pi-times",class:"p-button-text",onClick:e[6]||(e[6]=o=>m.value=!1)},null,8,["label"]),n(v,{label:s(l)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:L},null,8,["label"])]),default:p(()=>[t("div",Se,[e[14]||(e[14]=t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),t("span",null,r(s(l)("role.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},Ee=Y(Me,[["__scopeId","data-v-085256db"]]);export{Ee as default};
