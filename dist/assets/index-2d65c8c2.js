import{_ as ie,u as de,i as ne,j as se,r,X as re,w as ue,d as ce,Y as _,Z as L,M as b,o as h,c as V,k as a,z as i,v as u,s as pe,t as d,m as o,F as me,x as _e,y as ve,$ as ye,B,q as C,l as he}from"./index-800b62dc.js";const fe={class:"grid"},ge={class:"col-12"},be={class:"p-4 card shadow-2 border-round"},Ve={class:"text-2xl font-bold"},qe={class:"flex gap-2"},xe={class:"p-input-icon-left"},ke={class:"card shadow-1 surface-0"},we=["src"],Ce={key:1},Ue={class:"py-4 text-center"},Ie={class:"text-xl"},Te={class:"flex py-4 justify-content-center align-items-center"},De={key:0,class:"mt-3 p-paginator p-component p-unselectable-text"},Ne={class:"p-paginator-left-content"},$e={class:"p-paginator-current"},Be={class:"p-paginator-right-content"},Se={class:"p-paginator-pages"},Me=["disabled"],Pe=["disabled"],Ee=["onClick"],Fe=["disabled"],Re=["disabled"],je={class:"p-paginator-rpp-options"},ze={class:"p-fluid"},Ae={class:"field my-1"},Ge={for:"commercial_name",class:"my-1"},Le={class:"field my-1"},Oe={for:"quantity",class:"my-1"},Qe={class:"field my-1"},We={for:"quantity_unit",class:"my-1"},Xe={class:"field my-1"},Ye={for:"price",class:"my-1"},Ze={class:"field my-1"},He={for:"price_unit",class:"my-1"},Je={class:"field my-1"},Ke={for:"category_id",class:"my-1"},et={class:"field my-1"},tt={for:"company_id",class:"my-1"},lt={class:"p-fluid"},at={class:"field my-1"},ot={for:"commercial_name_edit",class:"my-1"},it={class:"field my-1"},dt={for:"quantity_edit",class:"my-1"},nt={class:"field my-1"},st={for:"quantity_unit_edit",class:"my-1"},rt={class:"field my-1"},ut={for:"price_edit",class:"my-1"},ct={class:"field my-1"},pt={for:"price_unit_edit",class:"my-1"},mt={class:"field my-1"},_t={for:"category_id_edit",class:"my-1"},vt={class:"field my-1"},yt={for:"company_id_edit",class:"my-1"},ht={class:"flex align-items-center justify-content-center"},ft={__name:"index",setup(gt){const{t}=de(),S=ne(),q=se(),U=r(!0),M=r(""),P=r(null),x=r(!1),I=r(!1),D=r(!1);r(null);const E=r(null),F=r({}),T=r(""),n=r({commercial_name:"",quantity:"",quantity_unit:"",price:"",price_unit:"",category_id:"",company_id:""}),O=r(null),p=r(1),N=r(0),k=r(10),y=r(0),R=r(0),j=r(0),Q=()=>{E.value.exportCSV()},W=s=>{M.value=s,x.value=!0},X=()=>{B.delete(`/api/product/${M.value}`).then(()=>{f(),x.value=!1,q.add({severity:"success",summary:t("success"),detail:t("product.deleteSuccess"),life:3e3})}).catch(s=>{q.add({severity:"error",summary:t("error"),detail:t("product.deleteError"),life:3e3})})},Y=()=>{F.value={global:{value:null,matchMode:ye.CONTAINS}}},Z=()=>{n.value={commercial_name:"",quantity:"",quantity_unit:"",price:"",price_unit:"",category_id:"",company_id:""},O.value=null},H=()=>{S.push({name:"product-create"})},J=s=>{S.push({name:"product-update",params:{id:s}})},z=()=>{B.post("/api/product",n.value).then(()=>{f(),I.value=!1,q.add({severity:"success",summary:t("success"),detail:t("product.createSuccess"),life:3e3}),Z()}).catch(s=>{q.add({severity:"error",summary:t("error"),detail:t("product.createError"),life:3e3})})};re(()=>{Y()});const f=()=>{U.value=!0,B.get("/api/product",{params:{page:p.value,limit:k.value,search:T.value}}).then(s=>{U.value=!1,P.value=s.data.data,N.value=s.data.pagination.total,y.value=s.data.pagination.last_page,R.value=s.data.pagination.from,j.value=s.data.pagination.to}).catch(s=>{U.value=!1,q.add({severity:"error",summary:t("error"),detail:t("product.loadError"),life:3e3}),console.error("Error fetching data:",s)})};ue(T,()=>{p.value=1,f()});const w=s=>{s>=1&&s<=y.value&&(p.value=s,f())},K=s=>{k.value=s.value,p.value=1,f()};return ce(()=>{f()}),(s,l)=>{const c=_("InputText"),m=_("Button"),ee=_("Toolbar"),te=_("Toast"),v=_("Column"),le=_("ProgressSpinner"),ae=_("DataTable"),oe=_("Dropdown"),$=_("Dialog"),g=L("can"),A=L("tooltip");return b((h(),V("div",fe,[a("div",ge,[a("div",be,[i(ee,{class:"mb-4"},{start:u(()=>[a("h2",Ve,d(o(t)("product.managementTitle")),1)]),end:u(()=>[a("div",qe,[a("span",xe,[l[26]||(l[26]=a("i",{class:"pi pi-search"},null,-1)),i(c,{modelValue:T.value,"onUpdate:modelValue":l[0]||(l[0]=e=>T.value=e),placeholder:o(t)("product.search")},null,8,["modelValue","placeholder"])]),b(i(m,{label:o(t)("product.export"),icon:"pi pi-upload",class:"p-export",onClick:Q},null,8,["label"]),[[g,"create products"]]),b(i(m,{label:o(t)("product.new"),icon:"pi pi-plus",class:"p-button-success",onClick:H},null,8,["label"]),[[g,"create products"]])])]),_:1}),i(te),a("div",ke,[b((h(),pe(ae,{ref_key:"dt",ref:E,value:P.value,loading:U.value,"data-key":"id",paginator:!1,rows:k.value,filters:F.value,totalRecords:N.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:u(()=>[a("div",Ue,[l[27]||(l[27]=a("i",{class:"mb-2 text-2xl pi pi-exclamation-circle"},null,-1)),a("p",Ie,d(o(t)("product.noData")),1)])]),loading:u(()=>[a("div",Te,[i(le,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:u(()=>[i(v,{"selection-mode":"multiple","header-style":"width: 3rem"}),i(v,{field:"commercial_name",header:o(t)("product.commercialName"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:u(e=>[C(d(e.data.commercial_name),1)]),_:1},8,["header"]),i(v,{field:"media[0].url",header:o(t)("product.image"),"header-style":"width:10%; min-width:8rem;"},{body:u(e=>[e.data.media&&e.data.media[0]&&e.data.media[0].url?(h(),V("img",{key:0,src:e.data.media[0].url,alt:"Product Image",style:{width:"50px",height:"auto"}},null,8,we)):(h(),V("span",Ce,d(o(t)("product.noImage")),1))]),_:1},8,["header"]),i(v,{field:"quantity",header:o(t)("product.quantity"),sortable:!0,"header-style":"width:10%; min-width:8rem;"},{body:u(e=>[C(d(e.data.quantity)+" "+d(e.data.quantity_unit),1)]),_:1},8,["header"]),i(v,{field:"price",header:o(t)("product.price"),sortable:!0,"header-style":"width:10%; min-width:8rem;"},{body:u(e=>[C(d(e.data.price)+" "+d(e.data.price_unit),1)]),_:1},8,["header"]),i(v,{field:"category.name_en",header:o(t)("product.category"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:u(e=>[C(d(e.data.category.name_en),1)]),_:1},8,["header"]),i(v,{field:"company.name",header:o(t)("product.company"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:u(e=>[C(d(e.data.company.name),1)]),_:1},8,["header"]),i(v,{header:o(t)("product.actions"),"header-style":"min-width:10rem;"},{body:u(e=>[b(i(m,{icon:"pi pi-pencil",class:"p-detail",onClick:G=>J(e.data.id)},null,8,["onClick"]),[[g,"edit products"],[A,o(t)("edit"),void 0,{top:!0}]]),b(i(m,{icon:"pi pi-trash mx-2",class:"p-delete",onClick:G=>W(e.data.id)},null,8,["onClick"]),[[g,"delete products"],[A,o(t)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[g,"list products"]]),y.value>0?(h(),V("div",De,[a("div",Ne,[a("span",$e,d(o(t)("product.showing"))+" "+d(R.value)+" "+d(o(t)("product.to"))+" "+d(j.value)+" "+d(o(t)("product.of"))+" "+d(N.value)+" "+d(o(t)("product.entries")),1)]),a("div",Be,[a("span",Se,[a("button",{class:"p-paginator-first p-paginator-element p-link",disabled:p.value===1,onClick:l[1]||(l[1]=e=>w(1))},[...l[28]||(l[28]=[a("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)])],8,Me),a("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:p.value===1,onClick:l[2]||(l[2]=e=>w(p.value-1))},[...l[29]||(l[29]=[a("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)])],8,Pe),(h(!0),V(me,null,_e(y.value,e=>(h(),V("button",{key:e,class:he(["p-paginator-page p-paginator-element p-link",{"p-highlight":p.value===e}]),onClick:G=>w(e)},d(e),11,Ee))),128)),a("button",{class:"p-paginator-next p-paginator-element p-link",disabled:p.value===y.value,onClick:l[3]||(l[3]=e=>w(p.value+1))},[...l[30]||(l[30]=[a("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)])],8,Fe),a("button",{class:"p-paginator-last p-paginator-element p-link",disabled:p.value===y.value,onClick:l[4]||(l[4]=e=>w(y.value))},[...l[31]||(l[31]=[a("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)])],8,Re)]),a("span",je,[i(oe,{modelValue:k.value,"onUpdate:modelValue":l[5]||(l[5]=e=>k.value=e),options:[5,10,20,30],onChange:K,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])):ve("",!0)]),i($,{visible:I.value,"onUpdate:visible":l[14]||(l[14]=e=>I.value=e),style:{width:"450px"},header:o(t)("product.createTitle"),modal:!0},{footer:u(()=>[i(m,{label:o(t)("cancel"),icon:"pi pi-times",class:"p-button-text",onClick:l[13]||(l[13]=e=>I.value=!1)},null,8,["label"]),i(m,{label:o(t)("save"),icon:"pi pi-check",class:"p-button-text p-button-success",onClick:z},null,8,["label"])]),default:u(()=>[a("div",ze,[a("div",Ae,[a("p",Ge,d(o(t)("product.commercialName")),1),i(c,{id:"commercial_name",modelValue:n.value.commercial_name,"onUpdate:modelValue":l[6]||(l[6]=e=>n.value.commercial_name=e),required:"",placeholder:o(t)("product.commercialName")},null,8,["modelValue","placeholder"])]),a("div",Le,[a("p",Oe,d(o(t)("product.quantity")),1),i(c,{id:"quantity",modelValue:n.value.quantity,"onUpdate:modelValue":l[7]||(l[7]=e=>n.value.quantity=e),type:"number",required:"",placeholder:o(t)("product.quantity")},null,8,["modelValue","placeholder"])]),a("div",Qe,[a("p",We,d(o(t)("product.quantityUnit")),1),i(c,{id:"quantity_unit",modelValue:n.value.quantity_unit,"onUpdate:modelValue":l[8]||(l[8]=e=>n.value.quantity_unit=e),required:"",placeholder:o(t)("product.quantityUnit")},null,8,["modelValue","placeholder"])]),a("div",Xe,[a("p",Ye,d(o(t)("product.price")),1),i(c,{id:"price",modelValue:n.value.price,"onUpdate:modelValue":l[9]||(l[9]=e=>n.value.price=e),type:"number",required:"",placeholder:o(t)("product.price")},null,8,["modelValue","placeholder"])]),a("div",Ze,[a("p",He,d(o(t)("product.priceUnit")),1),i(c,{id:"price_unit",modelValue:n.value.price_unit,"onUpdate:modelValue":l[10]||(l[10]=e=>n.value.price_unit=e),required:"",placeholder:o(t)("product.priceUnit")},null,8,["modelValue","placeholder"])]),a("div",Je,[a("p",Ke,d(o(t)("product.categoryId")),1),i(c,{id:"category_id",modelValue:n.value.category_id,"onUpdate:modelValue":l[11]||(l[11]=e=>n.value.category_id=e),type:"number",required:"",placeholder:o(t)("product.categoryId")},null,8,["modelValue","placeholder"])]),a("div",et,[a("p",tt,d(o(t)("product.companyId")),1),i(c,{id:"company_id",modelValue:n.value.company_id,"onUpdate:modelValue":l[12]||(l[12]=e=>n.value.company_id=e),type:"number",required:"",placeholder:o(t)("product.companyId")},null,8,["modelValue","placeholder"])])])]),_:1},8,["visible","header"]),i($,{visible:D.value,"onUpdate:visible":l[23]||(l[23]=e=>D.value=e),style:{width:"450px"},header:o(t)("product.editTitle"),modal:!0},{footer:u(()=>[i(m,{label:o(t)("cancel"),icon:"pi pi-times",class:"p-button-text",onClick:l[22]||(l[22]=e=>D.value=!1)},null,8,["label"]),i(m,{label:o(t)("save"),icon:"pi pi-check",class:"p-button-text p-button-success",onClick:z},null,8,["label"])]),default:u(()=>[a("div",lt,[a("div",at,[a("p",ot,d(o(t)("product.commercialName")),1),i(c,{id:"commercial_name_edit",modelValue:n.value.commercial_name,"onUpdate:modelValue":l[15]||(l[15]=e=>n.value.commercial_name=e),required:"",placeholder:o(t)("product.commercialName")},null,8,["modelValue","placeholder"])]),a("div",it,[a("p",dt,d(o(t)("product.quantity")),1),i(c,{id:"quantity_edit",modelValue:n.value.quantity,"onUpdate:modelValue":l[16]||(l[16]=e=>n.value.quantity=e),type:"number",required:"",placeholder:o(t)("product.quantity")},null,8,["modelValue","placeholder"])]),a("div",nt,[a("p",st,d(o(t)("product.quantityUnit")),1),i(c,{id:"quantity_unit_edit",modelValue:n.value.quantity_unit,"onUpdate:modelValue":l[17]||(l[17]=e=>n.value.quantity_unit=e),required:"",placeholder:o(t)("product.quantityUnit")},null,8,["modelValue","placeholder"])]),a("div",rt,[a("p",ut,d(o(t)("product.price")),1),i(c,{id:"price_edit",modelValue:n.value.price,"onUpdate:modelValue":l[18]||(l[18]=e=>n.value.price=e),type:"number",required:"",placeholder:o(t)("product.price")},null,8,["modelValue","placeholder"])]),a("div",ct,[a("p",pt,d(o(t)("product.priceUnit")),1),i(c,{id:"price_unit_edit",modelValue:n.value.price_unit,"onUpdate:modelValue":l[19]||(l[19]=e=>n.value.price_unit=e),required:"",placeholder:o(t)("product.priceUnit")},null,8,["modelValue","placeholder"])]),a("div",mt,[a("p",_t,d(o(t)("product.categoryId")),1),i(c,{id:"category_id_edit",modelValue:n.value.category_id,"onUpdate:modelValue":l[20]||(l[20]=e=>n.value.category_id=e),type:"number",required:"",placeholder:o(t)("product.categoryId")},null,8,["modelValue","placeholder"])]),a("div",vt,[a("p",yt,d(o(t)("product.companyId")),1),i(c,{id:"company_id_edit",modelValue:n.value.company_id,"onUpdate:modelValue":l[21]||(l[21]=e=>n.value.company_id=e),type:"number",required:"",placeholder:o(t)("product.companyId")},null,8,["modelValue","placeholder"])])])]),_:1},8,["visible","header"]),i($,{visible:x.value,"onUpdate:visible":l[25]||(l[25]=e=>x.value=e),style:{width:"450px"},header:o(t)("product.deleteConfirmTitle"),modal:!0},{footer:u(()=>[i(m,{label:o(t)("no"),icon:"pi pi-times",class:"p-button-text",onClick:l[24]||(l[24]=e=>x.value=!1)},null,8,["label"]),i(m,{label:o(t)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:X},null,8,["label"])]),default:u(()=>[a("div",ht,[l[32]||(l[32]=a("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),a("span",null,d(o(t)("product.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])),[[g,"list products"]])}}},Vt=ie(ft,[["__scopeId","data-v-a30dbad5"]]);export{Vt as default};
