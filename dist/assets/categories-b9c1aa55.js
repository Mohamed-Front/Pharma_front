import{_ as q,g as I,o as s,c as o,z as x,m as i,E as A,F as $,x as S,s as R,G as B,D as h,u as U,j as W,r as y,w as G,d as H,k as r,v as T,y as k,B as E,H as Q,t as p,A as J}from"./index-a2c89516.js";const K={key:0,class:"flex justify-center mb-10"},X={key:1,class:"flex flex-wrap justify-center gap-3 mb-10"},Y={__name:"Categories",props:{categories:{type:Array,required:!0},selectedCategory:{type:String,required:!0},loading:{type:Boolean,required:!0}},emits:["selectCategory"],setup(F,{emit:l}){const g=F,b=l,_=I(()=>localStorage.getItem("appLang")||"ar"),m=n=>_.value==="en"?n.name_en:n.name_ar;return(n,d)=>g.loading?(s(),o("div",K,[x(i(A),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])):(s(),o("div",X,[(s(!0),o($,null,S(g.categories,u=>(s(),R(i(h),{key:u.id,label:m(u),style:B(g.selectedCategory===u.id?{padding:"0.5rem 1.25rem",borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease",backgroundColor:"#059669",color:"#ffffff",":hover":{backgroundColor:"#047857"}}:{padding:"0.5rem 1.25rem",borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease",backgroundColor:"#ffffff !important",color:"#000000",border:"1px solid #e5e7eb",":hover":{backgroundColor:"#f3f4f6"}}),onClick:f=>b("selectCategory",u.id)},null,8,["label","style","onClick"]))),128))]))}},Z=q(Y,[["__scopeId","data-v-dba9c9b2"]]);const ee={class:"bg-gray-50"},ae={class:"py-10 px-4 max-w-7xl m-auto"},te={class:"flex justify-center mb-8"},re={class:"relative w-full max-w-lg"},se={key:0,class:"flex justify-center mb-10"},le={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-10"},oe={class:"flex justify-between"},ne={class:"text-lg md:text-xl font-bold text-gray-900"},ie={class:"text-sm text-gray-600"},de=["src"],ce={class:"flex items-center gap-2 my-3"},ue={class:"text-sm text-gray-700"},ge={class:"text-sm text-gray-700"},fe={class:"flex flex-wrap gap-2 mb-4"},pe={class:"flex items-center justify-between w-full mt-auto mb-4"},me={class:"flex flex-wrap gap-2"},ve={key:0,class:"bg-gray-100 text-gray-600 text-xs font-semibold px-2 py-1 rounded-full"},ye={class:"text-lg md:text-xl font-bold text-green-600"},xe={key:2,class:"flex justify-center items-center gap-2"},be={key:0,class:"px-4 py-2 text-gray-500"},_e={__name:"categories",setup(F){const{t:l}=U(),g=W(),b=y([]),_=y([]),m=y("all"),n=y(1),d=y(1),u=y(!1),f=y(""),w=y({}),V=[],N=[];I(()=>{if(m.value==="all")return"";const t=b.value.find(a=>a.id===m.value),e=localStorage.getItem("appLang")||"ar";return t?e==="en"?t.name_en:t.name_ar:""});const O=async()=>{var t;u.value=!0;try{const e=await E.get("/api/pharmacy-home/get/categories");e.data.success&&((t=e.data.data)==null?void 0:t.length)>0?b.value=[{id:"all",name_ar:"الكل",name_en:"All"},...e.data.data]:(b.value=V,g.add({severity:"warn",summary:l("warning"),detail:l("error.noCategories"),life:3e3}))}catch(e){b.value=V,g.add({severity:"error",summary:l("error"),detail:l("error.fetchCategories"),life:3e3}),console.error("Error fetching categories:",e)}finally{u.value=!1}},j=async(t=1)=>{var e;u.value=!0;try{const a=m.value==="all"?"":`category_id=${m.value}&`,C=f.value?`search=${encodeURIComponent(f.value)}&`:"",v=await E.get(`/api/pharmacy-home/get/products?${a}${C}page=${t}`);v.data.success&&((e=v.data.data)==null?void 0:e.length)>0?(_.value=v.data.data.map(c=>({...c,discount:c.active_offers.length>0?c.active_offers.map(L=>({...L,display:L.discount_type===1?`${L.discount_value}% OFF`:`$${L.discount_value} OFF`})):[]})),d.value=v.data.pagination.last_page||1,n.value=v.data.pagination.current_page||1):(_.value=N,d.value=1,n.value=1,g.add({severity:"warn",summary:l("warning"),detail:l("error.noProducts"),life:3e3}))}catch(a){_.value=N,d.value=1,n.value=1,g.add({severity:"error",summary:l("error"),detail:l("error.fetchProducts"),life:3e3}),console.error("Error fetching products:",a)}finally{u.value=!1}},z=async t=>{w.value[t]=!0;try{const e=await E.post("/api/cart/add/item",{product_id:t,quantity:1});if(e.data.success)g.add({severity:"success",summary:l("success"),detail:l("cart.addSuccess"),life:3e3});else throw new Error(e.data.message||l("error.addToCart"))}catch(e){g.add({severity:"error",summary:l("error"),detail:e.message||l("error.addToCart"),life:3e3}),console.error("Error adding to cart:",e)}finally{w.value[t]=!1}},D=I(()=>f.value?_.value.filter(t=>t.commercial_name.toLowerCase().includes(f.value.toLowerCase())||t.scientific_structure.some(e=>e.toLowerCase().includes(f.value.toLowerCase()))):_.value),M=t=>{m.value=t,n.value=1,j(1)},P=t=>{t>=1&&t<=d.value&&(n.value=t,j(t))};return G(f,()=>{n.value=1,j(1)}),H(()=>{O(),j()}),(t,e)=>(s(),o("div",ee,[r("div",ae,[r("div",te,[r("div",re,[x(i(Q),{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=a=>f.value=a),placeholder:i(l)("search.placeholder"),class:"w-full p-3 pr-12 text-gray-700 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"},null,8,["modelValue","placeholder"]),e[5]||(e[5]=r("i",{class:"pi pi-search absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500"},null,-1))])]),x(Z,{categories:b.value,selectedCategory:m.value,loading:u.value,onSelectCategory:M},null,8,["categories","selectedCategory","loading"]),u.value?(s(),o("div",se,[x(i(A),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])):(s(),o("div",le,[(s(!0),o($,null,S(D.value,a=>{var C,v;return s(),o("div",{key:a.id,class:"bg-white rounded-xl shadow-md p-4 relative overflow-hidden flex flex-col"},[r("div",oe,[r("div",null,[e[6]||(e[6]=r("div",{class:"flex justify-between items-start mb-2"},[r("span",{class:"bg-green-500 text-white text-xs font-semibold px-2 py-1 rounded-full"},"أدوية فقط")],-1)),r("div",null,[r("h3",ne,p(a.commercial_name),1),r("p",ie,p(a.pharmaceutical_form||"N/A"),1)])]),r("div",null,[(v=(C=a.media)==null?void 0:C[0])!=null&&v.url?(s(),o("img",{key:0,src:a.media[0].url,alt:"Product Image",class:"w-16 h-16 object-cover rounded-lg mr-3",onError:e[1]||(e[1]=(...c)=>t.handleImageError&&t.handleImageError(...c))},null,40,de)):k("",!0)])]),r("div",ce,[e[7]||(e[7]=r("i",{class:"pi pi-map-marker text-green-600 text-lg"},null,-1)),r("span",ue,p(a.warehouse.name),1),e[8]||(e[8]=r("i",{class:"pi pi-building text-green-600 text-lg"},null,-1)),r("span",ge,p(a.warehouse.address),1)]),r("div",fe,[(s(!0),o($,null,S(a.scientific_structure,c=>(s(),o("span",{key:c,class:"bg-gray-200 text-gray-800 text-xs font-medium px-3 py-1 rounded-full"},p(c),1))),128))]),r("div",pe,[r("div",me,[(s(!0),o($,null,S(a.discount,c=>(s(),o("span",{key:c.id,class:"bg-green-100 text-green-800 text-xs font-semibold px-2 py-1 rounded-full"},p(c.display)+" ("+p(c.description.slice(0,25))+") ",1))),128)),a.discount.length?k("",!0):(s(),o("span",ve,p(i(l)("noOffers")),1))]),r("span",ye,p(a.price+"$"),1)]),x(i(h),{label:w.value[a.id]?i(l)("cart.adding"):i(l)("cart.addToCart"),icon:w.value[a.id]?"pi pi-spin pi-spinner ml-2":"pi pi-cart-plus ml-2",class:"bg-green-600 hover:bg-green-700 text-white font-bold py-3 w-full rounded-lg transition-colors flex items-center justify-center",disabled:w.value[a.id],onClick:c=>z(a.id)},null,8,["label","icon","disabled","onClick"])])}),128))])),!u.value&&d.value>1?(s(),o("div",xe,[x(i(h),{disabled:n.value===1,class:"px-4 py-2 bg-white text-gray-600 rounded-lg shadow-sm border border-gray-200 hover:bg-gray-100 transition-colors disabled:opacity-50",onClick:e[2]||(e[2]=a=>P(n.value-1))},{default:T(()=>[...e[9]||(e[9]=[r("i",{class:"pi pi-chevron-right"},null,-1)])]),_:1},8,["disabled"]),(s(!0),o($,null,S(Math.min(d.value,5),a=>(s(),R(i(h),{key:a,label:a.toString(),style:B(n.value===a?{padding:"0.5rem 1rem",borderRadius:"0.5rem",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",backgroundColor:"#059669",color:"#ffffff",":hover":{backgroundColor:"#047857"}}:{padding:"0.5rem 1rem",borderRadius:"0.5rem",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",backgroundColor:"#ffffff !important",color:"#1f2937",border:"1px solid #e5e7eb",":hover":{backgroundColor:"#f3f4f6"}}),onClick:C=>P(a)},null,8,["label","style","onClick"]))),128)),d.value>5?(s(),o("span",be,"...")):k("",!0),d.value>5?(s(),R(i(h),{key:1,label:d.value.toString(),style:B(n.value===d.value?{padding:"0.5rem 1rem",borderRadius:"0.5rem",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",backgroundColor:"#059669",color:"#ffffff",":hover":{backgroundColor:"#047857"}}:{padding:"0.5rem 1rem",borderRadius:"0.5rem",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",backgroundColor:"#ffffff",color:"#1f2937",border:"1px solid #e5e7eb",":hover":{backgroundColor:"#f3f4f6"}}),onClick:e[3]||(e[3]=a=>P(d.value))},null,8,["label","style"])):k("",!0),x(i(h),{disabled:n.value===d.value,class:"px-4 py-2 bg-white text-gray-600 rounded-lg shadow-sm border border-gray-200 hover:bg-gray-100 transition-colors disabled:opacity-50",onClick:e[4]||(e[4]=a=>P(n.value+1))},{default:T(()=>[...e[10]||(e[10]=[r("i",{class:"pi pi-chevron-left"},null,-1)])]),_:1},8,["disabled"])])):k("",!0),x(i(J))])]))}},we=q(_e,[["__scopeId","data-v-85a1a293"]]);export{we as default};
