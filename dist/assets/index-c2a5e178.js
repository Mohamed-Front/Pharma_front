import{_ as oe,u as ne,i as re,j as ce,r as n,X as ue,w as de,d as pe,Y as v,Z as ve,o as $,c as E,k as i,z as a,v as u,t as r,m as s,F as me,x as fe,y as _e,$ as ge,B as k,q as O,M as Q,l as w}from"./index-800b62dc.js";const be={class:"grid"},he={class:"col-12"},ye={class:"p-4 card shadow-2 border-round"},xe={class:"text-2xl font-bold"},Se={class:"flex gap-2"},ke={class:"p-input-icon-left"},we={class:"card shadow-1 surface-0"},Ce={class:"py-4 text-center"},Ve={class:"text-xl"},Te={class:"flex py-4 justify-content-center align-items-center"},De={key:0,class:"mt-3 p-paginator p-component p-unselectable-text"},$e={class:"p-paginator-left-content"},Ee={class:"p-paginator-current"},Ue={class:"p-paginator-right-content"},Pe={class:"p-paginator-pages"},Be=["disabled"],Fe=["disabled"],Me=["onClick"],Ne=["disabled"],Ie=["disabled"],Re={class:"p-paginator-rpp-options"},qe={class:"p-fluid"},je={class:"field my-1"},ze={for:"name",class:"my-1"},Ae={class:"field my-1"},Ge={for:"description",class:"my-1"},Le={class:"p-fluid"},Oe={class:"field my-1"},Qe={for:"name_edit",class:"my-1"},We={class:"field my-1"},Xe={for:"description_edit",class:"my-1"},Ye={class:"flex align-items-center justify-content-center"},Ze={__name:"index",setup(He){const{t}=ne();re();const f=ce(),C=n(!0),M=n(""),N=n(null),b=n(!1),h=n(!1),y=n(!1);n(null);const I=n(null),R=n({}),V=n(""),c=n({name:"",description:""}),T=n(null),m=n({name:!1,description:!1}),d=n(1),U=n(0),x=n(10),_=n(0),q=n(0),j=n(0),W=()=>{I.value.exportCSV()},X=o=>{M.value=o,b.value=!0},Y=()=>{k.delete(`/api/scientific-structure/${M.value}`).then(()=>{g(),b.value=!1,f.add({severity:"success",summary:t("success"),detail:t("scientificStructure.deleteSuccess"),life:3e3})}).catch(o=>{f.add({severity:"error",summary:t("error"),detail:t("scientificStructure.deleteError"),life:3e3})})},Z=()=>{R.value={global:{value:null,matchMode:ge.CONTAINS}}},P=()=>{c.value={name:"",description:""},T.value=null,m.value={name:!1,description:!1}},H=()=>(m.value.name=!c.value.name,m.value.description=!c.value.description,!m.value.name&&!m.value.description),J=()=>{P(),h.value=!0},K=o=>{T.value=o,k.get(`/api/scientific-structure/${o}`).then(e=>{c.value={name:e.data.data.name,description:e.data.data.description},y.value=!0}).catch(e=>{f.add({severity:"error",summary:t("error"),detail:t("scientificStructure.loadError"),life:3e3}),console.error("Error fetching scientific structure:",e)})},z=()=>{H()&&(T.value?k.put(`/api/scientific-structure/${T.value}`,c.value).then(()=>{g(),y.value=!1,f.add({severity:"success",summary:t("success"),detail:t("scientificStructure.updateSuccess"),life:3e3}),P()}).catch(o=>{f.add({severity:"error",summary:t("error"),detail:t("scientificStructure.updateError"),life:3e3})}):k.post("/api/scientific-structure",c.value).then(()=>{g(),h.value=!1,f.add({severity:"success",summary:t("success"),detail:t("scientificStructure.createSuccess"),life:3e3}),P()}).catch(o=>{f.add({severity:"error",summary:t("error"),detail:t("scientificStructure.createError"),life:3e3})}))};ue(()=>{Z()});const g=()=>{C.value=!0,k.get("/api/scientific-structure",{params:{page:d.value,limit:x.value,search:V.value}}).then(o=>{C.value=!1,N.value=o.data.data,U.value=o.data.pagination.total,_.value=o.data.pagination.last_page,q.value=o.data.pagination.from,j.value=o.data.pagination.to}).catch(o=>{C.value=!1,f.add({severity:"error",summary:t("error"),detail:t("scientificStructure.loadError"),life:3e3}),console.error("Error fetching data:",o)})};de(V,()=>{d.value=1,g()});const S=o=>{o>=1&&o<=_.value&&(d.value=o,g())},ee=o=>{x.value=o.value,d.value=1,g()};return pe(()=>{g()}),(o,e)=>{const B=v("InputText"),p=v("Button"),te=v("Toolbar"),ie=v("Toast"),D=v("Column"),le=v("ProgressSpinner"),se=v("DataTable"),ae=v("Dropdown"),A=v("Textarea"),F=v("Dialog"),G=ve("tooltip");return $(),E("div",be,[i("div",he,[i("div",ye,[a(te,{class:"mb-4"},{start:u(()=>[i("h2",xe,r(s(t)("scientificStructures")),1)]),end:u(()=>[i("div",Se,[i("span",ke,[e[16]||(e[16]=i("i",{class:"pi pi-search"},null,-1)),a(B,{modelValue:V.value,"onUpdate:modelValue":e[0]||(e[0]=l=>V.value=l),placeholder:s(t)("scientificStructure.search")},null,8,["modelValue","placeholder"])]),a(p,{label:s(t)("scientificStructure.export"),icon:"pi pi-upload",class:"p-export",onClick:W},null,8,["label"]),a(p,{label:s(t)("scientificStructure.new"),icon:"pi pi-plus",class:"p-button-success",onClick:J},null,8,["label"])])]),_:1}),a(ie),i("div",we,[a(se,{ref_key:"dt",ref:I,value:N.value,loading:C.value,"data-key":"id",paginator:!1,rows:x.value,filters:R.value,totalRecords:U.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:u(()=>[i("div",Ce,[e[17]||(e[17]=i("i",{class:"mb-2 text-2xl pi pi-exclamation-circle"},null,-1)),i("p",Ve,r(s(t)("scientificStructure.noData")),1)])]),loading:u(()=>[i("div",Te,[a(le,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:u(()=>[a(D,{"selection-mode":"multiple","header-style":"width: 3rem"}),a(D,{field:"name",header:s(t)("scientificStructure.name"),sortable:!0,"header-style":"width:20%; min-width:12rem;"},{body:u(l=>[O(r(l.data.name),1)]),_:1},8,["header"]),a(D,{field:"description",header:s(t)("scientificStructure.description"),sortable:!0,"header-style":"width:20%; min-width:12rem;"},{body:u(l=>[O(r(l.data.description),1)]),_:1},8,["header"]),a(D,{header:s(t)("actions"),"header-style":"min-width:10rem;"},{body:u(l=>[Q(a(p,{icon:"pi pi-pencil",class:"p-detail",onClick:L=>K(l.data.id)},null,8,["onClick"]),[[G,s(t)("edit"),void 0,{top:!0}]]),Q(a(p,{icon:"pi pi-trash mx-2",class:"p-delete",onClick:L=>X(l.data.id)},null,8,["onClick"]),[[G,s(t)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"]),_.value>0?($(),E("div",De,[i("div",$e,[i("span",Ee,r(s(t)("showing"))+" "+r(q.value)+" "+r(s(t)("to"))+" "+r(j.value)+" "+r(s(t)("of"))+" "+r(U.value)+" "+r(s(t)("entries")),1)]),i("div",Ue,[i("span",Pe,[i("button",{class:"p-paginator-first p-paginator-element p-link",disabled:d.value===1,onClick:e[1]||(e[1]=l=>S(1))},[...e[18]||(e[18]=[i("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)])],8,Be),i("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:d.value===1,onClick:e[2]||(e[2]=l=>S(d.value-1))},[...e[19]||(e[19]=[i("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)])],8,Fe),($(!0),E(me,null,fe(_.value,l=>($(),E("button",{key:l,class:w(["p-paginator-page p-paginator-element p-link",{"p-highlight":d.value===l}]),onClick:L=>S(l)},r(l),11,Me))),128)),i("button",{class:"p-paginator-next p-paginator-element p-link",disabled:d.value===_.value,onClick:e[3]||(e[3]=l=>S(d.value+1))},[...e[20]||(e[20]=[i("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)])],8,Ne),i("button",{class:"p-paginator-last p-paginator-element p-link",disabled:d.value===_.value,onClick:e[4]||(e[4]=l=>S(_.value))},[...e[21]||(e[21]=[i("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)])],8,Ie)]),i("span",Re,[a(ae,{modelValue:x.value,"onUpdate:modelValue":e[5]||(e[5]=l=>x.value=l),options:[5,10,20,30],onChange:ee,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])):_e("",!0)]),a(F,{visible:h.value,"onUpdate:visible":e[9]||(e[9]=l=>h.value=l),style:{width:"450px"},header:s(t)("scientificStructure.createTitle"),modal:!0},{footer:u(()=>[a(p,{label:s(t)("cancel"),icon:"pi pi-times",class:"p-button-text",onClick:e[8]||(e[8]=l=>h.value=!1)},null,8,["label"]),a(p,{label:s(t)("save"),icon:"pi pi-check",class:"p-button-text p-button-success",onClick:z},null,8,["label"])]),default:u(()=>[i("div",qe,[i("div",je,[i("p",ze,r(s(t)("scientificStructure.name")),1),a(B,{id:"name",modelValue:c.value.name,"onUpdate:modelValue":e[6]||(e[6]=l=>c.value.name=l),required:"",placeholder:s(t)("scientificStructure.name"),class:w({"p-invalid":m.value.name})},null,8,["modelValue","placeholder","class"])]),i("div",Ae,[i("p",Ge,r(s(t)("scientificStructure.description")),1),a(A,{id:"description",modelValue:c.value.description,"onUpdate:modelValue":e[7]||(e[7]=l=>c.value.description=l),required:"",placeholder:s(t)("scientificStructure.description"),rows:"4",class:w({"p-invalid":m.value.description})},null,8,["modelValue","placeholder","class"])])])]),_:1},8,["visible","header"]),a(F,{visible:y.value,"onUpdate:visible":e[13]||(e[13]=l=>y.value=l),style:{width:"450px"},header:s(t)("scientificStructure.editTitle"),modal:!0},{footer:u(()=>[a(p,{label:s(t)("cancel"),icon:"pi pi-times",class:"p-button-text",onClick:e[12]||(e[12]=l=>y.value=!1)},null,8,["label"]),a(p,{label:s(t)("save"),icon:"pi pi-check",class:"p-button-text p-button-success",onClick:z},null,8,["label"])]),default:u(()=>[i("div",Le,[i("div",Oe,[i("p",Qe,r(s(t)("scientificStructure.name")),1),a(B,{id:"name_edit",modelValue:c.value.name,"onUpdate:modelValue":e[10]||(e[10]=l=>c.value.name=l),required:"",placeholder:s(t)("scientificStructure.name"),class:w({"p-invalid":m.value.name})},null,8,["modelValue","placeholder","class"])]),i("div",We,[i("p",Xe,r(s(t)("scientificStructure.description")),1),a(A,{id:"description_edit",modelValue:c.value.description,"onUpdate:modelValue":e[11]||(e[11]=l=>c.value.description=l),required:"",placeholder:s(t)("scientificStructure.description"),rows:"4",class:w({"p-invalid":m.value.description})},null,8,["modelValue","placeholder","class"])])])]),_:1},8,["visible","header"]),a(F,{visible:b.value,"onUpdate:visible":e[15]||(e[15]=l=>b.value=l),style:{width:"450px"},header:s(t)("scientificStructure.deleteConfirmTitle"),modal:!0},{footer:u(()=>[a(p,{label:s(t)("no"),icon:"pi pi-times",class:"p-button-text",onClick:e[14]||(e[14]=l=>b.value=!1)},null,8,["label"]),a(p,{label:s(t)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:Y},null,8,["label"])]),default:u(()=>[i("div",Ye,[e[22]||(e[22]=i("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),i("span",null,r(s(t)("scientificStructure.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},Ke=oe(Ze,[["__scopeId","data-v-86ee3a89"]]);export{Ke as default};
