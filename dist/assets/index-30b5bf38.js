import{_ as ie,u as re,i as de,j as ce,r as d,X as ue,w as pe,d as me,Y as _,Z as W,M as k,o as b,c as w,k as l,z as s,v as p,s as ve,t as r,m as o,F as ge,x as _e,y as ye,$ as fe,B as E,q as N,l as y}from"./index-abebc0c4.js";const he={class:"grid"},be={class:"col-12"},xe={class:"p-4 card shadow-2 border-round"},Ce={class:"text-2xl font-bold"},ke={class:"flex gap-2"},we={class:"p-input-icon-left"},Ve={class:"card shadow-1 surface-0"},De=["src"],Te={key:1},$e={class:"py-4 text-center"},Ue={class:"text-xl"},Ee={class:"flex py-4 justify-content-center align-items-center"},Se={key:0,class:"mt-3 p-paginator p-component p-unselectable-text"},Be={class:"p-paginator-left-content"},Fe={class:"p-paginator-current"},Ie={class:"p-paginator-right-content"},qe={class:"p-paginator-pages"},Me=["disabled"],Ne=["disabled"],Pe=["onClick"],Re=["disabled"],je=["disabled"],ze={class:"p-paginator-rpp-options"},Ae={class:"p-fluid"},Ge={class:"field my-1"},Le={for:"name_en",class:"my-1"},Oe={class:"field my-1"},Qe={for:"name_ar",class:"my-1"},We={class:"field my-1"},Xe={for:"date",class:"my-1"},Ye={class:"field my-1"},Ze={for:"category_image",class:"my-1"},He={class:"p-fluid"},Je={class:"field my-1"},Ke={for:"name_en_edit",class:"my-1"},ea={class:"field my-1"},aa={for:"name_ar_edit",class:"my-1"},ta={class:"field my-1"},la={for:"date_edit",class:"my-1"},oa={class:"field my-1"},sa={for:"category_image_edit",class:"my-1"},na={class:"flex align-items-center justify-content-center"},ia={__name:"index",setup(ra){const{t:a}=re();de();const g=ce(),S=d(!0),P=d(""),R=d(null),V=d(!1),D=d(!1),T=d(!1);d(null);const j=d(null),z=d({}),B=d(""),i=d({name_en:"",name_ar:"",date:"",category_image:null}),F=d(null),c=d({name_en:!1,name_ar:!1,date:!1,category_image:!1}),v=d(1),I=d(0),$=d(10),f=d(0),A=d(0),G=d(0),X=()=>{j.value.exportCSV()},Y=n=>{P.value=n,V.value=!0},Z=()=>{E.delete(`/api/category/${P.value}`).then(()=>{h(),V.value=!1,g.add({severity:"success",summary:a("success"),detail:a("category.deleteSuccess"),life:3e3})}).catch(n=>{g.add({severity:"error",summary:a("error"),detail:a("category.deleteError"),life:3e3})})},H=()=>{z.value={global:{value:null,matchMode:fe.CONTAINS}}},q=()=>{i.value={name_en:"",name_ar:"",date:"",category_image:null},F.value=null,c.value={name_en:!1,name_ar:!1,date:!1,category_image:!1}},J=()=>(c.value.name_en=!i.value.name_en,c.value.name_ar=!i.value.name_ar,c.value.date=!i.value.date,c.value.category_image=!1,!c.value.name_en&&!c.value.name_ar&&!c.value.date),K=()=>{q(),D.value=!0},ee=n=>{F.value=n,E.get(`/api/category/${n}`).then(e=>{i.value={name_en:e.data.data.name_en,name_ar:e.data.data.name_ar,date:e.data.data.date,category_image:null},T.value=!0}).catch(e=>{g.add({severity:"error",summary:a("error"),detail:a("category.loadError"),life:3e3}),console.error("Error fetching category:",e)})},L=()=>{if(!J()){g.add({severity:"error",summary:a("error"),detail:a("category.validationError"),life:3e3});return}const n=new FormData;n.append("name_en",i.value.name_en),n.append("name_ar",i.value.name_ar),n.append("date",i.value.date),i.value.category_image&&n.append("category_image",i.value.category_image),F.value?(n.append("_method","post"),E.post(`/api/category/${F.value}`,n,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{h(),T.value=!1,g.add({severity:"success",summary:a("success"),detail:a("category.updateSuccess"),life:3e3}),q()}).catch(e=>{var m,u;g.add({severity:"error",summary:a("error"),detail:((u=(m=e.response)==null?void 0:m.data)==null?void 0:u.message)||a("category.updateError"),life:3e3})})):E.post("/api/category",n,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{h(),D.value=!1,g.add({severity:"success",summary:a("success"),detail:a("category.createSuccess"),life:3e3}),q()}).catch(e=>{var m,u;g.add({severity:"error",summary:a("error"),detail:((u=(m=e.response)==null?void 0:m.data)==null?void 0:u.message)||a("category.createError"),life:3e3})})};ue(()=>{H()});const h=()=>{S.value=!0,E.get("/api/category",{params:{page:v.value,limit:$.value,search:B.value}}).then(n=>{S.value=!1,R.value=n.data.data,I.value=n.data.pagination.total,f.value=n.data.pagination.last_page,A.value=n.data.pagination.from,G.value=n.data.pagination.to}).catch(n=>{S.value=!1,g.add({severity:"error",summary:a("error"),detail:a("category.loadError"),life:3e3}),console.error("Error fetching data:",n)})};pe(B,()=>{v.value=1,h()});const U=n=>{n>=1&&n<=f.value&&(v.value=n,h())},ae=n=>{$.value=n.value,v.value=1,h()};return me(()=>{h()}),(n,e)=>{const m=_("InputText"),u=_("Button"),te=_("Toolbar"),le=_("Toast"),x=_("Column"),oe=_("ProgressSpinner"),se=_("DataTable"),ne=_("Dropdown"),M=_("Dialog"),C=W("can"),O=W("tooltip");return k((b(),w("div",he,[l("div",be,[l("div",xe,[s(te,{class:"mb-4"},{start:p(()=>[l("h2",Ce,r(o(a)("categories")),1)]),end:p(()=>[l("div",ke,[l("span",we,[e[20]||(e[20]=l("i",{class:"pi pi-search"},null,-1)),s(m,{modelValue:B.value,"onUpdate:modelValue":e[0]||(e[0]=t=>B.value=t),placeholder:o(a)("category.search")},null,8,["modelValue","placeholder"])]),k(s(u,{label:o(a)("category.export"),icon:"pi pi-upload",class:"p-export",onClick:X},null,8,["label"]),[[C,"create categories"]]),k(s(u,{label:o(a)("category.new"),icon:"pi pi-plus",class:"p-button-success",onClick:K},null,8,["label"]),[[C,"create categories"]])])]),_:1}),s(le),l("div",Ve,[k((b(),ve(se,{ref_key:"dt",ref:j,value:R.value,loading:S.value,"data-key":"id",paginator:!1,rows:$.value,filters:z.value,totalRecords:I.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:p(()=>[l("div",$e,[e[21]||(e[21]=l("i",{class:"mb-2 text-2xl pi pi-exclamation-circle"},null,-1)),l("p",Ue,r(o(a)("category.noData")),1)])]),loading:p(()=>[l("div",Ee,[s(oe,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:p(()=>[s(x,{"selection-mode":"multiple","header-style":"width: 3rem"}),s(x,{field:"name_en",header:o(a)("category.name_en"),sortable:!0,"header-style":"width:20%; min-width:12rem;"},{body:p(t=>[N(r(t.data.name_en),1)]),_:1},8,["header"]),s(x,{field:"name_ar",header:o(a)("category.name_ar"),sortable:!0,"header-style":"width:20%; min-width:12rem;"},{body:p(t=>[N(r(t.data.name_ar),1)]),_:1},8,["header"]),s(x,{field:"date",header:o(a)("category.date"),sortable:!0,"header-style":"width:20%; min-width:12rem;"},{body:p(t=>[N(r(t.data.date),1)]),_:1},8,["header"]),s(x,{field:"category_image",header:o(a)("category.image"),"header-style":"width:10%; min-width:8rem;"},{body:p(t=>[t.data.media?(b(),w("img",{key:0,src:t.data.media[0].url,alt:"Category Image",style:{width:"50px",height:"auto"}},null,8,De)):(b(),w("span",Te,r(o(a)("category.noImage")),1))]),_:1},8,["header"]),s(x,{header:o(a)("actions"),"header-style":"min-width:10rem;"},{body:p(t=>[k(s(u,{icon:"pi pi-pencil",class:"p-detail",onClick:Q=>ee(t.data.id)},null,8,["onClick"]),[[C,"edit categories"],[O,o(a)("edit"),void 0,{top:!0}]]),k(s(u,{icon:"pi pi-trash mx-2",class:"p-delete",onClick:Q=>Y(t.data.id)},null,8,["onClick"]),[[C,"delete categories"],[O,o(a)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[C,"list categories"]]),f.value>0?(b(),w("div",Se,[l("div",Be,[l("span",Fe,r(o(a)("showing"))+" "+r(A.value)+" "+r(o(a)("to"))+" "+r(G.value)+" "+r(o(a)("of"))+" "+r(I.value)+" "+r(o(a)("entries")),1)]),l("div",Ie,[l("span",qe,[l("button",{class:"p-paginator-first p-paginator-element p-link",disabled:v.value===1,onClick:e[1]||(e[1]=t=>U(1))},[...e[22]||(e[22]=[l("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)])],8,Me),l("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:v.value===1,onClick:e[2]||(e[2]=t=>U(v.value-1))},[...e[23]||(e[23]=[l("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)])],8,Ne),(b(!0),w(ge,null,_e(f.value,t=>(b(),w("button",{key:t,class:y(["p-paginator-page p-paginator-element p-link",{"p-highlight":v.value===t}]),onClick:Q=>U(t)},r(t),11,Pe))),128)),l("button",{class:"p-paginator-next p-paginator-element p-link",disabled:v.value===f.value,onClick:e[3]||(e[3]=t=>U(v.value+1))},[...e[24]||(e[24]=[l("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)])],8,Re),l("button",{class:"p-paginator-last p-paginator-element p-link",disabled:v.value===f.value,onClick:e[4]||(e[4]=t=>U(f.value))},[...e[25]||(e[25]=[l("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)])],8,je)]),l("span",ze,[s(ne,{modelValue:$.value,"onUpdate:modelValue":e[5]||(e[5]=t=>$.value=t),options:[5,10,20,30],onChange:ae,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])):ye("",!0)]),s(M,{visible:D.value,"onUpdate:visible":e[11]||(e[11]=t=>D.value=t),style:{width:"450px"},header:o(a)("category.createTitle"),modal:!0},{footer:p(()=>[s(u,{label:o(a)("cancel"),icon:"pi pi-times",class:"p-button-text",onClick:e[10]||(e[10]=t=>D.value=!1)},null,8,["label"]),s(u,{label:o(a)("save"),icon:"pi pi-check",class:"p-button-text p-button-success",onClick:L},null,8,["label"])]),default:p(()=>[l("div",Ae,[l("div",Ge,[l("p",Le,r(o(a)("category.name_en")),1),s(m,{id:"name_en",modelValue:i.value.name_en,"onUpdate:modelValue":e[6]||(e[6]=t=>i.value.name_en=t),required:"",placeholder:o(a)("category.name_en"),class:y({"p-invalid":c.value.name_en})},null,8,["modelValue","placeholder","class"])]),l("div",Oe,[l("p",Qe,r(o(a)("category.name_ar")),1),s(m,{id:"name_ar",modelValue:i.value.name_ar,"onUpdate:modelValue":e[7]||(e[7]=t=>i.value.name_ar=t),required:"",placeholder:o(a)("category.name_ar"),class:y({"p-invalid":c.value.name_ar})},null,8,["modelValue","placeholder","class"])]),l("div",We,[l("p",Xe,r(o(a)("category.date")),1),s(m,{id:"date",modelValue:i.value.date,"onUpdate:modelValue":e[8]||(e[8]=t=>i.value.date=t),type:"date",required:"",placeholder:o(a)("category.date"),class:y({"p-invalid":c.value.date})},null,8,["modelValue","placeholder","class"])]),l("div",Ye,[l("p",Ze,r(o(a)("category.image")),1),l("input",{id:"category_image",type:"file",accept:"image/*",onChange:e[9]||(e[9]=t=>i.value.category_image=t.target.files[0]),class:y({"p-invalid":c.value.category_image})},null,34)])])]),_:1},8,["visible","header"]),s(M,{visible:T.value,"onUpdate:visible":e[17]||(e[17]=t=>T.value=t),style:{width:"450px"},header:o(a)("category.editTitle"),modal:!0},{footer:p(()=>[s(u,{label:o(a)("cancel"),icon:"pi pi-times",class:"p-button-text",onClick:e[16]||(e[16]=t=>T.value=!1)},null,8,["label"]),s(u,{label:o(a)("save"),icon:"pi pi-check",class:"p-button-text p-button-success",onClick:L},null,8,["label"])]),default:p(()=>[l("div",He,[l("div",Je,[l("p",Ke,r(o(a)("category.name_en")),1),s(m,{id:"name_en_edit",modelValue:i.value.name_en,"onUpdate:modelValue":e[12]||(e[12]=t=>i.value.name_en=t),required:"",placeholder:o(a)("category.name_en"),class:y({"p-invalid":c.value.name_en})},null,8,["modelValue","placeholder","class"])]),l("div",ea,[l("p",aa,r(o(a)("category.name_ar")),1),s(m,{id:"name_ar_edit",modelValue:i.value.name_ar,"onUpdate:modelValue":e[13]||(e[13]=t=>i.value.name_ar=t),required:"",placeholder:o(a)("category.name_ar"),class:y({"p-invalid":c.value.name_ar})},null,8,["modelValue","placeholder","class"])]),l("div",ta,[l("p",la,r(o(a)("category.date")),1),s(m,{id:"date_edit",modelValue:i.value.date,"onUpdate:modelValue":e[14]||(e[14]=t=>i.value.date=t),type:"date",required:"",placeholder:o(a)("category.date"),class:y({"p-invalid":c.value.date})},null,8,["modelValue","placeholder","class"])]),l("div",oa,[l("p",sa,r(o(a)("category.image")),1),l("input",{id:"category_image_edit",type:"file",accept:"image/*",onChange:e[15]||(e[15]=t=>i.value.category_image=t.target.files[0]),class:y({"p-invalid":c.value.category_image})},null,34)])])]),_:1},8,["visible","header"]),s(M,{visible:V.value,"onUpdate:visible":e[19]||(e[19]=t=>V.value=t),style:{width:"450px"},header:o(a)("category.deleteConfirmTitle"),modal:!0},{footer:p(()=>[s(u,{label:o(a)("no"),icon:"pi pi-times",class:"p-button-text",onClick:e[18]||(e[18]=t=>V.value=!1)},null,8,["label"]),s(u,{label:o(a)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:Z},null,8,["label"])]),default:p(()=>[l("div",na,[e[26]||(e[26]=l("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),l("span",null,r(o(a)("category.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])),[[C,"list categories"]])}}},ca=ie(ia,[["__scopeId","data-v-48b8d329"]]);export{ca as default};
