import{_ as ce,u as me,j as ve,r,w as H,Y as ge,d as he,Z as c,o as b,c as y,k as t,t as l,m as n,z as i,v as d,a0 as J,B as K,q as g,F as X,x as ee,l as te,y as ae}from"./index-a2c89516.js";const _e={class:"grid"},fe={class:"col-12"},be={class:"p-4 card shadow-2 border-round"},ye={class:"text-2xl font-bold mb-4"},xe={class:"card"},Pe={class:"flex justify-between mb-3"},we={class:"text-xl font-semibold"},ke={class:"flex gap-2"},Ce={class:"p-input-icon-left"},Te={class:"py-4 text-center"},Ve={class:"text-xl"},Re={class:"flex py-4 justify-content-center align-items-center"},Ie={key:0,class:"mt-3 p-paginator p-component p-unselectable-text"},Se={class:"p-paginator-left-content"},$e={class:"p-paginator-current"},De={class:"p-paginator-right-content"},Ne={class:"p-paginator-pages"},Be=["disabled"],Ee=["disabled"],Me=["onClick"],je=["disabled"],Fe=["disabled"],Le={class:"p-paginator-rpp-options"},Ue={class:"card"},ze={class:"flex justify-between mb-3"},Ae={class:"text-xl font-semibold"},Ge={class:"flex gap-2"},Oe={class:"p-input-icon-left"},Qe={class:"py-4 text-center"},We={class:"text-xl"},qe={class:"flex py-4 justify-content-center align-items-center"},Ye={key:0,class:"mt-3 p-paginator p-component p-unselectable-text"},Ze={class:"p-paginator-left-content"},He={class:"p-paginator-current"},Je={class:"p-paginator-right-content"},Ke={class:"p-paginator-pages"},Xe=["disabled"],et=["disabled"],tt=["onClick"],at=["disabled"],ot=["disabled"],st={class:"p-paginator-rpp-options"},lt={__name:"index",setup(nt){const{t:s}=me(),C=ve(),T=r(!0),V=r(!0),D=r(null),N=r(null),B=r(null),E=r(null),F=r({}),L=r({}),R=r(""),I=r(""),U=r(0),oe=r(localStorage.getItem("appLang")||"en"),p=r(1),M=r(0),x=r(10),h=r(0),z=r(0),A=r(0),u=r(1),j=r(0),P=r(10),_=r(0),G=r(0),O=r(0),se=()=>{var o;B.value&&((o=D.value)!=null&&o.length)?B.value.exportCSV():C.add({severity:"warn",summary:s("warning"),detail:s("report.noDataToExport"),life:3e3})},le=()=>{var o;E.value&&((o=N.value)!=null&&o.length)?E.value.exportCSV():C.add({severity:"warn",summary:s("warning"),detail:s("report.noDataToExport"),life:3e3})},ne=()=>{F.value={global:{value:null,matchMode:J.CONTAINS}}},re=()=>{L.value={global:{value:null,matchMode:J.CONTAINS}}},S=()=>{T.value=!0,K.get("/api/report/warehouse/products",{params:{page:p.value,limit:x.value,search:R.value}}).then(o=>{T.value=!1,D.value=o.data.data,M.value=o.data.pagination.total,h.value=o.data.pagination.last_page,z.value=o.data.pagination.from,A.value=o.data.pagination.to}).catch(o=>{var f,m;T.value=!1;const e=((m=(f=o.response)==null?void 0:f.data)==null?void 0:m.message)||s("report.productsLoadError");C.add({severity:"error",summary:s("error"),detail:e,life:3e3}),console.error("Error fetching products report:",o)})},$=()=>{V.value=!0,K.get("/api/report/warehouse/pharmacies",{params:{page:u.value,limit:P.value,search:I.value}}).then(o=>{V.value=!1,N.value=o.data.data,j.value=o.data.pagination.total,_.value=o.data.pagination.last_page,G.value=o.data.pagination.from,O.value=o.data.pagination.to}).catch(o=>{var f,m;V.value=!1;const e=((m=(f=o.response)==null?void 0:f.data)==null?void 0:m.message)||s("report.pharmaciesLoadError");C.add({severity:"error",summary:s("error"),detail:e,life:3e3}),console.error("Error fetching pharmacies report:",o)})};H(R,()=>{p.value=1,S()}),H(I,()=>{u.value=1,$()});const w=o=>{o>=1&&o<=h.value&&(p.value=o,S())},ie=o=>{x.value=o.value,p.value=1,S()},k=o=>{o>=1&&o<=_.value&&(u.value=o,$())},de=o=>{P.value=o.value,u.value=1,$()};return ge(()=>{ne(),re()}),he(()=>{S(),$()}),(o,e)=>{const f=c("Toast"),m=c("InputText"),Q=c("Button"),v=c("Column"),W=c("ProgressSpinner"),q=c("DataTable"),Y=c("Dropdown"),Z=c("TabPanel"),pe=c("TabView");return b(),y("div",_e,[t("div",fe,[t("div",be,[t("h2",ye,l(n(s)("report.title")),1),i(f),i(pe,{activeIndex:U.value,"onUpdate:activeIndex":e[12]||(e[12]=a=>U.value=a)},{default:d(()=>[i(Z,{header:n(s)("report.productsTitle")},{default:d(()=>[t("div",xe,[t("div",Pe,[t("h3",we,l(n(s)("report.productsTitle")),1),t("div",ke,[t("span",Ce,[e[13]||(e[13]=t("i",{class:"pi pi-search"},null,-1)),i(m,{modelValue:R.value,"onUpdate:modelValue":e[0]||(e[0]=a=>R.value=a),placeholder:n(s)("report.searchProducts")},null,8,["modelValue","placeholder"])]),i(Q,{label:n(s)("report.export"),icon:"pi pi-upload",class:"p-export",onClick:se},null,8,["label"])])]),i(q,{ref_key:"dtProducts",ref:B,value:D.value,loading:T.value,"data-key":"id",paginator:!1,rows:x.value,filters:F.value,totalRecords:M.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[t("div",Te,[e[14]||(e[14]=t("i",{class:"mb-2 text-2xl pi pi-exclamation-circle"},null,-1)),t("p",Ve,l(n(s)("report.noProductsData")),1)])]),loading:d(()=>[t("div",Re,[i(W,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[i(v,{field:"commercial_name",header:n(s)("product.commercialName"),sortable:!0,"header-style":"width:20%; min-width:12rem;"},{body:d(a=>[g(l(a.data.commercial_name),1)]),_:1},8,["header"]),i(v,{field:"category_id",header:n(s)("report.categoryId"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:d(a=>[g(l(oe.value==="en"?a.data.category.name_en:a.data.category.name_ar),1)]),_:1},8,["header"]),i(v,{field:"company_id",header:n(s)("report.companyId"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:d(a=>[g(l(a.data.company.name),1)]),_:1},8,["header"]),i(v,{field:"total_sold",header:n(s)("report.totalSold"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:d(a=>[g(l(a.data.total_sold||0),1)]),_:1},8,["header"]),i(v,{field:"orders_count",header:n(s)("report.ordersCount"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:d(a=>[g(l(a.data.orders_count||0),1)]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"]),h.value>0?(b(),y("div",Ie,[t("div",Se,[t("span",$e,l(n(s)("product.showing"))+" "+l(z.value)+" "+l(n(s)("product.to"))+" "+l(A.value)+" "+l(n(s)("product.of"))+" "+l(M.value)+" "+l(n(s)("product.entries")),1)]),t("div",De,[t("span",Ne,[t("button",{class:"p-paginator-first p-paginator-element p-link",disabled:p.value===1,onClick:e[1]||(e[1]=a=>w(1))},[...e[15]||(e[15]=[t("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)])],8,Be),t("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:p.value===1,onClick:e[2]||(e[2]=a=>w(p.value-1))},[...e[16]||(e[16]=[t("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)])],8,Ee),(b(!0),y(X,null,ee(h.value,a=>(b(),y("button",{key:a,class:te(["p-paginator-page p-paginator-element p-link",{"p-highlight":p.value===a}]),onClick:ue=>w(a)},l(a),11,Me))),128)),t("button",{class:"p-paginator-next p-paginator-element p-link",disabled:p.value===h.value,onClick:e[3]||(e[3]=a=>w(p.value+1))},[...e[17]||(e[17]=[t("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)])],8,je),t("button",{class:"p-paginator-last p-paginator-element p-link",disabled:p.value===h.value,onClick:e[4]||(e[4]=a=>w(h.value))},[...e[18]||(e[18]=[t("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)])],8,Fe)]),t("span",Le,[i(Y,{modelValue:x.value,"onUpdate:modelValue":e[5]||(e[5]=a=>x.value=a),options:[5,10,20,30],onChange:ie,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])):ae("",!0)])]),_:1},8,["header"]),i(Z,{header:n(s)("report.pharmaciesTitle")},{default:d(()=>[t("div",Ue,[t("div",ze,[t("h3",Ae,l(n(s)("report.pharmaciesTitle")),1),t("div",Ge,[t("span",Oe,[e[19]||(e[19]=t("i",{class:"pi pi-search"},null,-1)),i(m,{modelValue:I.value,"onUpdate:modelValue":e[6]||(e[6]=a=>I.value=a),placeholder:n(s)("report.searchPharmacies")},null,8,["modelValue","placeholder"])]),i(Q,{label:n(s)("report.export"),icon:"pi pi-upload",class:"p-export",onClick:le},null,8,["label"])])]),i(q,{ref_key:"dtPharmacies",ref:E,value:N.value,loading:V.value,"data-key":"id",paginator:!1,rows:P.value,filters:L.value,totalRecords:j.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[t("div",Qe,[e[20]||(e[20]=t("i",{class:"mb-2 text-2xl pi pi-exclamation-circle"},null,-1)),t("p",We,l(n(s)("report.noPharmaciesData")),1)])]),loading:d(()=>[t("div",qe,[i(W,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[i(v,{field:"name",header:n(s)("pharmacy.name"),sortable:!0,"header-style":"width:25%; min-width:15rem;"},{body:d(a=>[g(l(a.data.name),1)]),_:1},8,["header"]),i(v,{field:"total_amount",header:n(s)("report.totalSold"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:d(a=>[g(l(a.data.total_amount||0),1)]),_:1},8,["header"]),i(v,{field:"total_orders",header:n(s)("report.ordersCount"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:d(a=>[g(l(a.data.total_orders||0),1)]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"]),_.value>0?(b(),y("div",Ye,[t("div",Ze,[t("span",He,l(n(s)("product.showing"))+" "+l(G.value)+" "+l(n(s)("product.to"))+" "+l(O.value)+" "+l(n(s)("product.of"))+" "+l(j.value)+" "+l(n(s)("product.entries")),1)]),t("div",Je,[t("span",Ke,[t("button",{class:"p-paginator-first p-paginator-element p-link",disabled:u.value===1,onClick:e[7]||(e[7]=a=>k(1))},[...e[21]||(e[21]=[t("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)])],8,Xe),t("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:u.value===1,onClick:e[8]||(e[8]=a=>k(u.value-1))},[...e[22]||(e[22]=[t("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)])],8,et),(b(!0),y(X,null,ee(_.value,a=>(b(),y("button",{key:a,class:te(["p-paginator-page p-paginator-element p-link",{"p-highlight":u.value===a}]),onClick:ue=>k(a)},l(a),11,tt))),128)),t("button",{class:"p-paginator-next p-paginator-element p-link",disabled:u.value===_.value,onClick:e[9]||(e[9]=a=>k(u.value+1))},[...e[23]||(e[23]=[t("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)])],8,at),t("button",{class:"p-paginator-last p-paginator-element p-link",disabled:u.value===_.value,onClick:e[10]||(e[10]=a=>k(_.value))},[...e[24]||(e[24]=[t("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)])],8,ot)]),t("span",st,[i(Y,{modelValue:P.value,"onUpdate:modelValue":e[11]||(e[11]=a=>P.value=a),options:[5,10,20,30],onChange:de,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])):ae("",!0)])]),_:1},8,["header"])]),_:1},8,["activeIndex"])])])])}}},it=ce(lt,[["__scopeId","data-v-63e9243a"]]);export{it as default};
