import{_ as N,s as M,r,a as P,a4 as T,R as p,f as a,g as n,m as e,t,x as B,S,F as m,k as h,y as f,B as q,q as y,a6 as g}from"./index-b2b8894e.js";const U={class:"permission-manager"},E={class:"controls"},F={class:"name-input"},R={for:"roleName"},I=["placeholder"],L={key:0,class:"loading"},W={key:0,class:"table-view"},j=["onClick","disabled"],z=["id","value"],A={key:1,class:"card-view"},G={class:"permission-items"},H={class:"permission-info"},J=["id","value"],K=["for"],O=["onClick","disabled"],Q={key:2,class:"selection-summary"},X={class:"id-chips"},Y=["disabled"],Z={class:"modal-content"},x={__name:"create",setup(ee){const w=M(),_=r([]),b=r(!0),i=r([]),d=r(""),c=r(!1),$=r(""),v=r(!1),C=()=>{y.get("api/role/all/permissions").then(l=>{_.value=l.data.data,b.value=!1})},k=l=>{$.value=l||"No description available",c.value=!0},D=()=>{if(!d.value){alert("Please enter a role name");return}const l={name:d.value,permissions:i.value};y.post("/api/role",l).then(o=>{w.push({name:"roles"})}).catch(o=>{console.error("Error:",o)})};return P(()=>{C()}),(l,o)=>{const V=T("can");return p((a(),n("div",U,[e("h1",null,t(l.$t("role.role_Permissions_Manager")),1),e("div",E,[e("div",F,[e("label",R,[B(t(l.$t("role.role_Name")),1),o[6]||(o[6]=e("span",{class:"required"},"*",-1))]),p(e("input",{type:"text",id:"roleName","onUpdate:modelValue":o[0]||(o[0]=s=>d.value=s),placeholder:l.$t("role.enter_role_name"),required:""},null,8,I),[[S,d.value]])]),e("button",{onClick:o[1]||(o[1]=s=>v.value=!v.value),class:"view-toggle"},t(v.value?l.$t("role.switchToCardView"):l.$t("role.switchToTableView")),1)]),b.value?(a(),n("div",L,t(l.$t("role.loading.permissions")),1)):(a(),n(m,{key:1},[v.value?(a(),n("div",W,[e("table",null,[e("thead",null,[e("tr",null,[e("th",null,t(l.$t("role.permission")),1),e("th",null,t(l.$t("role.description")),1),e("th",null,t(l.$t("role.select")),1)])]),e("tbody",null,[(a(!0),n(m,null,h(_.value,s=>(a(),n("tr",{key:s.id},[e("td",null,t(s.name),1),e("td",null,[e("button",{onClick:u=>k(s.description),class:"description-btn",disabled:!s.description},t(s.description?l.$t("role.view"):l.$t("role.none")),9,j)]),e("td",null,[p(e("input",{type:"checkbox",id:`permission-${s.id}-table`,value:s.id,"onUpdate:modelValue":o[2]||(o[2]=u=>i.value=u)},null,8,z),[[g,i.value]])])]))),128))])])])):(a(),n("div",A,[e("div",G,[(a(!0),n(m,null,h(_.value,s=>(a(),n("div",{key:s.id,class:"permission-item"},[e("div",H,[p(e("input",{type:"checkbox",id:`permission-${s.id}`,value:s.id,"onUpdate:modelValue":o[3]||(o[3]=u=>i.value=u)},null,8,J),[[g,i.value]]),e("label",{for:`permission-${s.id}`},t(s.name),9,K)]),e("button",{onClick:u=>k(s.description),class:"description-btn",disabled:!s.description},t(s.description?l.$t("role.viewDescription"):l.$t("role.noDescription")),9,O)]))),128))])]))],64)),i.value.length>0?(a(),n("div",Q,[e("h3",null,t(l.$t("role.selectedPermissions")),1),e("p",null,t(l.$t("role.totalSelected"))+": "+t(i.value.length),1),e("div",X,[(a(!0),n(m,null,h(i.value,s=>(a(),n("span",{key:s,class:"id-chip"},t(s),1))),128))])])):f("",!0),e("button",{onClick:D,class:"submit-btn",disabled:i.value.length===0||!d.value},t(l.$t("role.createWithPermissions")),9,Y),c.value?(a(),n("div",{key:3,class:"modal-overlay",onClick:o[5]||(o[5]=q(s=>c.value=!1,["self"]))},[e("div",Z,[e("h3",null,t(l.$t("role.permission_Description")),1),e("p",null,t($.value),1),e("button",{onClick:o[4]||(o[4]=s=>c.value=!1),class:"close-modal"},t(l.$t("role.close")),1)])])):f("",!0)])),[[V,"create roles"]])}}},se=N(x,[["__scopeId","data-v-3321c89f"]]);export{se as default};
