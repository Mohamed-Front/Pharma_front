import{_ as ee,u as te,i as ae,j as oe,r as i,a4 as se,w as le,d as ne,Z as u,a5 as F,S as _,o as k,c as T,k as o,z as n,v as d,s as ie,t as r,m as s,F as re,x as de,y as ce,a6 as pe,B as L,q as h,al as ue,l as fe}from"./index-d45c326e.js";const me={class:"grid"},ve={class:"col-12"},_e={class:"p-4 card shadow-2 border-round"},he={class:"text-2xl font-bold"},ge={class:"flex gap-2"},be={class:"p-input-icon-left"},ye={class:"card shadow-1 surface-0"},xe={class:"py-4 text-center"},we={class:"text-xl"},ke={class:"flex py-4 justify-content-center align-items-center"},Ce={key:0,class:"mt-3 p-paginator p-component p-unselectable-text"},De={class:"p-paginator-left-content"},Te={class:"p-paginator-current"},Se={class:"p-paginator-right-content"},Ve={class:"p-paginator-pages"},$e=["disabled"],Be=["disabled"],Ne=["onClick"],Pe=["disabled"],Me=["disabled"],Re={class:"p-paginator-rpp-options"},Ee={class:"flex align-items-center justify-content-center"},Ie={__name:"index",setup(Fe){const{t:a}=te(),$=ae(),S=oe(),C=i(!0),B=i(""),N=i(null),g=i(!1);i(!1),i(!1),i(null);const P=i(null),M=i({}),D=i("");i({description:"",limit:"",start_date:"",end_date:"",status:""}),i(null);const c=i(1),V=i(0),b=i(10),f=i(0),R=i(0),E=i(0),j=l=>{switch(l.toLowerCase()){case"upcoming":return"info";case"active":return"success";case"expired":return"danger";default:return"secondary"}},z=()=>{P.value.exportCSV()},U=l=>{B.value=l,g.value=!0},O=()=>{L.delete(`/api/offer/${B.value}`).then(()=>{y(),g.value=!1,S.add({severity:"success",summary:a("success"),detail:a("offer.deleteSuccess"),life:3e3})}).catch(l=>{S.add({severity:"error",summary:a("error"),detail:a("offer.deleteError"),life:3e3})})},q=()=>{M.value={global:{value:null,matchMode:pe.CONTAINS}}},A=()=>{$.push({name:"offers-create"})},G=l=>{$.push({name:"offers-update",params:{id:l}})};se(()=>{q()});const y=()=>{C.value=!0,L.get("/api/offer",{params:{page:c.value,limit:b.value,search:D.value}}).then(l=>{C.value=!1,N.value=l.data.data,V.value=l.data.pagination.total,f.value=l.data.pagination.last_page,R.value=l.data.pagination.from,E.value=l.data.pagination.to}).catch(l=>{C.value=!1,S.add({severity:"error",summary:a("error"),detail:a("offer.loadError"),life:3e3}),console.error("Error fetching data:",l)})};le(D,()=>{c.value=1,y()});const x=l=>{l>=1&&l<=f.value&&(c.value=l,y())},Q=l=>{b.value=l.value,c.value=1,y()};return ne(()=>{y()}),(l,t)=>{const W=u("InputText"),m=u("Button"),Z=u("Toolbar"),H=u("Toast"),p=u("Column"),J=u("ProgressSpinner"),K=u("DataTable"),X=u("Dropdown"),Y=u("Dialog"),v=F("can"),I=F("tooltip");return _((k(),T("div",me,[o("div",ve,[o("div",_e,[n(Z,{class:"mb-4"},{start:d(()=>[o("h2",he,r(s(a)("offer.managementTitle")),1)]),end:d(()=>[o("div",ge,[o("span",be,[t[8]||(t[8]=o("i",{class:"pi pi-search"},null,-1)),n(W,{modelValue:D.value,"onUpdate:modelValue":t[0]||(t[0]=e=>D.value=e),placeholder:l.$t("offer.search")},null,8,["modelValue","placeholder"])]),_(n(m,{label:s(a)("offer.export"),icon:"pi pi-upload",class:"p-export",onClick:z},null,8,["label"]),[[v,"create offers"]]),_(n(m,{label:s(a)("offer.new"),icon:"pi pi-plus",class:"p-button-success",onClick:A},null,8,["label"]),[[v,"create offers"]])])]),_:1}),n(H),o("div",ye,[_((k(),ie(K,{ref_key:"dt",ref:P,value:N.value,loading:C.value,"data-key":"id",paginator:!1,rows:b.value,filters:M.value,totalRecords:V.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[o("div",xe,[t[9]||(t[9]=o("i",{class:"mb-2 text-2xl pi pi-exclamation-circle"},null,-1)),o("p",we,r(s(a)("offer.noData")),1)])]),loading:d(()=>[o("div",ke,[n(J,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[n(p,{"selection-mode":"multiple","header-style":"width: 3rem"}),n(p,{field:"product.commercial_name",header:s(a)("offer.product"),sortable:!0,"header-style":"width:20%; min-width:12rem;"},{body:d(e=>{var w;return[h(r((w=e.data.product)==null?void 0:w.commercial_name),1)]}),_:1},8,["header"]),n(p,{field:"description",header:s(a)("offer.description"),sortable:!0,"header-style":"width:20%; min-width:12rem;"},{body:d(e=>[h(r(e.data.description),1)]),_:1},8,["header"]),n(p,{field:"max_limit",header:s(a)("offer.max_limit"),sortable:!0,"header-style":"width:10%; min-width:8rem;"},{body:d(e=>[h(r(e.data.max_limit),1)]),_:1},8,["header"]),n(p,{field:"min_limit",header:s(a)("offer.min_limit"),sortable:!0,"header-style":"width:10%; min-width:8rem;"},{body:d(e=>[h(r(e.data.min_limit),1)]),_:1},8,["header"]),n(p,{field:"start_date",header:s(a)("offer.startDate"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:d(e=>[h(r(new Date(e.data.start_date).toLocaleDateString()),1)]),_:1},8,["header"]),n(p,{field:"end_date",header:s(a)("offer.endDate"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:d(e=>[h(r(new Date(e.data.end_date).toLocaleDateString()),1)]),_:1},8,["header"]),n(p,{field:"status",header:s(a)("offer.status"),sortable:!0,"header-style":"width:10%; min-width:8rem;"},{body:d(e=>[n(s(ue),{value:e.data.status,severity:j(e.data.status),class:"text-sm"},null,8,["value","severity"])]),_:1},8,["header"]),n(p,{header:s(a)("offer.actions"),"header-style":"min-width:10rem;"},{body:d(e=>[_(n(m,{icon:"pi pi-pencil",class:"p-detail",onClick:w=>G(e.data.id)},null,8,["onClick"]),[[v,"edit offers"],[I,s(a)("edit"),void 0,{top:!0}]]),_(n(m,{icon:"pi pi-trash mx-2",class:"p-delete",onClick:w=>U(e.data.id)},null,8,["onClick"]),[[v,"delete offers"],[I,s(a)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[v,"list offers"]]),f.value>0?(k(),T("div",Ce,[o("div",De,[o("span",Te,r(s(a)("offer.showing"))+" "+r(R.value)+" "+r(s(a)("offer.to"))+" "+r(E.value)+" "+r(s(a)("offer.of"))+" "+r(V.value)+" "+r(s(a)("offer.entries")),1)]),o("div",Se,[o("span",Ve,[o("button",{class:"p-paginator-first p-paginator-element p-link",disabled:c.value===1,onClick:t[1]||(t[1]=e=>x(1))},[...t[10]||(t[10]=[o("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)])],8,$e),o("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:c.value===1,onClick:t[2]||(t[2]=e=>x(c.value-1))},[...t[11]||(t[11]=[o("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)])],8,Be),(k(!0),T(re,null,de(f.value,e=>(k(),T("button",{key:e,class:fe(["p-paginator-page p-paginator-element p-link",{"p-highlight":c.value===e}]),onClick:w=>x(e)},r(e),11,Ne))),128)),o("button",{class:"p-paginator-next p-paginator-element p-link",disabled:c.value===f.value,onClick:t[3]||(t[3]=e=>x(c.value+1))},[...t[12]||(t[12]=[o("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)])],8,Pe),o("button",{class:"p-paginator-last p-paginator-element p-link",disabled:c.value===f.value,onClick:t[4]||(t[4]=e=>x(f.value))},[...t[13]||(t[13]=[o("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)])],8,Me)]),o("span",Re,[n(X,{modelValue:b.value,"onUpdate:modelValue":t[5]||(t[5]=e=>b.value=e),options:[5,10,20,30],onChange:Q,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])):ce("",!0)]),n(Y,{visible:g.value,"onUpdate:visible":t[7]||(t[7]=e=>g.value=e),style:{width:"450px"},header:s(a)("offer.deleteConfirmTitle"),modal:!0},{footer:d(()=>[n(m,{label:s(a)("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[6]||(t[6]=e=>g.value=!1)},null,8,["label"]),n(m,{label:s(a)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:O},null,8,["label"])]),default:d(()=>[o("div",Ee,[t[14]||(t[14]=o("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),o("span",null,r(s(a)("offer.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])),[[v,"list offers"]])}}},je=ee(Ie,[["__scopeId","data-v-02de743c"]]);export{je as default};
