import{_ as de,u as ue,i as pe,j as me,r as i,a4 as ve,w as he,d as ye,Z as p,a5 as L,o as k,c as D,k as s,z as o,v as c,S as q,s as ge,t as r,m as l,F as be,x as fe,y as _e,a6 as xe,B as V,q as $,l as we}from"./index-d45c326e.js";const ke={class:"grid"},qe={class:"col-12"},Ce={class:"p-4 card shadow-2 border-round"},Re={class:"text-2xl font-bold"},je={class:"flex gap-2"},Te={class:"p-input-icon-left"},De={class:"card shadow-1 surface-0"},Ve={class:"py-4 text-center"},$e={class:"text-xl"},Me={class:"flex py-4 justify-content-center align-items-center"},Se={key:0,class:"mt-3 p-paginator p-component p-unselectable-text"},Be={class:"p-paginator-left-content"},Ne={class:"p-paginator-current"},Ee={class:"p-paginator-right-content"},Ue={class:"p-paginator-pages"},ze=["disabled"],Ie=["disabled"],Pe=["onClick"],Fe=["disabled"],Ae=["disabled"],Ge={class:"p-paginator-rpp-options"},Le={class:"flex align-items-center justify-content-center"},Oe={class:"flex align-items-center justify-content-center"},Qe={class:"gap-3"},We={class:"flex align-items-center"},Ze={class:"gap-2 flex-column"},He={for:"rejectedMessage"},Je={__name:"index",setup(Ke){const{t:e}=ue(),N=pe(),m=me(),C=i(!0),E=i(""),U=i(""),z=i(""),I=i(null),g=i(!1),b=i(!1),f=i(!1);i(null);const P=i(null),F=i({}),R=i(""),_=i(""),u=i(1),M=i(0),x=i(10),v=i(0),A=i(0),G=i(0),O=()=>{P.value.exportCSV()},Q=n=>{E.value=n,g.value=!0},W=n=>{U.value=n,_.value="",b.value=!0},Z=n=>{z.value=n,f.value=!0},H=()=>{V.delete(`/api/pharmacy-request/${E.value}`).then(()=>{h(),g.value=!1,m.add({severity:"success",summary:e("success"),detail:e("pharmacyRequest.deleteSuccess"),life:3e3})}).catch(n=>{m.add({severity:"error",summary:e("error"),detail:e("pharmacyRequest.deleteError"),life:3e3})})},J=()=>{V.post(`/api/pharmacy-request/accept/${z.value}`).then(()=>{h(),f.value=!1,m.add({severity:"success",summary:e("success"),detail:e("pharmacyRequest.acceptSuccess"),life:3e3})}).catch(n=>{m.add({severity:"error",summary:e("error"),detail:e("pharmacyRequest.acceptError"),life:3e3})})},K=()=>{if(!_.value.trim()){m.add({severity:"error",summary:e("error"),detail:e("pharmacyRequest.rejectedMessageRequired"),life:3e3});return}V.post(`/api/pharmacy-request/reject/${U.value}`,{rejected_message:_.value}).then(()=>{h(),b.value=!1,m.add({severity:"success",summary:e("success"),detail:e("pharmacyRequest.rejectSuccess"),life:3e3})}).catch(n=>{m.add({severity:"error",summary:e("error"),detail:e("pharmacyRequest.rejectError"),life:3e3})})},X=n=>{N.push({name:"pharmacy_request_show",params:{id:n}})},Y=()=>{F.value={global:{value:null,matchMode:xe.CONTAINS}}};ve(()=>{Y()});const h=()=>{C.value=!0,V.get("/api/pharmacy-request",{params:{page:u.value,limit:x.value,search:R.value}}).then(n=>{C.value=!1,I.value=n.data.data,M.value=n.data.pagination.total,v.value=n.data.pagination.last_page,A.value=n.data.pagination.from,G.value=n.data.pagination.to}).catch(n=>{C.value=!1,m.add({severity:"error",summary:e("error"),detail:e("pharmacyRequest.loadError"),life:3e3}),console.error("Error fetching data:",n)})};he(R,n=>{u.value=1,h()});const w=n=>{n>=1&&n<=v.value&&(u.value=n,h())},ee=n=>{x.value=n,u.value=1,h()};ye(()=>{h()});const te=()=>{N.push({name:"pharmacy-request-create"})};return(n,t)=>{const ae=p("InputText"),d=p("Button"),se=p("Toolbar"),le=p("Toast"),y=p("Column"),oe=p("Tag"),ne=p("ProgressSpinner"),ie=p("DataTable"),re=p("Dropdown"),S=p("Dialog"),ce=p("Textarea"),j=L("tooltip"),B=L("can");return k(),D("div",ke,[s("div",qe,[s("div",Ce,[o(se,{class:"mb-4"},{start:c(()=>[s("h2",Re,r(l(e)("pharmacyRequest.title")),1)]),end:c(()=>[s("div",je,[s("span",Te,[t[13]||(t[13]=s("i",{class:"pi pi-search"},null,-1)),o(ae,{modelValue:R.value,"onUpdate:modelValue":t[0]||(t[0]=a=>R.value=a),placeholder:n.$t("pharmacyRequest.search")},null,8,["modelValue","placeholder"])]),o(d,{label:l(e)("pharmacyRequest.export"),icon:"pi pi-upload",class:"p-export",onClick:O},null,8,["label"]),o(d,{label:l(e)("pharmacyRequest.new"),icon:"pi pi-plus",class:"p-button-success",onClick:te},null,8,["label"])])]),_:1}),o(le),s("div",De,[q((k(),ge(ie,{ref_key:"dt",ref:P,value:I.value,loading:C.value,"data-key":"id",paginator:!1,rows:x.value,filters:F.value,totalRecords:M.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:c(()=>[s("div",Ve,[t[14]||(t[14]=s("i",{class:"mb-2 text-2xl pi pi-exclamation-circle"},null,-1)),s("p",$e,r(l(e)("pharmacyRequest.noData")),1)])]),loading:c(()=>[s("div",Me,[o(ne,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:c(()=>[o(y,{"selection-mode":"multiple","header-style":"width: 3rem"}),o(y,{field:"number",header:l(e)("pharmacyRequest.number"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:c(a=>[$(r(a.data.number),1)]),_:1},8,["header"]),o(y,{field:"name",header:l(e)("pharmacyRequest.name"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:c(a=>[$(r(a.data.name),1)]),_:1},8,["header"]),o(y,{field:"email",header:l(e)("pharmacyRequest.email"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:c(a=>[$(r(a.data.email),1)]),_:1},8,["header"]),o(y,{field:"address",header:l(e)("pharmacyRequest.address"),sortable:!0,"header-style":"width:20%; min-width:15rem;"},{body:c(a=>[$(r(a.data.address),1)]),_:1},8,["header"]),o(y,{field:"status_description",header:l(e)("pharmacyRequest.status"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:c(a=>[o(oe,{value:a.data.status_description,severity:{active:"success",pending:"warning",rejected:"danger"}[a.data.status_description]||"danger"},null,8,["value","severity"])]),_:1},8,["header"]),o(y,{header:l(e)("actions"),"header-style":"min-width:15rem;"},{body:c(a=>[q(o(d,{icon:"pi pi-eye",class:"mr-2 p-detail",onClick:T=>X(a.data.id)},null,8,["onClick"]),[[j,l(e)("view"),void 0,{top:!0}]]),q(o(d,{icon:"pi pi-check",class:"mr-2 p-show",onClick:T=>Z(a.data.id)},null,8,["onClick"]),[[B,"accept pharmacy requests"],[j,l(e)("accept"),void 0,{top:!0}]]),q(o(d,{icon:"pi pi-times",class:"mr-2 p-delete",onClick:T=>W(a.data.id),disabled:a.data.status_description=="active"},null,8,["onClick","disabled"]),[[B,"reject pharmacy requests"],[j,l(e)("reject"),void 0,{top:!0}]]),q(o(d,{icon:"pi pi-trash",class:"mr-2 p-delete",onClick:T=>Q(a.data.number)},null,8,["onClick"]),[[j,l(e)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[B,"list pharmacy requests"]]),v.value>0?(k(),D("div",Se,[s("div",Be,[s("span",Ne,r(l(e)("showing"))+" "+r(A.value)+" "+r(l(e)("to"))+" "+r(G.value)+" "+r(l(e)("of"))+" "+r(M.value)+" "+r(l(e)("entries")),1)]),s("div",Ee,[s("span",Ue,[s("button",{class:"p-paginator-first p-paginator-element p-link",disabled:u.value===1,onClick:t[1]||(t[1]=a=>w(1))},[...t[15]||(t[15]=[s("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)])],8,ze),s("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:u.value===1,onClick:t[2]||(t[2]=a=>w(u.value-1))},[...t[16]||(t[16]=[s("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)])],8,Ie),(k(!0),D(be,null,fe(v.value,a=>(k(),D("button",{key:a,class:we(["p-paginator-page p-paginator-element p-link",{"p-highlight":u.value===a}]),onClick:T=>w(a)},r(a),11,Pe))),128)),s("button",{class:"p-paginator-next p-paginator-element p-link",disabled:u.value===v.value,onClick:t[3]||(t[3]=a=>w(u.value+1))},[...t[17]||(t[17]=[s("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)])],8,Fe),s("button",{class:"p-paginator-last p-paginator-element p-link",disabled:u.value===v.value,onClick:t[4]||(t[4]=a=>w(v.value))},[...t[18]||(t[18]=[s("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)])],8,Ae)]),s("span",Ge,[o(re,{modelValue:x.value,"onUpdate:modelValue":t[5]||(t[5]=a=>x.value=a),options:[5,10,20,30],onChange:ee,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])):_e("",!0)]),o(S,{visible:g.value,"onUpdate:visible":t[7]||(t[7]=a=>g.value=a),style:{width:"450px"},header:l(e)("pharmacyRequest.deleteConfirmTitle"),modal:!0},{footer:c(()=>[o(d,{label:l(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[6]||(t[6]=a=>g.value=!1)},null,8,["label"]),o(d,{label:l(e)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:H},null,8,["label"])]),default:c(()=>[s("div",Le,[t[19]||(t[19]=s("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),s("span",null,r(l(e)("pharmacyRequest.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"]),o(S,{visible:f.value,"onUpdate:visible":t[9]||(t[9]=a=>f.value=a),style:{width:"450px"},header:l(e)("pharmacyRequest.acceptConfirmTitle"),modal:!0},{footer:c(()=>[o(d,{label:l(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[8]||(t[8]=a=>f.value=!1)},null,8,["label"]),o(d,{label:l(e)("yes"),icon:"pi pi-check",class:"p-button-text p-button-success",onClick:J},null,8,["label"])]),default:c(()=>[s("div",Oe,[t[20]||(t[20]=s("i",{class:"mr-3 pi pi-check-circle",style:{"font-size":"2rem",color:"var(--green-500)"}},null,-1)),s("span",null,r(l(e)("pharmacyRequest.acceptConfirmMessage")),1)])]),_:1},8,["visible","header"]),o(S,{visible:b.value,"onUpdate:visible":t[12]||(t[12]=a=>b.value=a),style:{width:"450px"},header:l(e)("pharmacyRequest.rejectConfirmTitle"),modal:!0},{footer:c(()=>[o(d,{label:l(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[11]||(t[11]=a=>b.value=!1)},null,8,["label"]),o(d,{label:l(e)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:K},null,8,["label"])]),default:c(()=>[s("div",Qe,[s("div",We,[t[21]||(t[21]=s("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),s("span",null,r(l(e)("pharmacyRequest.rejectConfirmMessage")),1)]),s("div",Ze,[s("p",He,r(l(e)("pharmacyRequest.rejectedMessage")),1),o(ce,{modelValue:_.value,"onUpdate:modelValue":t[10]||(t[10]=a=>_.value=a),id:"rejectedMessage",rows:"4",class:"w-full mt-4",placeholder:l(e)("pharmacyRequest.rejectedMessagePlaceholder")},null,8,["modelValue","placeholder"])])])]),_:1},8,["visible","header"])])])])}}},Ye=de(Je,[["__scopeId","data-v-2274b5b2"]]);export{Ye as default};
