import{_ as ke,u as qe,s as Ce,e as Re,r as u,a3 as je,w as te,a as Te,Y as p,a4 as se,f as w,g as M,m as o,z as l,j as n,l as a,a5 as De,q as _,t as i,y as z,i as ae,x as b,R as y,F as $e,k as Ve,v as Me}from"./index-b2b8894e.js";const Se={class:"grid"},Ee={class:"col-12"},Ie={class:"p-4 card shadow-2 border-round"},We={class:"text-2xl font-bold"},Ue={class:"flex gap-2"},Be={key:0,class:"p-input-icon-left"},Ne={class:"py-4 text-center"},ze={class:"text-xl"},Pe={class:"flex py-4 justify-content-center align-items-center"},Fe={class:"py-4 text-center"},Ae={class:"text-xl"},Ge={class:"flex py-4 justify-content-center align-items-center"},Le={key:0,class:"mt-3 p-paginator p-component p-unselectable-text"},Oe={class:"p-paginator-left-content"},Qe={class:"p-paginator-current"},Ye={class:"p-paginator-right-content"},He={class:"p-paginator-pages"},Je=["disabled"],Ke=["disabled"],Xe=["onClick"],Ze=["disabled"],et=["disabled"],tt={class:"p-paginator-rpp-options"},st={class:"flex align-items-center justify-content-center"},at={class:"flex align-items-center justify-content-center"},lt={class:"flex align-items-center justify-content-center"},ot={class:"gap-3"},nt={class:"flex align-items-center"},rt={class:"gap-2 flex-column"},it={for:"rejectedMessage"},ut={__name:"index",setup(dt){const{t:e}=qe(),P=Ce(),h=Re(),m=u(0),F=u([]),S=u(!0),A=u(""),x=u(!1),E=u(!0),G=u(""),L=u(""),O=u(""),Q=u(null),k=u(!1),q=u(!1),C=u(!1),W=u(null),Y=u({}),R=u(""),j=u(""),v=u(1),U=u(0),T=u(10),g=u(0),H=u(0),J=u(0),le=()=>{W.value&&W.value.exportCSV()},oe=r=>{A.value=r,x.value=!0},ne=()=>{_.delete(`/api/warehouse/${A.value}`).then(()=>{B(),x.value=!1,h.add({severity:"success",summary:e("success"),detail:e("warehouse.deleteSuccess"),life:3e3})}).catch(()=>{h.add({severity:"error",summary:e("error"),detail:e("warehouse.deleteError"),life:3e3})})},re=r=>{G.value=r,k.value=!0},ie=r=>{L.value=r,j.value="",q.value=!0},ue=r=>{O.value=r,C.value=!0},de=()=>{_.delete(`/api/warehouse-request/${G.value}`).then(()=>{f(),k.value=!1,h.add({severity:"success",summary:e("success"),detail:e("warehouseRequest.deleteSuccess"),life:3e3})}).catch(()=>{h.add({severity:"error",summary:e("error"),detail:e("warehouseRequest.deleteError"),life:3e3})})},ce=()=>{_.post(`/api/warehouse-request/accept/${O.value}`).then(()=>{f(),C.value=!1,h.add({severity:"success",summary:e("success"),detail:e("warehouseRequest.acceptSuccess"),life:3e3})}).catch(()=>{h.add({severity:"error",summary:e("error"),detail:e("warehouseRequest.acceptError"),life:3e3})})},pe=()=>{if(!j.value.trim()){h.add({severity:"error",summary:e("error"),detail:e("warehouseRequest.rejectedMessageRequired"),life:3e3});return}_.post(`/api/warehouse-request/reject/${L.value}`,{rejected_message:j.value}).then(()=>{f(),q.value=!1,h.add({severity:"success",summary:e("success"),detail:e("warehouseRequest.rejectSuccess"),life:3e3})}).catch(()=>{h.add({severity:"error",summary:e("error"),detail:e("warehouseRequest.rejectError"),life:3e3})})},ve=r=>{P.push({name:"warehouse_request_show",params:{id:r}})},he=()=>{Y.value={global:{value:null,matchMode:De.CONTAINS}}};je(()=>{he()});const B=()=>{S.value=!0,_.get("/api/warehouse").then(r=>{F.value=r.data.data||[],S.value=!1}).catch(r=>{S.value=!1,h.add({severity:"error",summary:e("error"),detail:e("warehouse.loadError"),life:3e3}),console.error("Error fetching warehouses:",r)})},f=()=>{E.value=!0,_.get("/api/warehouse-request",{params:{page:v.value,limit:T.value,search:R.value}}).then(r=>{E.value=!1,Q.value=r.data.data;const t=r.data.pagination||{};U.value=t.total||0,g.value=t.last_page||1,H.value=t.from||0,J.value=t.to||0}).catch(r=>{E.value=!1,h.add({severity:"error",summary:e("error"),detail:e("warehouseRequest.loadError"),life:3e3}),console.error("Error fetching requests:",r)})};te(R,()=>{m.value===1&&(v.value=1,f())});const D=r=>{r>=1&&r<=g.value&&(v.value=r,f())},me=r=>{T.value=r,v.value=1,f()};Te(()=>{m.value===0?B():f()}),te(m,r=>{r===0?B():(R.value="",v.value=1,f())});const fe=()=>{P.push({name:"add-storehouse"})};return(r,t)=>{const be=p("InputText"),d=p("Button"),ge=p("Toolbar"),c=p("Column"),K=p("Tag"),X=p("ProgressSpinner"),Z=p("DataTable"),ee=p("TabPanel"),we=p("Toast"),_e=p("Dropdown"),ye=p("TabView"),I=p("Dialog"),xe=p("Textarea"),$=se("tooltip"),N=se("can");return w(),M("div",Se,[o("div",Ee,[o("div",Ie,[l(ge,{class:"mb-4"},{start:n(()=>[o("h2",We,i(m.value===0?a(e)("warehouse.title"):a(e)("warehouseRequest.title")),1)]),end:n(()=>[o("div",Ue,[m.value===1?(w(),M("span",Be,[t[16]||(t[16]=o("i",{class:"pi pi-search"},null,-1)),l(be,{modelValue:R.value,"onUpdate:modelValue":t[0]||(t[0]=s=>R.value=s),placeholder:a(e)("warehouseRequest.search")},null,8,["modelValue","placeholder"])])):z("",!0),m.value===1?(w(),ae(d,{key:1,label:a(e)("warehouseRequest.export"),icon:"pi pi-upload",class:"p-button-outlined p-button-sm",onClick:le},null,8,["label"])):z("",!0),l(d,{label:a(e)("warehouseRequest.new"),icon:"pi pi-plus",class:"p-button-success",onClick:fe},null,8,["label"])])]),_:1}),l(ye,{activeIndex:m.value,"onUpdate:activeIndex":t[6]||(t[6]=s=>m.value=s)},{default:n(()=>[l(ee,{header:a(e)("warehouse.tabWarehouses")},{default:n(()=>[l(Z,{value:F.value,loading:S.value,responsiveLayout:"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:n(()=>[o("div",Ne,[t[17]||(t[17]=o("i",{class:"mb-2 text-2xl pi pi-exclamation-circle"},null,-1)),o("p",ze,i(a(e)("warehouse.noData")),1)])]),loading:n(()=>[o("div",Pe,[l(X,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:n(()=>[l(c,{field:"name",header:a(e)("warehouse.name"),sortable:!0},{body:n(s=>[b(i(s.data.name),1)]),_:1},8,["header"]),l(c,{field:"phone",header:a(e)("warehouse.phone"),sortable:!0},{body:n(s=>[b(i(s.data.phone),1)]),_:1},8,["header"]),l(c,{field:"city",header:a(e)("warehouse.city"),sortable:!0},{body:n(s=>[b(i(s.data.city||"-"),1)]),_:1},8,["header"]),l(c,{field:"address",header:a(e)("warehouse.address"),sortable:!0},{body:n(s=>[b(i(s.data.address),1)]),_:1},8,["header"]),l(c,{field:"status_description",header:a(e)("warehouse.status")},{body:n(s=>[l(K,{value:s.data.status_description,severity:s.data.status===1?"success":"danger"},null,8,["value","severity"])]),_:1},8,["header"]),l(c,{header:a(e)("actions"),"header-style":"min-width:8rem;"},{body:n(s=>[y(l(d,{icon:"pi pi-trash",class:"p-delete",onClick:V=>oe(s.data.id)},null,8,["onClick"]),[[$,a(e)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading"])]),_:1},8,["header"]),l(ee,{header:a(e)("warehouseRequest.tabRequests")},{default:n(()=>[l(we),y((w(),ae(Z,{ref_key:"dt",ref:W,value:Q.value,loading:E.value,"data-key":"id",paginator:!1,rows:T.value,filters:Y.value,totalRecords:U.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:n(()=>[o("div",Fe,[t[18]||(t[18]=o("i",{class:"mb-2 text-2xl pi pi-exclamation-circle"},null,-1)),o("p",Ae,i(a(e)("warehouseRequest.noData")),1)])]),loading:n(()=>[o("div",Ge,[l(X,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:n(()=>[l(c,{"selection-mode":"multiple","header-style":"width: 3rem"}),l(c,{field:"number",header:a(e)("warehouseRequest.number"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:n(s=>[b(i(s.data.number),1)]),_:1},8,["header"]),l(c,{field:"name",header:a(e)("warehouseRequest.name"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:n(s=>[b(i(s.data.name),1)]),_:1},8,["header"]),l(c,{field:"email",header:a(e)("warehouseRequest.email"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:n(s=>[b(i(s.data.email),1)]),_:1},8,["header"]),l(c,{field:"address",header:a(e)("warehouseRequest.address"),sortable:!0,"header-style":"width:20%; min-width:15rem;"},{body:n(s=>[b(i(s.data.address),1)]),_:1},8,["header"]),l(c,{field:"status_description",header:a(e)("warehouseRequest.status"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:n(s=>[l(K,{value:s.data.status_description,severity:{active:"success",pending:"warning",rejected:"danger"}[s.data.status_description]||"danger"},null,8,["value","severity"])]),_:1},8,["header"]),l(c,{header:a(e)("actions"),"header-style":"min-width:15rem;"},{body:n(s=>[y(l(d,{icon:"pi pi-eye",class:"mr-2 p-detail",onClick:V=>ve(s.data.id)},null,8,["onClick"]),[[$,a(e)("view"),void 0,{top:!0}]]),y(l(d,{icon:"pi pi-check",class:"mr-2 p-show",onClick:V=>ue(s.data.id)},null,8,["onClick"]),[[N,"accept warehouse requests"],[$,a(e)("accept"),void 0,{top:!0}]]),y(l(d,{icon:"pi pi-times",class:"mr-2 p-delete",onClick:V=>ie(s.data.id),disabled:s.data.status_description==="active"},null,8,["onClick","disabled"]),[[N,"reject warehouse requests"],[$,a(e)("reject"),void 0,{top:!0}]]),y(l(d,{icon:"pi pi-trash",class:"mr-2 p-delete",onClick:V=>re(s.data.number)},null,8,["onClick"]),[[$,a(e)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[N,"list warehouse requests"]]),g.value>0?(w(),M("div",Le,[o("div",Oe,[o("span",Qe,i(a(e)("showing"))+" "+i(H.value)+" "+i(a(e)("to"))+" "+i(J.value)+" "+i(a(e)("of"))+" "+i(U.value)+" "+i(a(e)("entries")),1)]),o("div",Ye,[o("span",He,[o("button",{class:"p-paginator-first p-paginator-element p-link",disabled:v.value===1,onClick:t[1]||(t[1]=s=>D(1))},[...t[19]||(t[19]=[o("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)])],8,Je),o("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:v.value===1,onClick:t[2]||(t[2]=s=>D(v.value-1))},[...t[20]||(t[20]=[o("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)])],8,Ke),(w(!0),M($e,null,Ve(g.value,s=>(w(),M("button",{key:s,class:Me(["p-paginator-page p-paginator-element p-link",{"p-highlight":v.value===s}]),onClick:V=>D(s)},i(s),11,Xe))),128)),o("button",{class:"p-paginator-next p-paginator-element p-link",disabled:v.value===g.value,onClick:t[3]||(t[3]=s=>D(v.value+1))},[...t[21]||(t[21]=[o("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)])],8,Ze),o("button",{class:"p-paginator-last p-paginator-element p-link",disabled:v.value===g.value,onClick:t[4]||(t[4]=s=>D(g.value))},[...t[22]||(t[22]=[o("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)])],8,et)]),o("span",tt,[l(_e,{modelValue:T.value,"onUpdate:modelValue":t[5]||(t[5]=s=>T.value=s),options:[5,10,20,30],onChange:me,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])):z("",!0)]),_:1},8,["header"])]),_:1},8,["activeIndex"]),l(I,{visible:x.value,"onUpdate:visible":t[8]||(t[8]=s=>x.value=s),style:{width:"450px"},header:a(e)("warehouse.deleteConfirmTitle"),modal:!0},{footer:n(()=>[l(d,{label:a(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[7]||(t[7]=s=>x.value=!1)},null,8,["label"]),l(d,{label:a(e)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:ne},null,8,["label"])]),default:n(()=>[o("div",st,[t[23]||(t[23]=o("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),o("span",null,i(a(e)("warehouse.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"]),l(I,{visible:k.value,"onUpdate:visible":t[10]||(t[10]=s=>k.value=s),style:{width:"450px"},header:a(e)("warehouseRequest.deleteConfirmTitle"),modal:!0},{footer:n(()=>[l(d,{label:a(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[9]||(t[9]=s=>k.value=!1)},null,8,["label"]),l(d,{label:a(e)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:de},null,8,["label"])]),default:n(()=>[o("div",at,[t[24]||(t[24]=o("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),o("span",null,i(a(e)("warehouseRequest.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"]),l(I,{visible:C.value,"onUpdate:visible":t[12]||(t[12]=s=>C.value=s),style:{width:"450px"},header:a(e)("warehouseRequest.acceptConfirmTitle"),modal:!0},{footer:n(()=>[l(d,{label:a(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[11]||(t[11]=s=>C.value=!1)},null,8,["label"]),l(d,{label:a(e)("yes"),icon:"pi pi-check",class:"p-button-text p-button-success",onClick:ce},null,8,["label"])]),default:n(()=>[o("div",lt,[t[25]||(t[25]=o("i",{class:"mr-3 pi pi-check-circle",style:{"font-size":"2rem",color:"var(--green-500)"}},null,-1)),o("span",null,i(a(e)("warehouseRequest.acceptConfirmMessage")),1)])]),_:1},8,["visible","header"]),l(I,{visible:q.value,"onUpdate:visible":t[15]||(t[15]=s=>q.value=s),style:{width:"450px"},header:a(e)("warehouseRequest.rejectConfirmTitle"),modal:!0},{footer:n(()=>[l(d,{label:a(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[14]||(t[14]=s=>q.value=!1)},null,8,["label"]),l(d,{label:a(e)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:pe},null,8,["label"])]),default:n(()=>[o("div",ot,[o("div",nt,[t[26]||(t[26]=o("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),o("span",null,i(a(e)("warehouseRequest.rejectConfirmMessage")),1)]),o("div",rt,[o("label",it,i(a(e)("warehouseRequest.rejectedMessage")),1),l(xe,{modelValue:j.value,"onUpdate:modelValue":t[13]||(t[13]=s=>j.value=s),id:"rejectedMessage",rows:"4",class:"w-full mt-2",placeholder:a(e)("warehouseRequest.rejectedMessagePlaceholder")},null,8,["modelValue","placeholder"])])])]),_:1},8,["visible","header"])])])])}}},pt=ke(ut,[["__scopeId","data-v-99a57706"]]);export{pt as default};
