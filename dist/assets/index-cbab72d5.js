import{_ as ee,u as te,z as ae,a as oe,r as d,a7 as ie,m as se,o as ne,d as u,a8 as E,Z as k,e as y,h as C,g as o,i as s,w as r,f as le,t as l,j as i,F as re,y as de,C as ce,a9 as pe,b as F,B as m,A as ue}from"./index-2cd76906.js";const ve={class:"grid"},me={class:"col-12"},he={class:"p-4 card shadow-2 border-round"},_e={class:"text-2xl font-bold"},ge={class:"flex gap-2"},be={class:"p-input-icon-left"},fe={class:"card shadow-1 surface-0"},ye={class:"py-4 text-center"},we={class:"text-xl"},xe={class:"flex py-4 justify-content-center align-items-center"},ke={key:0,class:"mt-3 p-paginator p-component p-unselectable-text"},Ce={class:"p-paginator-left-content"},Te={class:"p-paginator-current"},De={class:"p-paginator-right-content"},Ve={class:"p-paginator-pages"},Pe=["disabled"],Se=["disabled"],$e=["onClick"],Be=["disabled"],Ie=["disabled"],Ne={class:"p-paginator-rpp-options"},Me={class:"flex align-items-center justify-content-center"},Re={__name:"index",setup(Ee){const{t:a}=te(),j=ae(),T=oe(),w=d(!0),P=d(""),S=d(null),h=d(!1),$=d(null),B=d({}),x=d(""),c=d(1),D=d(0),_=d(10),v=d(0),I=d(0),N=d(0),z=n=>{switch(n.toLowerCase()){case"unpaid":return"warning";case"paid":return"success";case"cancelled":return"danger";default:return"info"}},A=()=>{$.value.exportCSV()},U=n=>{P.value=n,h.value=!0},L=()=>{F.delete(`/api/invoice/${P.value}`).then(()=>{g(),h.value=!1,T.add({severity:"success",summary:a("success"),detail:a("invoice.deleteSuccess"),life:3e3})}).catch(n=>{T.add({severity:"error",summary:a("error"),detail:a("invoice.deleteError"),life:3e3})})},G=()=>{B.value={global:{value:null,matchMode:pe.CONTAINS}}},O=n=>{j.push({name:"invoice_show",params:{id:n}})};ie(()=>{G()});const g=()=>{w.value=!0,F.get("/api/invoice",{params:{page:c.value,limit:_.value,search:x.value}}).then(n=>{w.value=!1,S.value=n.data.data,D.value=n.data.pagination.total,v.value=n.data.pagination.last_page,I.value=n.data.pagination.from,N.value=n.data.pagination.to}).catch(n=>{w.value=!1,T.add({severity:"error",summary:a("error"),detail:a("invoice.loadError"),life:3e3}),console.error("Error fetching data:",n)})};se(x,()=>{c.value=1,g()});const b=n=>{n>=1&&n<=v.value&&(c.value=n,g())},Q=n=>{_.value=n.value,c.value=1,g()};return ne(()=>{g()}),(n,t)=>{const W=u("InputText"),f=u("Button"),Z=u("Toolbar"),q=u("Toast"),p=u("Column"),H=u("Tag"),J=u("ProgressSpinner"),K=u("DataTable"),X=u("Dropdown"),Y=u("Dialog"),M=E("tooltip"),V=E("can");return k((y(),C("div",ve,[o("div",me,[o("div",he,[s(Z,{class:"mb-4"},{start:r(()=>[o("h2",_e,l(i(a)("invoice.managementTitle")),1)]),end:r(()=>[o("div",ge,[o("span",be,[t[8]||(t[8]=o("i",{class:"pi pi-search"},null,-1)),s(W,{modelValue:x.value,"onUpdate:modelValue":t[0]||(t[0]=e=>x.value=e),placeholder:i(a)("invoice.search")},null,8,["modelValue","placeholder"])]),s(f,{label:i(a)("invoice.export"),icon:"pi pi-upload",class:"p-export",onClick:A},null,8,["label"])])]),_:1}),s(q),o("div",fe,[k((y(),le(K,{ref_key:"dt",ref:$,value:S.value,loading:w.value,"data-key":"id",paginator:!1,rows:_.value,filters:B.value,totalRecords:D.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:r(()=>[o("div",ye,[t[9]||(t[9]=o("i",{class:"mb-2 text-2xl pi pi-exclamation-circle"},null,-1)),o("p",we,l(i(a)("invoice.noData")),1)])]),loading:r(()=>[o("div",xe,[s(J,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:r(()=>[s(p,{"selection-mode":"multiple","header-style":"width: 3rem"}),s(p,{field:"number",header:i(a)("invoice.invoiceNumber"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:r(e=>[m(l(e.data.number),1)]),_:1},8,["header"]),s(p,{field:"pharmacy.name",header:i(a)("invoice.pharmacy"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:r(e=>[m(l(e.data.pharmacy.name),1)]),_:1},8,["header"]),s(p,{field:"warehouse.name",header:i(a)("invoice.warehouse"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:r(e=>[m(l(e.data.warehouse.name),1)]),_:1},8,["header"]),s(p,{field:"status_description",header:i(a)("invoice.status"),sortable:!0,"header-style":"width:10%; min-width:8rem;"},{body:r(e=>[s(H,{value:e.data.status_description,severity:z(e.data.status_description)},null,8,["value","severity"])]),_:1},8,["header"]),s(p,{field:"original_price",header:i(a)("invoice.originalPrice"),sortable:!0,"header-style":"width:10%; min-width:8rem;"},{body:r(e=>[m(l(e.data.original_price),1)]),_:1},8,["header"]),s(p,{field:"total_price",header:i(a)("invoice.totalPrice"),sortable:!0,"header-style":"width:10%; min-width:8rem;"},{body:r(e=>[m(l(e.data.total_price),1)]),_:1},8,["header"]),s(p,{field:"total_paid",header:i(a)("invoice.totalPaid"),sortable:!0,"header-style":"width:10%; min-width:8rem;"},{body:r(e=>[m(l(e.data.total_paid),1)]),_:1},8,["header"]),s(p,{field:"created_at",header:i(a)("invoice.createdAt"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:r(e=>[m(l(e.data.created_at),1)]),_:1},8,["header"]),s(p,{header:i(a)("invoice.actions"),"header-style":"min-width:10rem;"},{body:r(e=>[k(s(f,{icon:"pi pi-eye",class:"p-detail",onClick:R=>O(e.data.id)},null,8,["onClick"]),[[M,i(a)("view"),void 0,{top:!0}]]),k(s(f,{icon:"pi pi-trash mx-2",class:"p-delete",onClick:R=>U(e.data.id)},null,8,["onClick"]),[[V,"delete invoices"],[M,i(a)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[V,"list invoices"]]),v.value>0?(y(),C("div",ke,[o("div",Ce,[o("span",Te,l(i(a)("product.showing"))+" "+l(I.value)+" "+l(i(a)("product.to"))+" "+l(N.value)+" "+l(i(a)("product.of"))+" "+l(D.value)+" "+l(i(a)("product.entries")),1)]),o("div",De,[o("span",Ve,[o("button",{class:"p-paginator-first p-paginator-element p-link",disabled:c.value===1,onClick:t[1]||(t[1]=e=>b(1))},[...t[10]||(t[10]=[o("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)])],8,Pe),o("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:c.value===1,onClick:t[2]||(t[2]=e=>b(c.value-1))},[...t[11]||(t[11]=[o("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)])],8,Se),(y(!0),C(re,null,de(v.value,e=>(y(),C("button",{key:e,class:ue(["p-paginator-page p-paginator-element p-link",{"p-highlight":c.value===e}]),onClick:R=>b(e)},l(e),11,$e))),128)),o("button",{class:"p-paginator-next p-paginator-element p-link",disabled:c.value===v.value,onClick:t[3]||(t[3]=e=>b(c.value+1))},[...t[12]||(t[12]=[o("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)])],8,Be),o("button",{class:"p-paginator-last p-paginator-element p-link",disabled:c.value===v.value,onClick:t[4]||(t[4]=e=>b(v.value))},[...t[13]||(t[13]=[o("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)])],8,Ie)]),o("span",Ne,[s(X,{modelValue:_.value,"onUpdate:modelValue":t[5]||(t[5]=e=>_.value=e),options:[5,10,20,30],onChange:Q,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])):ce("",!0)]),s(Y,{visible:h.value,"onUpdate:visible":t[7]||(t[7]=e=>h.value=e),style:{width:"450px"},header:i(a)("invoice.deleteConfirmTitle"),modal:!0},{footer:r(()=>[s(f,{label:i(a)("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[6]||(t[6]=e=>h.value=!1)},null,8,["label"]),s(f,{label:i(a)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:L},null,8,["label"])]),default:r(()=>[o("div",Me,[t[14]||(t[14]=o("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),o("span",null,l(i(a)("invoice.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])),[[V,"list invoices"]])}}},je=ee(Re,[["__scopeId","data-v-7ea98c4e"]]);export{je as default};
