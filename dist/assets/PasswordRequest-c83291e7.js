import{a2 as V,u as R,a as j,z as D,Y as x,r as g,c as T,d as b,e as l,h as i,g as e,t as r,B as f,D as B,A as _,Z as h,aq as v,$ as N,C as w,i as k,w as I,b as M,_ as P}from"./index-2cd76906.js";const U={class:"bg-gradient-to-br from-gray-50 via-white to-gray-100 flex items-center justify-center px-4 py-12"},z={class:"w-full"},S={key:0,class:"text-center animate-fadeIn"},A={class:"bg-white rounded-2xl shadow-xl p-10 border border-green-100"},E={class:"text-2xl font-bold text-gray-800 mb-4"},F={class:"text-gray-600 mb-8 leading-relaxed"},Y={class:"font-semibold text-green-600"},Z={key:1,class:"bg-white rounded-2xl shadow-xl p-8 border border-gray-200"},G={class:"text-center mb-8"},H={class:"text-3xl font-bold text-gray-800 mb-2"},J={class:"text-gray-500"},K={class:"block text-sm font-medium text-gray-700 mb-2"},L={class:"grid grid-cols-2 gap-4"},O={class:"text-center"},Q={class:"block text-sm font-medium text-gray-700"},W={class:"text-center"},X={class:"block text-sm font-medium text-gray-700"},ee={for:"phone",class:"block text-sm font-medium text-gray-700 mb-2"},te={class:"relative"},se={key:0,class:"mt-1 text-sm text-red-600"},oe=["disabled"],re={key:0,class:"pi pi-spin pi-spinner"},ae={class:"mt-8 text-center"},ne=V({__name:"PasswordRequest",setup(le){const{t:d}=R(),y=j(),$=D(),s=x({type:"pharmacy",phone:""}),a=g(!1),u=g(!1),p=x({phone:""});T(()=>/^09\d{8}$/.test(s.phone.replace(/\D/g,""))&&s.type);const q=async()=>{var o,t;if(!p.phone){a.value=!0;try{await M.post("/api/change-password-request",{type:s.type,phone:s.phone.replace(/\D/g,"")}),u.value=!0,y.add({severity:"success",summary:d("success"),detail:d("password_reset.request_sent_success"),life:5e3})}catch(c){const m=((t=(o=c.response)==null?void 0:o.data)==null?void 0:t.message)||d("password_reset.request_failed");y.add({severity:"error",summary:d("error"),detail:m,life:5e3})}finally{a.value=!1}}},C=()=>{s.type="pharmacy",s.phone="",u.value=!1,$.push("/auth/login")};return(o,t)=>{const c=b("router-link"),m=b("Toast");return l(),i("div",U,[e("div",z,[u.value?(l(),i("div",S,[e("div",A,[t[4]||(t[4]=e("div",{class:"w-20 h-20 mx-auto mb-6 bg-green-100 rounded-full flex items-center justify-center"},[e("i",{class:"pi pi-check text-4xl text-green-600"})],-1)),e("h2",E,r(o.$t("password_reset.request_sent")),1),e("p",F,[f(r(o.$t("password_reset.request_sent_description"))+" ",1),t[3]||(t[3]=e("br",null,null,-1)),e("span",Y,r(s.phone),1)]),e("button",{onClick:C,class:"w-full py-3 bg-gradient-to-r from-green-500 to-teal-500 text-white font-semibold rounded-xl shadow-lg hover:from-green-600 hover:to-teal-600 transition-all duration-300"},r(o.$t("password_reset.back_to_login")),1)])])):(l(),i("div",Z,[e("div",G,[e("h1",H,r(o.$t("password_reset.title")),1),e("p",J,r(o.$t("password_reset.subtitle")),1)]),e("form",{onSubmit:B(q,["prevent"]),class:"space-y-6"},[e("div",null,[e("label",K,r(o.$t("password_reset.account_type"))+" * ",1),e("div",L,[e("label",{class:_([{"border-green-500 bg-green-50":s.type==="pharmacy","border-2":!0},"flex items-center justify-center p-4 rounded-xl cursor-pointer transition-all"])},[h(e("input",{type:"radio","onUpdate:modelValue":t[0]||(t[0]=n=>s.type=n),value:"pharmacy",class:"sr-only",required:"",id:"type-pharmacy"},null,512),[[v,s.type]]),e("div",O,[t[5]||(t[5]=e("i",{class:"pi pi-home text-2xl text-green-600 mb-2"},null,-1)),e("span",Q,r(o.$t("common.pharmacy")),1)])],2),e("label",{class:_([{"border-teal-500 bg-teal-50":s.type==="warehouse","border-2":!0},"flex items-center justify-center p-4 rounded-xl cursor-pointer transition-all"])},[h(e("input",{type:"radio","onUpdate:modelValue":t[1]||(t[1]=n=>s.type=n),value:"warehouse",class:"sr-only",id:"type-warehouse"},null,512),[[v,s.type]]),e("div",W,[t[6]||(t[6]=e("i",{class:"pi pi-warehouse text-2xl text-teal-600 mb-2"},null,-1)),e("span",X,r(o.$t("common.warehouse")),1)])],2)])]),e("div",null,[e("label",ee,r(o.$t("auth.phone"))+" * ",1),e("div",te,[t[7]||(t[7]=e("span",{class:"absolute inset-y-0 left-0 pl-4 flex items-center text-gray-500"},[e("i",{class:"pi pi-phone"})],-1)),h(e("input",{id:"phone","onUpdate:modelValue":t[2]||(t[2]=n=>s.phone=n),type:"tel",required:"",placeholder:"09xxxxxxxx",class:_(["w-full pl-12 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-300",{"border-red-500":p.phone}])},null,2),[[N,s.phone]])]),p.phone?(l(),i("p",se,r(p.phone),1)):w("",!0)]),e("button",{type:"submit",disabled:a.value,class:"w-full py-4 bg-gradient-to-r from-green-500 to-teal-500 text-white font-bold text-lg rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-1 disabled:opacity-60 disabled:cursor-not-allowed transition-all duration-300 flex items-center justify-center gap-3"},[a.value?(l(),i("i",re)):w("",!0),e("span",null,r(a.value?o.$t("common.sending"):o.$t("password_reset.send_request")),1)],8,oe)],32),e("div",ae,[k(c,{to:"/auth/login",class:"text-sm text-green-600 hover:text-green-700 font-medium transition"},{default:I(()=>[f(" â† "+r(o.$t("password_reset.back_to_login")),1)]),_:1})])]))]),k(m)])}}});const de=P(ne,[["__scopeId","data-v-96639720"]]);export{de as default};
