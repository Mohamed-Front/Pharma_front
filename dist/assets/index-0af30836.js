import{_ as Z,u as ee,s as te,e as le,r as i,w as oe,a3 as ae,a as se,Y as c,a4 as E,f as w,g as T,m as t,z as n,j as p,R as b,i as ne,t as r,l as s,F as ie,k as re,a5 as de,q as F,x as j,v as pe}from"./index-b2b8894e.js";const ce={class:"grid"},ue={class:"col-12"},ve={class:"card p-4 shadow-2 border-round"},me={class:"text-2xl font-bold"},ge={class:"flex gap-2"},_e={class:"p-input-icon-left"},he={class:"card shadow-1 surface-0"},fe={class:"text-center py-4"},be={class:"text-xl"},xe={class:"flex justify-content-center align-items-center py-4"},ye={class:"p-paginator p-component p-unselectable-text mt-3"},ke={class:"p-paginator-left-content"},we={class:"p-paginator-current"},Ce={class:"p-paginator-right-content"},De={class:"p-paginator-pages"},Te=["disabled"],Ve=["disabled"],$e=["onClick"],Re=["disabled"],Pe=["disabled"],Be={class:"p-paginator-rpp-options"},Se={class:"flex align-items-center justify-content-center"},Me={__name:"index",setup(Ne){const{t:l}=ee(),V=te(),C=le(),x=i(!0);i({name:"",permissions:[]});const $=i([]),m=i(!1);i(null);const R=i(null),P=i({}),B=i(""),y=i(""),d=i(1),D=i(0),g=i(10),u=i(0),S=i(0),M=i(0),z=()=>{P.value={global:{value:null,matchMode:de.CONTAINS}}},_=()=>{x.value=!0,F.get("/api/role",{params:{page:d.value,limit:g.value,search:y.value}}).then(a=>{x.value=!1,$.value=a.data.data,D.value=a.data.pagination.total,u.value=a.data.pagination.last_page,S.value=a.data.pagination.from,M.value=a.data.pagination.to}).catch(a=>{x.value=!1,C.add({severity:"error",summary:l("error"),detail:l("role.loadError"),life:3e3}),console.error("Error fetching roles:",a)})},h=a=>{a>=1&&a<=u.value&&(d.value=a,_())},U=a=>{g.value=a.value,d.value=1,_()};oe(y,a=>{d.value=1,_()});const q=()=>{V.push({name:"roles-create"})},A=a=>{V.push({name:"roles-update",params:{id:a}})},G=a=>{B.value=a,m.value=!0},L=()=>{F.delete(`/api/role/${B.value}`).then(()=>{_(),m.value=!1,C.add({severity:"success",summary:l("success"),detail:l("role.deleteSuccess"),life:3e3})}).catch(a=>{C.add({severity:"error",summary:l("error"),detail:l("role.deleteError"),life:3e3})})},O=()=>{R.value.exportCSV()};return ae(()=>{z()}),se(()=>{_()}),(a,e)=>{const Q=c("InputText"),v=c("Button"),W=c("Toolbar"),Y=c("Toast"),k=c("Column"),H=c("ProgressSpinner"),J=c("DataTable"),K=c("Dropdown"),X=c("Dialog"),f=E("can"),N=E("tooltip");return w(),T("div",ce,[t("div",ue,[t("div",ve,[n(W,{class:"mb-4"},{start:p(()=>[t("h2",me,r(s(l)("role.roles")),1)]),end:p(()=>[t("div",ge,[t("span",_e,[e[8]||(e[8]=t("i",{class:"pi pi-search"},null,-1)),n(Q,{modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=o=>y.value=o),placeholder:a.$t("role.search")},null,8,["modelValue","placeholder"])]),b(n(v,{label:s(l)("role.export"),icon:"pi pi-upload",class:"p-export",onClick:O},null,8,["label"]),[[f,"export roles"]]),b(n(v,{label:s(l)("role.new"),icon:"pi pi-plus",class:"p-button-success",onClick:q},null,8,["label"]),[[f,"create roles"]])])]),_:1}),n(Y),t("div",he,[b((w(),ne(J,{ref_key:"dt",ref:R,value:$.value,loading:x.value,"data-key":"id",paginator:!1,rows:g.value,filters:P.value,totalRecords:D.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:p(()=>[t("div",fe,[e[9]||(e[9]=t("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),t("p",be,r(s(l)("role.noData")),1)])]),loading:p(()=>[t("div",xe,[n(H,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:p(()=>[n(k,{"selection-mode":"multiple","header-style":"width: 3rem"}),n(k,{field:"id",header:s(l)("role.iD"),sortable:!0,"header-style":"width:14%; min-width:5rem;"},{body:p(o=>[j(r(o.data.id),1)]),_:1},8,["header"]),n(k,{field:"name",header:s(l)("role.name"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:p(o=>[j(r(o.data.name),1)]),_:1},8,["header"]),n(k,{header:s(l)("actions"),"header-style":"min-width:10rem;"},{body:p(o=>[b(n(v,{icon:"pi pi-pencil",class:"p-detail",onClick:I=>A(o.data.id)},null,8,["onClick"]),[[f,"edit roles"],[N,s(l)("edit"),void 0,{top:!0}]]),b(n(v,{icon:"pi pi-trash mx-2",class:"p-delete",onClick:I=>G(o.data.id)},null,8,["onClick"]),[[f,"delete roles"],[N,s(l)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[f,"list roles"]]),t("div",ye,[t("div",ke,[t("span",we,r(s(l)("role.showing"))+" "+r(S.value)+" "+r(s(l)("role.to"))+" "+r(M.value)+" "+r(s(l)("role.of"))+" "+r(D.value)+" "+r(s(l)("role.entries")),1)]),t("div",Ce,[t("span",De,[t("button",{class:"p-paginator-first p-paginator-element p-link",disabled:d.value===1,onClick:e[1]||(e[1]=o=>h(1))},[...e[10]||(e[10]=[t("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)])],8,Te),t("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:d.value===1,onClick:e[2]||(e[2]=o=>h(d.value-1))},[...e[11]||(e[11]=[t("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)])],8,Ve),(w(!0),T(ie,null,re(u.value,o=>(w(),T("button",{key:o,class:pe(["p-paginator-page p-paginator-element p-link",{"p-highlight":o===d.value}]),onClick:I=>h(o)},r(o),11,$e))),128)),t("button",{class:"p-paginator-next p-paginator-element p-link",disabled:d.value===u.value,onClick:e[3]||(e[3]=o=>h(d.value+1))},[...e[12]||(e[12]=[t("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)])],8,Re),t("button",{class:"p-paginator-last p-paginator-element p-link",disabled:d.value===u.value,onClick:e[4]||(e[4]=o=>h(u.value))},[...e[13]||(e[13]=[t("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)])],8,Pe)]),t("span",Be,[n(K,{modelValue:g.value,"onUpdate:modelValue":e[5]||(e[5]=o=>g.value=o),options:[5,10,20,30],onChange:U,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])]),n(X,{visible:m.value,"onUpdate:visible":e[7]||(e[7]=o=>m.value=o),style:{width:"450px"},header:s(l)("role.deleteConfirmTitle"),modal:!0},{footer:p(()=>[n(v,{label:s(l)("no"),icon:"pi pi-times",class:"p-button-text",onClick:e[6]||(e[6]=o=>m.value=!1)},null,8,["label"]),n(v,{label:s(l)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:L},null,8,["label"])]),default:p(()=>[t("div",Se,[e[14]||(e[14]=t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),t("span",null,r(s(l)("role.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},Ee=Z(Me,[["__scopeId","data-v-085256db"]]);export{Ee as default};
