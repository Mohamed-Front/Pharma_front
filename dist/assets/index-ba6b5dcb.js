import{_ as z,u as A,z as I,a as G,r as n,a7 as O,m as Q,o as W,d as Z,a8 as H,e as f,h as w,g as l,i,w as d,j as e,t as r,F as J,y as K,C as X,a9 as Y,b as B,E as x,aa as ee,s as te,V as c,B as k,T as se,Z as ae,U as le,A as oe,ab as ne,a1 as ie}from"./index-2cd76906.js";const re={class:"grid"},de={class:"col-12"},pe={class:"p-4 card shadow-2 border-round"},ue={class:"text-2xl font-bold"},ce={class:"flex gap-2"},ve={class:"card shadow-1 surface-0"},me={class:"py-4 text-center"},he={class:"text-xl"},ge={class:"flex py-4 justify-content-center align-items-center"},_e={key:0,class:"mt-3 p-paginator p-component p-unselectable-text"},be={class:"p-paginator-left-content"},ye={class:"p-paginator-current"},fe={class:"p-paginator-right-content"},we={class:"p-paginator-pages"},xe=["disabled"],ke=["disabled"],Re=["onClick"],qe=["disabled"],Ce=["disabled"],$e={class:"p-paginator-rpp-options"},Te={class:"flex align-items-center justify-content-center"},Ve="https://admin.pharmabank.sy/auth/change-password/",Se={__name:"index",setup(Ee){const{t}=A();I();const v=G(),_=n(!0),D=n(""),C=n(null),b=n(!1);n(!1),n(!1),n(null);const $=n(null),T=n({}),V=n("");n({description:"",limit:"",start_date:"",end_date:"",status:""}),n(null);const p=n(1),R=n(0),m=n(10),u=n(0),S=n(0),E=n(0),M=o=>{switch(o){case 2:return"info";case 1:return"success";case 3:return"danger";default:return"secondary"}},N=()=>{$.value.exportCSV()},F=()=>{B.delete(`/api/change-password-request/${D.value}`).then(()=>{h(),b.value=!1,v.add({severity:"success",summary:t("success"),detail:t("passwordRequest.deleteSuccess"),life:3e3})}).catch(o=>{v.add({severity:"error",summary:t("error"),detail:t("passwordRequest.deleteError"),life:3e3})})},L=async o=>{const s=`${Ve}${o}`;try{await navigator.clipboard.writeText(s),v.add({severity:"success",summary:t("success"),detail:`${t("passwordRequest.linkCopied")}: ${o}`,life:3e3})}catch(q){console.error("Failed to copy text: ",q),v.add({severity:"error",summary:t("error"),detail:t("passwordRequest.copyLinkError"),life:3e3})}},P=()=>{T.value={global:{value:null,matchMode:Y.CONTAINS}}};O(()=>{P()});const h=()=>{_.value=!0,B.get("/api/change-password-request",{params:{page:p.value,limit:m.value,search:V.value}}).then(o=>{_.value=!1,C.value=o.data.data,R.value=o.data.pagination.total,u.value=o.data.pagination.last_page,S.value=o.data.pagination.from,E.value=o.data.pagination.to}).catch(o=>{_.value=!1,v.add({severity:"error",summary:t("error"),detail:t("passwordRequest.loadError"),life:3e3}),console.error("Error fetching data:",o)})};Q(V,()=>{p.value=1,h()});const g=o=>{o>=1&&o<=u.value&&(p.value=o,h())},U=o=>{m.value=o.value,p.value=1,h()};return W(()=>{h()}),(o,s)=>{const q=Z("Toast"),j=H("tooltip");return f(),w("div",re,[l("div",de,[l("div",pe,[i(e(ee),{class:"mb-4"},{start:d(()=>[l("h2",ue,r(e(t)("passwordRequest.managementTitle")),1)]),end:d(()=>[l("div",ce,[i(e(x),{label:e(t)("passwordRequest.export"),icon:"pi pi-upload",class:"p-export",onClick:N},null,8,["label"])])]),_:1}),i(q),l("div",ve,[i(e(le),{ref_key:"dt",ref:$,value:C.value,loading:_.value,"data-key":"id",paginator:!1,rows:m.value,filters:T.value,totalRecords:R.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[l("div",me,[s[7]||(s[7]=l("i",{class:"mb-2 text-2xl pi pi-exclamation-circle"},null,-1)),l("p",he,r(e(t)("passwordRequest.noData")),1)])]),loading:d(()=>[l("div",ge,[i(e(te),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[i(e(c),{"selection-mode":"multiple","header-style":"width: 3rem"}),i(e(c),{field:"number",header:e(t)("passwordRequest.number"),sortable:!0,"header-style":"width:15%; min-width:12rem;"},{body:d(a=>[k(r(a.data.number),1)]),_:1},8,["header"]),i(e(c),{field:"requestable.name",header:e(t)("passwordRequest.requestableName"),sortable:!0,"header-style":"width:20%; min-width:15rem;"},{body:d(a=>{var y;return[k(r((y=a.data.requestable)==null?void 0:y.name),1)]}),_:1},8,["header"]),i(e(c),{field:"type",header:e(t)("passwordRequest.type"),sortable:!0,"header-style":"width:10%; min-width:8rem;"},{body:d(a=>[k(r(a.data.type),1)]),_:1},8,["header"]),i(e(c),{field:"phone",header:e(t)("passwordRequest.phone"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:d(a=>[k(r(a.data.phone),1)]),_:1},8,["header"]),i(e(c),{field:"status_description",header:e(t)("passwordRequest.status"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:d(a=>[i(e(se),{value:a.data.status_description,severity:M(a.data.status),class:"text-sm"},null,8,["value","severity"])]),_:1},8,["header"]),i(e(c),{header:e(t)("passwordRequest.actions"),"header-style":"min-width:10rem;"},{body:d(a=>[ae(i(e(x),{icon:"pi pi-link",class:"p-detail",disabled:a.data.status==1,onClick:y=>L(a.data.number)},null,8,["disabled","onClick"]),[[j,e(t)("passwordRequest.copyLink"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"]),u.value>0?(f(),w("div",_e,[l("div",be,[l("span",ye,r(e(t)("passwordRequest.showing"))+" "+r(S.value)+" "+r(e(t)("passwordRequest.to"))+" "+r(E.value)+" "+r(e(t)("passwordRequest.of"))+" "+r(R.value)+" "+r(e(t)("passwordRequest.entries")),1)]),l("div",fe,[l("span",we,[l("button",{class:"p-paginator-first p-paginator-element p-link",disabled:p.value===1,onClick:s[0]||(s[0]=a=>g(1))},[...s[8]||(s[8]=[l("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)])],8,xe),l("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:p.value===1,onClick:s[1]||(s[1]=a=>g(p.value-1))},[...s[9]||(s[9]=[l("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)])],8,ke),(f(!0),w(J,null,K(u.value,a=>(f(),w("button",{key:a,class:oe(["p-paginator-page p-paginator-element p-link",{"p-highlight":p.value===a}]),onClick:y=>g(a)},r(a),11,Re))),128)),l("button",{class:"p-paginator-next p-paginator-element p-link",disabled:p.value===u.value,onClick:s[2]||(s[2]=a=>g(p.value+1))},[...s[10]||(s[10]=[l("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)])],8,qe),l("button",{class:"p-paginator-last p-paginator-element p-link",disabled:p.value===u.value,onClick:s[3]||(s[3]=a=>g(u.value))},[...s[11]||(s[11]=[l("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)])],8,Ce)]),l("span",$e,[i(e(ne),{modelValue:m.value,"onUpdate:modelValue":s[4]||(s[4]=a=>m.value=a),options:[5,10,20,30],onChange:U,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])):X("",!0)]),i(e(ie),{visible:b.value,"onUpdate:visible":s[6]||(s[6]=a=>b.value=a),style:{width:"450px"},header:e(t)("passwordRequest.deleteConfirmTitle"),modal:!0},{footer:d(()=>[i(e(x),{label:e(t)("no"),icon:"pi pi-times",class:"p-button-text",onClick:s[5]||(s[5]=a=>b.value=!1)},null,8,["label"]),i(e(x),{label:e(t)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:F},null,8,["label"])]),default:d(()=>[l("div",Te,[s[12]||(s[12]=l("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),l("span",null,r(e(t)("passwordRequest.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},De=z(Se,[["__scopeId","data-v-442a7c25"]]);export{De as default};
