import{_ as D,z as M,u as N,a as S,r as m,c as z,m as F,I as R,o as U,e as l,h as o,g as a,i as _,j as d,t as p,F as w,y as C,w as L,C as x,f as E,A as V,b as A,H,s as Q,E as b,k as T}from"./index-2cd76906.js";const q={class:"bg-gray-50"},G={class:"py-10 px-4 md:px-8 max-w-7xl m-auto"},J={class:"flex justify-center mb-8"},K={class:"relative w-full max-w-lg"},O={key:0,class:"flex justify-center mb-10"},X={key:1,class:"text-center text-gray-500 mb-10"},Y={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-10"},Z=["onClick"],ee={class:"flex items-center justify-between w-full mb-4"},te={class:"flex items-center gap-2"},ae={class:"text-lg font-bold text-gray-800"},se={class:"flex items-center gap-2"},le={class:"text-sm font-bold text-gray-800"},re={class:"flex items-center gap-2 mb-4"},oe=["src"],ne={class:"text-sm text-gray-600"},ie={class:"text-sm text-gray-600"},ce={class:"flex flex-wrap gap-2 mt-auto w-full"},de={key:3,class:"flex justify-center items-center gap-2"},ue={key:0,class:"px-4 py-2 text-gray-500"},ge={__name:"warehouses",setup(pe){const I=M(),{t:g}=N(),$=S(),v=m([]),y=m(!1),u=m(""),n=m(1),r=m(1),W=[],P=s=>{I.push({name:"pharmacy-warehouse-details",params:{id:s}})},k=async(s=1)=>{var t;y.value=!0;try{const e=u.value?`search=${encodeURIComponent(u.value)}&`:"",c=await A.get(`/api/pharmacy-home/get/warehouses?${e}page=${s}`);c.data.success&&((t=c.data.data)==null?void 0:t.length)>0?(v.value=c.data.data.map(i=>({...i,name_ar:i.name,description_ar:i.description_ar||"",tags:i.tags||[{name_ar:`متصل بأكثر من ${i.connected_pharmacies} صيدلية`,name_en:`Connected to ${i.connected_pharmacies} Pharmacies`}],rating:i.total_rating||0})),r.value=c.data.pagination.last_page||1,n.value=c.data.pagination.current_page||1):(v.value=W,r.value=1,n.value=1,$.add({severity:"warn",summary:g("warning"),detail:g("error.noData"),life:3e3}))}catch(e){v.value=W,r.value=1,n.value=1,$.add({severity:"error",summary:g("error"),detail:g("error.fetchWarehouses"),life:3e3}),console.error("Error fetching warehouses:",e)}finally{y.value=!1}},B=s=>{s.target.src="/path/to/fallback-image.jpg"},j=z(()=>u.value?v.value.filter(s=>s.name_ar.toLowerCase().includes(u.value.toLowerCase())||s.address.toLowerCase().includes(u.value.toLowerCase())):v.value),f=s=>{s>=1&&s<=r.value&&(n.value=s,k(s))};return F(u,R.debounce(()=>{n.value=1,k(1)},300)),U(()=>{k()}),(s,t)=>(l(),o("div",q,[a("div",G,[a("div",J,[a("div",K,[_(d(H),{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),placeholder:d(g)("navbar.search"),class:"w-full p-3 pr-12 text-gray-700 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"},null,8,["modelValue","placeholder"])])]),y.value?(l(),o("div",O,[_(d(Q),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])):j.value.length===0?(l(),o("div",X,p(d(g)("error.noMatchingWarehouses")),1)):(l(),o("div",Y,[(l(!0),o(w,null,C(j.value,e=>{var c,i;return l(),o("div",{onClick:h=>P(e.id),key:e.id,class:"bg-white cursor-pointer rounded-lg shadow-md p-6 border-t-4 border-green-500 flex flex-col"},[a("div",ee,[a("div",te,[t[4]||(t[4]=a("i",{class:"pi pi-briefcase text-green-600 text-xl my-auto"},null,-1)),a("h3",ae,p(e.name_ar),1)]),a("div",se,[t[5]||(t[5]=a("i",{class:"pi pi-star-fill text-yellow-400 text-base"},null,-1)),a("span",le,p(e.rating),1)])]),a("div",re,[(i=(c=e.media)==null?void 0:c[0])!=null&&i.url?(l(),o("img",{key:0,src:e.media[0].url,alt:"Warehouse Logo",class:"w-16 h-16 object-cover rounded-lg",onError:B},null,40,oe)):x("",!0),a("div",null,[a("p",ne,p(e.description_ar),1),a("p",ie,p(e.city),1)])]),a("div",ce,[(l(!0),o(w,null,C(e.tags,h=>(l(),o("span",{key:h.name_en,class:"bg-green-100 text-green-800 text-xs font-medium px-3 py-1 rounded-full"},p(s.appLang==="en"?h.name_en:h.name_ar),1))),128))])],8,Z)}),128))])),!y.value&&r.value>1?(l(),o("div",de,[_(d(b),{disabled:n.value===1,class:"px-4 py-2 bg-white text-gray-600 rounded-lg shadow-sm border border-gray-200 hover:bg-gray-100 transition-colors disabled:opacity-50",onClick:t[1]||(t[1]=e=>f(n.value-1))},{default:L(()=>[...t[6]||(t[6]=[a("i",{class:"pi pi-chevron-left"},null,-1)])]),_:1},8,["disabled"]),(l(!0),o(w,null,C(Math.min(r.value,5),e=>(l(),E(d(b),{key:e,label:e.toString(),class:V(["pagination-button",{active:n.value===e}]),onClick:c=>f(e)},null,8,["label","class","onClick"]))),128)),r.value>5?(l(),o("span",ue,"...")):x("",!0),r.value>5?(l(),E(d(b),{key:1,label:r.value.toString(),class:V(["pagination-button",{active:n.value===r.value}]),onClick:t[2]||(t[2]=e=>f(r.value))},null,8,["label","class"])):x("",!0),_(d(b),{disabled:n.value===r.value,class:"px-4 py-2 bg-white text-gray-600 rounded-lg shadow-sm border border-gray-200 hover:bg-gray-100 transition-colors disabled:opacity-50",onClick:t[3]||(t[3]=e=>f(n.value+1))},{default:L(()=>[...t[7]||(t[7]=[a("i",{class:"pi pi-chevron-right"},null,-1)])]),_:1},8,["disabled"])])):x("",!0),_(d(T))])]))}},me=D(ge,[["__scopeId","data-v-851569e0"]]);export{me as default};
