import{_ as ee,u as te,s as ae,e as se,r,a3 as le,w as oe,a as ne,Y as p,a4 as E,f as m,g as h,m as s,z as n,j as d,R as w,i as ie,t as i,l,F as re,k as de,y as ue,a5 as pe,q as F,x as V,v as ce}from"./index-b2b8894e.js";const ve={class:"grid"},me={class:"col-12"},_e={class:"card p-4 shadow-2 border-round"},he={class:"text-2xl font-bold"},ge={class:"flex gap-2"},fe={class:"p-input-icon-left"},be={class:"card shadow-1 surface-0"},ye={key:0},xe={key:1},we={class:"text-center py-4"},ke={class:"text-xl"},Ce={class:"flex justify-content-center align-items-center py-4"},Te={key:0,class:"p-paginator p-component p-unselectable-text mt-3"},De={class:"p-paginator-left-content"},Ve={class:"p-paginator-current"},$e={class:"p-paginator-right-content"},Be={class:"p-paginator-pages"},Ne=["disabled"],Re=["disabled"],Se=["onClick"],Me=["disabled"],Ie=["disabled"],Pe={class:"p-paginator-rpp-options"},Ue={class:"flex align-items-center justify-content-center"},Ee={__name:"users",setup(Fe){const{t:a}=te(),$=ae(),T=se(),k=r(!0),B=r(""),N=r(null),g=r(!1);r(null);const R=r(null),S=r({}),C=r(""),u=r(1),D=r(0),f=r(10),c=r(0),M=r(0),I=r(0),j=()=>{R.value.exportCSV()},z=o=>{B.value=o,g.value=!0},A=()=>{F.delete(`/api/user/${B.value}`).then(()=>{b(),g.value=!1,T.add({severity:"success",summary:a("success"),detail:a("user.deleteSuccess"),life:3e3})}).catch(o=>{T.add({severity:"error",summary:a("error"),detail:a("user.deleteError"),life:3e3})})},G=()=>{S.value={global:{value:null,matchMode:pe.CONTAINS}}};le(()=>{G()});const b=()=>{k.value=!0,F.get("/api/user",{params:{page:u.value,limit:f.value,search:C.value}}).then(o=>{k.value=!1,N.value=o.data.data,D.value=o.data.pagination.total,c.value=o.data.pagination.last_page,M.value=o.data.pagination.from,I.value=o.data.pagination.to}).catch(o=>{k.value=!1,T.add({severity:"error",summary:a("error"),detail:a("user.loadError"),life:3e3}),console.error("Error fetching data:",o)})};oe(C,o=>{u.value=1,b()});const y=o=>{o>=1&&o<=c.value&&(u.value=o,b())},q=o=>{f.value=o,u.value=1,b()};ne(()=>{b()});const L=()=>{$.push({name:"user-create"})},O=o=>{$.push({name:"user-edit",params:{id:o}})};return(o,t)=>{const Q=p("InputText"),_=p("Button"),W=p("Toolbar"),Y=p("Toast"),v=p("Column"),H=p("Tag"),J=p("ProgressSpinner"),K=p("DataTable"),X=p("Dropdown"),Z=p("Dialog"),x=E("can"),P=E("tooltip");return m(),h("div",ve,[s("div",me,[s("div",_e,[n(W,{class:"mb-4"},{start:d(()=>[s("h2",he,i(l(a)("user.users")),1)]),end:d(()=>[s("div",ge,[s("span",fe,[t[8]||(t[8]=s("i",{class:"pi pi-search"},null,-1)),n(Q,{modelValue:C.value,"onUpdate:modelValue":t[0]||(t[0]=e=>C.value=e),placeholder:l(a)("user.search")},null,8,["modelValue","placeholder"])]),w(n(_,{label:l(a)("user.export"),icon:"pi pi-upload",class:"p-export",onClick:j},null,8,["label"]),[[x,"export users"]]),w(n(_,{label:l(a)("user.new"),icon:"pi pi-plus",class:"p-button-success",onClick:L},null,8,["label"]),[[x,"create users"]])])]),_:1}),n(Y),s("div",be,[w((m(),ie(K,{ref_key:"dt",ref:R,value:N.value,loading:k.value,"data-key":"id",paginator:!1,rows:f.value,filters:S.value,totalRecords:D.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[s("div",we,[t[9]||(t[9]=s("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),s("p",ke,i(l(a)("user.noData")),1)])]),loading:d(()=>[s("div",Ce,[n(J,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[n(v,{"selection-mode":"multiple","header-style":"width: 3rem"}),n(v,{field:"name",header:l(a)("user.name"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(e=>[V(i(e.data.name),1)]),_:1},8,["header"]),n(v,{field:"email",header:l(a)("user.email"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(e=>[V(i(e.data.email),1)]),_:1},8,["header"]),n(v,{field:"phone",header:l(a)("user.phone"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(e=>[V(i(e.data.phone),1)]),_:1},8,["header"]),n(v,{field:"type_description",header:l(a)("user.type"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:d(e=>[n(H,{value:e.data.type_description,severity:{Admin:"info",Customer:"success",Guest:"danger"}[e.data.type_description]||"warning"},null,8,["value","severity"])]),_:1},8,["header"]),n(v,{field:"roles",header:l(a)("user.roles"),"header-style":"width:20%; min-width:15rem;"},{body:d(e=>[e.data.roles&&e.data.roles.length?(m(),h("div",ye,i(e.data.roles[0].name),1)):(m(),h("span",xe,"-"))]),_:1},8,["header"]),n(v,{header:l(a)("actions"),"header-style":"min-width:10rem;"},{body:d(e=>[w(n(_,{icon:"pi pi-pencil",class:"p-detail",onClick:U=>O(e.data.id)},null,8,["onClick"]),[[x,"edit users"],[P,l(a)("edit"),void 0,{top:!0}]]),w(n(_,{icon:"pi pi-trash mx-2",class:"p-delete",onClick:U=>z(e.data.id)},null,8,["onClick"]),[[x,"delete users"],[P,l(a)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[x,"list users"]]),c.value>0?(m(),h("div",Te,[s("div",De,[s("span",Ve,i(l(a)("showing"))+" "+i(M.value)+" "+i(l(a)("to"))+" "+i(I.value)+" "+i(l(a)("of"))+" "+i(D.value)+" "+i(l(a)("entries")),1)]),s("div",$e,[s("span",Be,[s("button",{class:"p-paginator-first p-paginator-element p-link",disabled:u.value===1,onClick:t[1]||(t[1]=e=>y(1))},[...t[10]||(t[10]=[s("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)])],8,Ne),s("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:u.value===1,onClick:t[2]||(t[2]=e=>y(u.value-1))},[...t[11]||(t[11]=[s("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)])],8,Re),(m(!0),h(re,null,de(c.value,e=>(m(),h("button",{key:e,class:ce(["p-paginator-page p-paginator-element p-link",{"p-highlight":u.value===e}]),onClick:U=>y(e)},i(e),11,Se))),128)),s("button",{class:"p-paginator-next p-paginator-element p-link",disabled:u.value===c.value,onClick:t[3]||(t[3]=e=>y(u.value+1))},[...t[12]||(t[12]=[s("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)])],8,Me),s("button",{class:"p-paginator-last p-paginator-element p-link",disabled:u.value===c.value,onClick:t[4]||(t[4]=e=>y(c.value))},[...t[13]||(t[13]=[s("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)])],8,Ie)]),s("span",Pe,[n(X,{modelValue:f.value,"onUpdate:modelValue":t[5]||(t[5]=e=>f.value=e),options:[5,10,20,30],onChange:q,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])):ue("",!0)]),n(Z,{visible:g.value,"onUpdate:visible":t[7]||(t[7]=e=>g.value=e),style:{width:"450px"},header:l(a)("user.deleteConfirmTitle"),modal:!0},{footer:d(()=>[n(_,{label:l(a)("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[6]||(t[6]=e=>g.value=!1)},null,8,["label"]),n(_,{label:l(a)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:A},null,8,["label"])]),default:d(()=>[s("div",Ue,[t[14]||(t[14]=s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),s("span",null,i(l(a)("user.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},ze=ee(Ee,[["__scopeId","data-v-22f407f1"]]);export{ze as default};
