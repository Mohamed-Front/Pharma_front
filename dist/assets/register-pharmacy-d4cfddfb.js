import{a2 as O,u as Y,a as Z,z as H,r as x,o as K,Y as k,c as F,d as Q,e as l,h as d,g as t,t as n,Z as m,$ as g,A as p,C as c,ae as W,F as X,y as ee,D as y,B as te,i as ae,b as B,_ as oe}from"./index-2cd76906.js";const re={class:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center"},se={class:"w-full max-w-4xl bg-white rounded-2xl p-8"},ne={class:"text-3xl font-bold text-center text-gray-800 mb-8 bg-gradient-to-r from-green-500 to-teal-500 bg-clip-text text-transparent"},ie={key:0,class:"space-y-8"},le={class:"grid gap-6 lg:grid-cols-2 grid-cols-1"},de={class:"relative"},ce={for:"pharmacyName",class:"block text-sm font-medium text-gray-700 mb-1"},ue={key:0,class:"text-red-500 mt-1 block"},me={class:"relative"},pe={for:"country",class:"block text-sm font-medium text-gray-700 mb-1"},ge={key:0,class:"text-red-500 mt-1 block"},_e={class:"relative"},fe={for:"city",class:"block text-sm font-medium text-gray-700 mb-1"},be=["value"],he={key:0,class:"text-red-500 mt-1 block"},ye={class:"relative"},ve={for:"address",class:"block text-sm font-medium text-gray-700 mb-1"},we={key:0,class:"text-red-500 mt-1 block"},xe={class:"relative"},ke={for:"phone",class:"block text-sm font-medium text-gray-700 mb-1"},$e={key:0,class:"text-red-500 mt-1 block"},qe={class:"relative"},Ce={for:"password",class:"block text-sm font-medium text-gray-700 mb-1"},Ve={key:0,class:"text-red-500 mt-1 block"},Ie={class:"relative"},De={for:"passwordConfirmation",class:"block text-sm font-medium text-gray-700 mb-1"},Ue={key:0,class:"text-red-500 mt-1 block"},Ne={class:"relative"},Pe={for:"nationalIdNumber",class:"block text-sm font-medium text-gray-700 mb-1"},Fe={key:0,class:"text-red-500 mt-1 block"},Be={class:"relative"},Te={for:"licenseNumber",class:"block text-sm font-medium text-gray-700 mb-1"},je={key:0,class:"text-red-500 mt-1 block"},Me={class:"relative"},Se={for:"email",class:"block text-sm font-medium text-gray-700 mb-1"},ze={key:0,class:"text-red-500 mt-1 block"},Ee={class:"space-y-6"},Ge={class:"text-xl font-semibold text-gray-800 bg-gradient-to-r from-green-500 to-teal-500 bg-clip-text text-transparent"},Le={class:"relative"},Ae={class:"block text-sm font-medium text-gray-700 mb-1"},Re={class:"space-y-6"},Je={class:"text-xl font-semibold text-gray-800 bg-gradient-to-r from-green-500 to-teal-500 bg-clip-text text-transparent"},Oe={class:"relative"},Ye={class:"block text-sm font-medium text-gray-700 mb-1"},Ze={key:0,class:"w-full h-80 rounded-lg overflow-hidden shadow-md"},He=["src"],Ke={class:"block my-2 text-sm text-center font-medium text-gray-700 mb-1"},Qe={key:0,class:"p-4"},We={class:"relative group"},Xe=["src"],et={class:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-0 rounded-lg group-hover:bg-opacity-40 transition-all duration-300"},tt={class:"space-x-3 transform translate-y-4 opacity-0 group-hover:opacity-100 group-hover:translate-y-0 transition-all duration-300"},at={class:"mt-2 text-sm text-center text-gray-500"},ot={key:1,class:"flex flex-col items-center justify-center h-full p-4"},rt={class:"mb-1 text-sm text-center text-gray-600"},st={class:"font-medium text-green-500"},nt={key:0,class:"text-red-500 mt-1 block"},it={class:"flex justify-end mt-8"},lt=["disabled"],dt={key:1,class:"text-center"},ct={class:"p-8 rounded-2xl bg-green-50 shadow-md"},ut={class:"mb-2 text-2xl font-bold text-green-800"},mt={class:"mb-6 text-gray-600"},pt={class:"p-6 mb-6 bg-white border border-green-200 rounded-lg shadow-sm"},gt={class:"text-sm font-medium text-gray-500"},_t={class:"mt-1 text-2xl font-bold text-green-600"},ft={class:"mb-6 text-sm text-gray-500"},bt=O({__name:"register-pharmacy",setup(ht){const{t:i}=Y(),b=Z(),T=H(),v=x([]),j=()=>{B.get("api/city?type=pharmacy&status=1").then(o=>{v.value=o.data.data})};K(()=>{j()});const e=k({name:"",country:"سوريا",city:"",address:"",phone:"",password:"",password_confirmation:"",national_id_number:"",license_number:"",email:"",practice_certificate:null,practice_certificate_name:"",practice_certificate_preview:null,pharmacy_logo:null,pharmacy_logo_name:"",pharmacy_logo_preview:null,lat:"",long:"",location_link:""}),a=k({name:"",country:"",city:"",address:"",phone:"",password:"",password_confirmation:"",national_id_number:"",license_number:"",email:"",practice_certificate:"",pharmacy_logo:"",lat:"",long:""}),_=k({number:"",name:"",email:"",createdAt:""}),h=x(!1),f=x({practice_certificate:!1,pharmacy_logo:!1}),$=()=>{e.phone.trim()?e.phone.length>15?a.phone=i("auth.phone_too_long"):a.phone="":a.phone=i("auth.phone_required")},q=()=>{e.password.trim()?e.password.length<8?a.password=i("auth.password_too_short"):a.password="":a.password=i("auth.password_required"),w()},w=()=>{e.password_confirmation.trim()?e.password!==e.password_confirmation?a.password_confirmation=i("auth.passwords_dont_match"):a.password_confirmation="":a.password_confirmation=i("auth.confirm_password_required")},M=()=>{e.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)?a.email="":a.email=i("auth.invalid_email"):a.email=i("auth.email_required")},C=F(()=>e.name.trim()!==""&&e.country.trim()!==""&&e.city.trim()!==""&&e.address.trim()!==""&&e.phone.trim()!==""&&e.phone.length<=15&&e.password.trim()!==""&&e.password.length>=8&&e.password===e.password_confirmation&&!a.name&&!a.country&&!a.city&&!a.address&&!a.phone&&!a.password&&!a.password_confirmation&&!a.email),S=o=>{f.value[o]=!0},z=o=>{f.value[o]=!1},V=F(()=>{if(e.location_link)return`https://www.google.com/maps?q=${e.lat},${e.long}&hl=es;z=14&output=embed`}),I=(o,r)=>{var s,D,U;const u=((D=(s=o.dataTransfer)==null?void 0:s.files)==null?void 0:D[0])||((U=o.target.files)==null?void 0:U[0]);if(u){if(!u.type.match("image.*")){b.add({severity:"error",summary:i("error"),detail:i("auth.invalid_image_type"),life:3e3});return}if(u.size>1024*1024){b.add({severity:"error",summary:i("error"),detail:i("auth.image_too_large"),life:3e3});return}e[r]=u,e[`${r}_name`]=u.name;const N=new FileReader;N.onload=J=>{var P;e[`${r}_preview`]=(P=J.target)==null?void 0:P.result},N.readAsDataURL(u),f.value[r]=!1}},E=o=>{e[o]=null,e[`${o}_name`]="",e[`${o}_preview`]=null;const r=document.getElementById(o);r&&(r.value="")},G=o=>{const r=document.getElementById(o);r&&r.click()},L=()=>{const o=v.value.find(r=>r.name===e.city);o&&(e.lat=o.lat.toString(),e.long=o.long.toString(),e.location_link=`https://www.google.com/maps?q=${o.lat},${o.long}`)},A=async()=>{var r,u;if(h.value=!0,e.name.trim()||(a.name=i("auth.pharmacy_name_required")),e.country.trim()||(a.country=i("auth.country_required")),e.city.trim()||(a.city=i("auth.city_required")),e.address.trim()||(a.address=i("auth.address_required")),$(),q(),w(),!C.value)return;const o=new FormData;o.append("name",e.name),o.append("country",e.country),o.append("city",e.city),o.append("address",e.address),o.append("phone",e.phone),o.append("password",e.password),o.append("password_confirmation",e.password_confirmation),o.append("email",e.email),e.national_id_number&&o.append("national_id_number",e.national_id_number),e.license_number&&o.append("license_number",e.license_number),e.practice_certificate&&o.append("practice_certificate",e.practice_certificate),e.pharmacy_logo&&o.append("pharmacy_logo",e.pharmacy_logo),e.lat&&o.append("lat",e.lat),e.long&&o.append("long",e.long),e.location_link&&o.append("location_link",e.location_link);try{const s=await B.post("/api/pharmacy-request",o,{headers:{"Content-Type":"multipart/form-data"}});_.number=s.data.data.number,_.name=s.data.data.name,_.email=s.data.data.email,_.createdAt=s.data.data.created_at,b.add({severity:"success",summary:i("success"),detail:i("auth.pharmacy_created"),life:3e3})}catch(s){console.error("Error submitting form:",s),b.add({severity:"error",summary:i("error"),detail:((u=(r=s.response)==null?void 0:r.data)==null?void 0:u.message)||i("auth.pharmacy_creation_failed"),life:3e3})}},R=()=>{e.name="",e.country="",e.city="",e.address="",e.phone="",e.password="",e.password_confirmation="",e.national_id_number="",e.license_number="",e.email="",e.practice_certificate=null,e.practice_certificate_name="",e.practice_certificate_preview=null,e.pharmacy_logo=null,e.pharmacy_logo_name="",e.pharmacy_logo_preview=null,e.lat="",e.long="",e.location_link="",a.name="",a.country="",a.city="",a.address="",a.phone="",a.password="",a.password_confirmation="",a.national_id_number="",a.license_number="",a.email="",a.practice_certificate="",a.pharmacy_logo="",a.lat="",a.long="",h.value=!1,T.push("/")};return(o,r)=>{const u=Q("Toast");return l(),d("div",re,[t("div",se,[t("h2",ne,n(o.$t("auth.register_pharmacy")),1),!h.value||!_.number?(l(),d("div",ie,[t("div",le,[t("div",de,[t("label",ce,n(o.$t("auth.pharmacy_name"))+" * ",1),m(t("input",{"onUpdate:modelValue":r[0]||(r[0]=s=>e.name=s),id:"pharmacyName",name:"name",type:"text",required:"",class:p(["w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all duration-300",{"border-red-500":a.name}]),placeholder:"أدخل اسم الصيدلية"},null,2),[[g,e.name]]),a.name?(l(),d("small",ue,n(a.name),1)):c("",!0)]),t("div",me,[t("label",pe,n(o.$t("auth.country"))+" * ",1),m(t("input",{"onUpdate:modelValue":r[1]||(r[1]=s=>e.country=s),id:"country",name:"country",readonly:"",type:"text",required:"",class:p(["w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all duration-300",{"border-red-500":a.country}]),placeholder:"أدخل اسم البلد"},null,2),[[g,e.country]]),a.country?(l(),d("small",ge,n(a.country),1)):c("",!0)]),t("div",_e,[t("label",fe,n(o.$t("auth.city"))+" * ",1),m(t("select",{"onUpdate:modelValue":r[2]||(r[2]=s=>e.city=s),id:"city",name:"city",required:"",onChange:L,class:p(["w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all duration-300",{"border-red-500":a.city}])},[r[16]||(r[16]=t("option",{value:"",disabled:"",selected:""},"اختر المدينة",-1)),(l(!0),d(X,null,ee(v.value,s=>(l(),d("option",{key:s.name,value:s.name},n(s.name),9,be))),128))],34),[[W,e.city]]),a.city?(l(),d("small",he,n(a.city),1)):c("",!0)]),t("div",ye,[t("label",ve,n(o.$t("auth.address"))+" * ",1),m(t("input",{"onUpdate:modelValue":r[3]||(r[3]=s=>e.address=s),id:"address",name:"address",type:"text",required:"",class:p(["w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all duration-300",{"border-red-500":a.address}]),placeholder:"أدخل العنوان"},null,2),[[g,e.address]]),a.address?(l(),d("small",we,n(a.address),1)):c("",!0)]),t("div",xe,[t("label",ke,n(o.$t("auth.phone"))+" * ",1),m(t("input",{"onUpdate:modelValue":r[4]||(r[4]=s=>e.phone=s),id:"phone",name:"phone",type:"tel",required:"",class:p(["w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all duration-300",{"border-red-500":a.phone}]),placeholder:"أدخل رقم الهاتف",onInput:$},null,34),[[g,e.phone]]),a.phone?(l(),d("small",$e,n(a.phone),1)):c("",!0)]),t("div",qe,[t("label",Ce,n(o.$t("auth.password"))+" * ",1),m(t("input",{"onUpdate:modelValue":r[5]||(r[5]=s=>e.password=s),id:"password",name:"password",type:"password",required:"",class:p(["w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all duration-300",{"border-red-500":a.password}]),placeholder:"أدخل كلمة السر",onInput:q},null,34),[[g,e.password]]),a.password?(l(),d("small",Ve,n(a.password),1)):c("",!0)]),t("div",Ie,[t("label",De,n(o.$t("auth.confirm_password"))+" * ",1),m(t("input",{"onUpdate:modelValue":r[6]||(r[6]=s=>e.password_confirmation=s),id:"passwordConfirmation",name:"password_confirmation",type:"password",required:"",class:p(["w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all duration-300",{"border-red-500":a.password_confirmation}]),placeholder:"تأكيد كلمة السر",onInput:w},null,34),[[g,e.password_confirmation]]),a.password_confirmation?(l(),d("small",Ue,n(a.password_confirmation),1)):c("",!0)]),t("div",Ne,[t("label",Pe,n(o.$t("auth.national_id_number")),1),m(t("input",{"onUpdate:modelValue":r[7]||(r[7]=s=>e.national_id_number=s),id:"nationalIdNumber",name:"national_id_number",type:"text",class:p(["w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all duration-300",{"border-red-500":a.national_id_number}]),placeholder:"أدخل رقم الهوية"},null,2),[[g,e.national_id_number]]),a.national_id_number?(l(),d("small",Fe,n(a.national_id_number),1)):c("",!0)]),t("div",Be,[t("label",Te,n(o.$t("auth.license_number")),1),m(t("input",{"onUpdate:modelValue":r[8]||(r[8]=s=>e.license_number=s),id:"licenseNumber",name:"license_number",type:"text",class:p(["w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all duration-300",{"border-red-500":a.license_number}]),placeholder:"أدخل رقم الترخيص"},null,2),[[g,e.license_number]]),a.license_number?(l(),d("small",je,n(a.license_number),1)):c("",!0)]),t("div",Me,[t("label",Se,n(o.$t("auth.email")),1),m(t("input",{"onUpdate:modelValue":r[9]||(r[9]=s=>e.email=s),id:"email",name:"email",type:"email",class:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all duration-300",placeholder:"أدخل الإيميل",onInput:M},null,544),[[g,e.email]]),a.email?(l(),d("small",ze,n(a.email),1)):c("",!0)])]),t("div",Ee,[t("h4",Ge,n(o.$t("auth.location_information")),1),t("div",Le,[t("label",Ae,n(o.$t("auth.location")),1)])]),t("div",Re,[t("h4",Je,n(o.$t("auth.owner_information")),1),t("div",Oe,[t("label",Ye,n(o.$t("auth.location")),1),V.value?(l(),d("div",Ze,[t("iframe",{src:V.value,width:"100%",height:"100%",style:{border:"0"},loading:"lazy",referrerpolicy:"no-referrer-when-downgrade"},null,8,He)])):c("",!0),t("div",null,[t("label",Ke,n(o.$t("auth.pharmacy_logo")),1),t("label",{onDragover:r[13]||(r[13]=y(s=>S("pharmacy_logo"),["prevent"])),onDragleave:r[14]||(r[14]=s=>z("pharmacy_logo")),onDrop:r[15]||(r[15]=y(s=>I(s,"pharmacy_logo"),["prevent"])),class:p([{"border-green-400 bg-green-50":f.value.pharmacy_logo,"border-gray-200":!f.value.pharmacy_logo},"w-full h-28 rounded-lg cursor-pointer transition-all duration-300 hover:border-green-400 border"])},[t("input",{type:"file",onChange:r[10]||(r[10]=s=>I(s,"pharmacy_logo")),accept:"image/*",class:"hidden",id:"pharmacy_logo"},null,32),e.pharmacy_logo_preview?(l(),d("div",Qe,[t("div",We,[t("img",{src:e.pharmacy_logo_preview,alt:"Pharmacy Logo Preview",class:"object-cover w-full h-32 rounded-lg shadow-md group-hover:scale-105 transition-transform duration-300"},null,8,Xe),t("div",et,[t("div",tt,[t("button",{type:"button",onClick:r[11]||(r[11]=y(s=>E("pharmacy_logo"),["stop"])),class:"p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition"},[...r[17]||(r[17]=[t("i",{class:"text-sm pi pi-trash"},null,-1)])]),t("button",{type:"button",onClick:r[12]||(r[12]=y(s=>G("pharmacy_logo"),["stop"])),class:"p-2 bg-white text-gray-700 rounded-full hover:bg-gray-100 transition"},[...r[18]||(r[18]=[t("i",{class:"text-sm pi pi-pencil"},null,-1)])])])])]),t("p",at,n(o.$t("auth.click_or_drag_to_change_photo")),1)])):(l(),d("div",ot,[r[19]||(r[19]=t("div",{class:"p-3 mb-2 bg-green-100 rounded-full"},[t("i",{class:"text-xl text-green-500 pi pi-image"})],-1)),t("p",rt,[t("span",st,n(o.$t("auth.click_to_upload")),1),te(" "+n(o.$t("auth.or_drag_and_drop")),1)]),r[20]||(r[20]=t("p",{class:"text-xs text-gray-400"},"SVG, PNG, JPG or GIF (max. 1MB)",-1))]))],34),a.pharmacy_logo?(l(),d("small",nt,n(a.pharmacy_logo),1)):c("",!0)])])]),t("div",it,[t("button",{onClick:A,type:"button",class:"px-6 py-2 bg-gradient-to-r from-green-500 to-teal-500 text-white font-semibold rounded-lg shadow-md hover:from-green-600 hover:to-teal-600 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-offset-2 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!C.value},n(o.$t("auth.create_account")),9,lt)])])):c("",!0),h.value&&_.number?(l(),d("div",dt,[t("div",ct,[r[21]||(r[21]=t("div",{class:"flex items-center justify-center w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full"},[t("i",{class:"text-3xl text-green-500 pi pi-check"})],-1)),t("h3",ut,n(o.$t("auth.request_submitted")),1),t("p",mt,n(o.$t("auth.request_submitted_description")),1),t("div",pt,[t("div",gt,n(o.$t("auth.request_number")),1),t("div",_t,n(_.number),1)]),t("p",ft,n(o.$t("auth.request_submitted_note")),1),t("button",{onClick:R,class:"px-6 py-2 bg-gradient-to-r from-green-500 to-teal-500 text-white font-semibold rounded-lg shadow-md hover:from-green-600 hover:to-teal-600 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-offset-2 transition-all duration-300"},n(o.$t("auth.back_to_home")),1)])])):c("",!0)]),ae(u)])}}});const vt=oe(bt,[["__scopeId","data-v-899c59a0"]]);export{vt as default};
