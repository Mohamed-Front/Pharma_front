import{_ as we,u as qe,s as Ce,e as Re,r as d,a3 as je,w as ae,a as Te,Y as p,a4 as te,f as g,g as M,m as o,z as l,j as r,l as s,a5 as De,q as x,t as n,y as z,i as se,x as f,R as k,F as $e,k as Ve,v as Me}from"./index-b2b8894e.js";const Pe={class:"grid"},Se={class:"col-12"},Ee={class:"p-4 card shadow-2 border-round"},Ie={class:"text-2xl font-bold"},Ue={class:"flex gap-2"},Be={key:0,class:"p-input-icon-left"},Ne={class:"py-4 text-center"},ze={class:"text-xl"},Fe={class:"flex py-4 justify-content-center align-items-center"},Ae={class:"py-4 text-center"},Ge={class:"text-xl"},Le={class:"flex py-4 justify-content-center align-items-center"},We={key:0,class:"mt-3 p-paginator p-component p-unselectable-text"},Oe={class:"p-paginator-left-content"},Qe={class:"p-paginator-current"},Ye={class:"p-paginator-right-content"},He={class:"p-paginator-pages"},Je=["disabled"],Ke=["disabled"],Xe=["onClick"],Ze=["disabled"],ea=["disabled"],aa={class:"p-paginator-rpp-options"},ta={class:"flex align-items-center justify-content-center"},sa={class:"flex align-items-center justify-content-center"},la={class:"flex align-items-center justify-content-center"},oa={class:"gap-3"},ra={class:"flex align-items-center"},ia={class:"gap-2 flex-column"},na={for:"rejectedMessage"},da={__name:"index",setup(ca){const{t:e}=qe(),F=Ce(),v=Re(),h=d(0),A=d([]),P=d(!0),G=d(""),_=d(!1),S=d(!0),L=d(""),W=d(""),O=d(""),Q=d(null),w=d(!1),q=d(!1),C=d(!1),I=d(null),Y=d({}),R=d(""),j=d(""),m=d(1),U=d(0),T=d(10),b=d(0),H=d(0),J=d(0),le=()=>{I.value&&I.value.exportCSV()},oe=i=>{G.value=i,_.value=!0},re=()=>{x.delete(`/api/pharmacy/${G.value}`).then(()=>{B(),_.value=!1,v.add({severity:"success",summary:e("success"),detail:e("pharmacy.deleteSuccess"),life:3e3})}).catch(i=>{_.value=!1,v.add({severity:"error",summary:e("error"),detail:e("pharmacy.deleteError"),life:3e3}),console.error("Delete pharmacy error:",i)})},ie=i=>{L.value=i,w.value=!0},ne=i=>{W.value=i,j.value="",q.value=!0},de=i=>{O.value=i,C.value=!0},ce=()=>{x.delete(`/api/pharmacy-request/${L.value}`).then(()=>{y(),w.value=!1,v.add({severity:"success",summary:e("success"),detail:e("pharmacyRequest.deleteSuccess"),life:3e3})}).catch(()=>{v.add({severity:"error",summary:e("error"),detail:e("pharmacyRequest.deleteError"),life:3e3})})},ue=()=>{x.post(`/api/pharmacy-request/accept/${O.value}`).then(()=>{y(),C.value=!1,v.add({severity:"success",summary:e("success"),detail:e("pharmacyRequest.acceptSuccess"),life:3e3})}).catch(()=>{v.add({severity:"error",summary:e("error"),detail:e("pharmacyRequest.acceptError"),life:3e3})})},pe=()=>{if(!j.value.trim()){v.add({severity:"error",summary:e("error"),detail:e("pharmacyRequest.rejectedMessageRequired"),life:3e3});return}x.post(`/api/pharmacy-request/reject/${W.value}`,{rejected_message:j.value}).then(()=>{y(),q.value=!1,v.add({severity:"success",summary:e("success"),detail:e("pharmacyRequest.rejectSuccess"),life:3e3})}).catch(()=>{v.add({severity:"error",summary:e("error"),detail:e("pharmacyRequest.rejectError"),life:3e3})})},me=i=>{F.push({name:"pharmacy_request_show",params:{id:i}})},ve=()=>{Y.value={global:{value:null,matchMode:De.CONTAINS}}};je(()=>{ve()});const B=()=>{P.value=!0,x.get("/api/pharmacy").then(i=>{A.value=i.data.data||[],P.value=!1}).catch(i=>{P.value=!1,v.add({severity:"error",summary:e("error"),detail:e("pharmacy.loadError"),life:3e3}),console.error("Error fetching pharmacies:",i)})},y=()=>{S.value=!0,x.get("/api/pharmacy-request",{params:{page:m.value,limit:T.value,search:R.value}}).then(i=>{S.value=!1,Q.value=i.data.data;const a=i.data.pagination||{};U.value=a.total||0,b.value=a.last_page||1,H.value=a.from||0,J.value=a.to||0}).catch(i=>{S.value=!1,v.add({severity:"error",summary:e("error"),detail:e("pharmacyRequest.loadError"),life:3e3}),console.error("Error fetching requests:",i)})};ae(R,()=>{h.value===1&&(m.value=1,y())});const D=i=>{i>=1&&i<=b.value&&(m.value=i,y())},he=i=>{T.value=i,m.value=1,y()};Te(()=>{h.value===0?B():y()}),ae(h,i=>{i===0?B():(R.value="",m.value=1,y())});const ye=()=>{F.push({name:"add-pharmacy"})};return(i,a)=>{const fe=p("InputText"),c=p("Button"),be=p("Toolbar"),u=p("Column"),K=p("Tag"),X=p("ProgressSpinner"),Z=p("DataTable"),ee=p("TabPanel"),ge=p("Toast"),_e=p("Dropdown"),xe=p("TabView"),E=p("Dialog"),ke=p("Textarea"),$=te("tooltip"),N=te("can");return g(),M("div",Pe,[o("div",Se,[o("div",Ee,[l(be,{class:"mb-4"},{start:r(()=>[o("h2",Ie,n(h.value===0?s(e)("pharmacy.title"):s(e)("pharmacyRequest.title")),1)]),end:r(()=>[o("div",Ue,[h.value===1?(g(),M("span",Be,[a[16]||(a[16]=o("i",{class:"pi pi-search"},null,-1)),l(fe,{modelValue:R.value,"onUpdate:modelValue":a[0]||(a[0]=t=>R.value=t),placeholder:s(e)("pharmacyRequest.search")},null,8,["modelValue","placeholder"])])):z("",!0),h.value===1?(g(),se(c,{key:1,label:s(e)("pharmacyRequest.export"),icon:"pi pi-upload",class:"p-button-outlined p-button-sm",onClick:le},null,8,["label"])):z("",!0),l(c,{label:s(e)("pharmacyRequest.new"),icon:"pi pi-plus",class:"p-button-success",onClick:ye},null,8,["label"])])]),_:1}),l(xe,{activeIndex:h.value,"onUpdate:activeIndex":a[6]||(a[6]=t=>h.value=t)},{default:r(()=>[l(ee,{header:s(e)("pharmacy.tabPharmacies")},{default:r(()=>[l(Z,{value:A.value,loading:P.value,responsiveLayout:"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:r(()=>[o("div",Ne,[a[17]||(a[17]=o("i",{class:"mb-2 text-2xl pi pi-exclamation-circle"},null,-1)),o("p",ze,n(s(e)("pharmacy.noData")),1)])]),loading:r(()=>[o("div",Fe,[l(X,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:r(()=>[l(u,{field:"name",header:s(e)("pharmacy.name"),sortable:!0},{body:r(t=>[f(n(t.data.name),1)]),_:1},8,["header"]),l(u,{field:"phone",header:s(e)("pharmacy.phone"),sortable:!0},{body:r(t=>[f(n(t.data.phone),1)]),_:1},8,["header"]),l(u,{field:"city",header:s(e)("pharmacy.city"),sortable:!0},{body:r(t=>[f(n(t.data.city||"-"),1)]),_:1},8,["header"]),l(u,{field:"address",header:s(e)("pharmacy.address"),sortable:!0},{body:r(t=>[f(n(t.data.address),1)]),_:1},8,["header"]),l(u,{field:"status_description",header:s(e)("pharmacy.status")},{body:r(t=>[l(K,{value:t.data.status_description,severity:t.data.status===1?"success":"danger"},null,8,["value","severity"])]),_:1},8,["header"]),l(u,{header:s(e)("actions"),"header-style":"min-width:8rem;"},{body:r(t=>[k(l(c,{icon:"pi pi-trash",class:"mr-2 p-delete",onClick:V=>oe(t.data.id)},null,8,["onClick"]),[[$,s(e)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading"])]),_:1},8,["header"]),l(ee,{header:s(e)("pharmacyRequest.tabRequests")},{default:r(()=>[l(ge),k((g(),se(Z,{ref_key:"dt",ref:I,value:Q.value,loading:S.value,"data-key":"id",paginator:!1,rows:T.value,filters:Y.value,totalRecords:U.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:r(()=>[o("div",Ae,[a[18]||(a[18]=o("i",{class:"mb-2 text-2xl pi pi-exclamation-circle"},null,-1)),o("p",Ge,n(s(e)("pharmacyRequest.noData")),1)])]),loading:r(()=>[o("div",Le,[l(X,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:r(()=>[l(u,{"selection-mode":"multiple","header-style":"width: 3rem"}),l(u,{field:"number",header:s(e)("pharmacyRequest.number"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:r(t=>[f(n(t.data.number),1)]),_:1},8,["header"]),l(u,{field:"name",header:s(e)("pharmacyRequest.name"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:r(t=>[f(n(t.data.name),1)]),_:1},8,["header"]),l(u,{field:"email",header:s(e)("pharmacyRequest.email"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:r(t=>[f(n(t.data.email),1)]),_:1},8,["header"]),l(u,{field:"address",header:s(e)("pharmacyRequest.address"),sortable:!0,"header-style":"width:20%; min-width:15rem;"},{body:r(t=>[f(n(t.data.address),1)]),_:1},8,["header"]),l(u,{field:"status_description",header:s(e)("pharmacyRequest.status"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:r(t=>[l(K,{value:t.data.status_description,severity:{active:"success",pending:"warning",rejected:"danger"}[t.data.status_description]||"danger"},null,8,["value","severity"])]),_:1},8,["header"]),l(u,{header:s(e)("actions"),"header-style":"min-width:15rem;"},{body:r(t=>[k(l(c,{icon:"pi pi-eye",class:"mr-2 p-detail",onClick:V=>me(t.data.id)},null,8,["onClick"]),[[$,s(e)("view"),void 0,{top:!0}]]),k(l(c,{icon:"pi pi-check",class:"mr-2 p-show",onClick:V=>de(t.data.id)},null,8,["onClick"]),[[N,"accept pharmacy requests"],[$,s(e)("accept"),void 0,{top:!0}]]),k(l(c,{icon:"pi pi-times",class:"mr-2 p-delete",onClick:V=>ne(t.data.id),disabled:t.data.status_description==="active"},null,8,["onClick","disabled"]),[[N,"reject pharmacy requests"],[$,s(e)("reject"),void 0,{top:!0}]]),k(l(c,{icon:"pi pi-trash",class:"mr-2 p-delete",onClick:V=>ie(t.data.number)},null,8,["onClick"]),[[$,s(e)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[N,"list pharmacy requests"]]),b.value>0?(g(),M("div",We,[o("div",Oe,[o("span",Qe,n(s(e)("showing"))+" "+n(H.value)+" "+n(s(e)("to"))+" "+n(J.value)+" "+n(s(e)("of"))+" "+n(U.value)+" "+n(s(e)("entries")),1)]),o("div",Ye,[o("span",He,[o("button",{class:"p-paginator-first p-paginator-element p-link",disabled:m.value===1,onClick:a[1]||(a[1]=t=>D(1))},[...a[19]||(a[19]=[o("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)])],8,Je),o("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:m.value===1,onClick:a[2]||(a[2]=t=>D(m.value-1))},[...a[20]||(a[20]=[o("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)])],8,Ke),(g(!0),M($e,null,Ve(b.value,t=>(g(),M("button",{key:t,class:Me(["p-paginator-page p-paginator-element p-link",{"p-highlight":m.value===t}]),onClick:V=>D(t)},n(t),11,Xe))),128)),o("button",{class:"p-paginator-next p-paginator-element p-link",disabled:m.value===b.value,onClick:a[3]||(a[3]=t=>D(m.value+1))},[...a[21]||(a[21]=[o("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)])],8,Ze),o("button",{class:"p-paginator-last p-paginator-element p-link",disabled:m.value===b.value,onClick:a[4]||(a[4]=t=>D(b.value))},[...a[22]||(a[22]=[o("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)])],8,ea)]),o("span",aa,[l(_e,{modelValue:T.value,"onUpdate:modelValue":a[5]||(a[5]=t=>T.value=t),options:[5,10,20,30],onChange:he,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])):z("",!0)]),_:1},8,["header"])]),_:1},8,["activeIndex"]),l(E,{visible:_.value,"onUpdate:visible":a[8]||(a[8]=t=>_.value=t),style:{width:"450px"},header:s(e)("pharmacy.deleteConfirmTitle"),modal:!0},{footer:r(()=>[l(c,{label:s(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:a[7]||(a[7]=t=>_.value=!1)},null,8,["label"]),l(c,{label:s(e)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:re},null,8,["label"])]),default:r(()=>[o("div",ta,[a[23]||(a[23]=o("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),o("span",null,n(s(e)("pharmacy.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"]),l(E,{visible:w.value,"onUpdate:visible":a[10]||(a[10]=t=>w.value=t),style:{width:"450px"},header:s(e)("pharmacyRequest.deleteConfirmTitle"),modal:!0},{footer:r(()=>[l(c,{label:s(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:a[9]||(a[9]=t=>w.value=!1)},null,8,["label"]),l(c,{label:s(e)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:ce},null,8,["label"])]),default:r(()=>[o("div",sa,[a[24]||(a[24]=o("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),o("span",null,n(s(e)("pharmacyRequest.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"]),l(E,{visible:C.value,"onUpdate:visible":a[12]||(a[12]=t=>C.value=t),style:{width:"450px"},header:s(e)("pharmacyRequest.acceptConfirmTitle"),modal:!0},{footer:r(()=>[l(c,{label:s(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:a[11]||(a[11]=t=>C.value=!1)},null,8,["label"]),l(c,{label:s(e)("yes"),icon:"pi pi-check",class:"p-button-text p-button-success",onClick:ue},null,8,["label"])]),default:r(()=>[o("div",la,[a[25]||(a[25]=o("i",{class:"mr-3 pi pi-check-circle",style:{"font-size":"2rem",color:"var(--green-500)"}},null,-1)),o("span",null,n(s(e)("pharmacyRequest.acceptConfirmMessage")),1)])]),_:1},8,["visible","header"]),l(E,{visible:q.value,"onUpdate:visible":a[15]||(a[15]=t=>q.value=t),style:{width:"450px"},header:s(e)("pharmacyRequest.rejectConfirmTitle"),modal:!0},{footer:r(()=>[l(c,{label:s(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:a[14]||(a[14]=t=>q.value=!1)},null,8,["label"]),l(c,{label:s(e)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:pe},null,8,["label"])]),default:r(()=>[o("div",oa,[o("div",ra,[a[26]||(a[26]=o("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),o("span",null,n(s(e)("pharmacyRequest.rejectConfirmMessage")),1)]),o("div",ia,[o("label",na,n(s(e)("pharmacyRequest.rejectedMessage")),1),l(ke,{modelValue:j.value,"onUpdate:modelValue":a[13]||(a[13]=t=>j.value=t),id:"rejectedMessage",rows:"4",class:"w-full mt-2",placeholder:s(e)("pharmacyRequest.rejectedMessagePlaceholder")},null,8,["modelValue","placeholder"])])])]),_:1},8,["visible","header"])])])])}}},pa=we(da,[["__scopeId","data-v-f1de6ace"]]);export{pa as default};
