import{_ as de,u as ce,i as pe,j as ve,r as i,X as me,w as he,d as ge,Y as p,Z as L,o as k,c as D,k as a,z as o,v as u,M as q,s as _e,t as r,m as l,F as fe,x as be,y as we,$ as ye,B as V,q as $,l as xe}from"./index-800b62dc.js";const ke={class:"grid"},qe={class:"col-12"},Ce={class:"p-4 card shadow-2 border-round"},Re={class:"text-2xl font-bold"},je={class:"flex gap-2"},Te={class:"p-input-icon-left"},De={class:"card shadow-1 surface-0"},Ve={class:"py-4 text-center"},$e={class:"text-xl"},Me={class:"flex py-4 justify-content-center align-items-center"},Se={key:0,class:"mt-3 p-paginator p-component p-unselectable-text"},Be={class:"p-paginator-left-content"},Ne={class:"p-paginator-current"},Ee={class:"p-paginator-right-content"},Ue={class:"p-paginator-pages"},ze=["disabled"],Ie=["disabled"],Pe=["onClick"],Fe=["disabled"],Ae=["disabled"],Ge={class:"p-paginator-rpp-options"},Le={class:"flex align-items-center justify-content-center"},Oe={class:"flex align-items-center justify-content-center"},Qe={class:"gap-3"},We={class:"flex align-items-center"},Xe={class:"gap-2 flex-column"},Ye={for:"rejectedMessage"},Ze={__name:"index",setup(He){const{t:e}=ce(),N=pe(),v=ve(),C=i(!0),E=i(""),U=i(""),z=i(""),I=i(null),_=i(!1),f=i(!1),b=i(!1);i(null);const P=i(null),F=i({}),R=i(""),w=i(""),c=i(1),M=i(0),y=i(10),m=i(0),A=i(0),G=i(0),O=()=>{P.value.exportCSV()},Q=n=>{E.value=n,_.value=!0},W=n=>{U.value=n,w.value="",f.value=!0},X=n=>{z.value=n,b.value=!0},Y=()=>{V.delete(`/api/warehouse-request/${E.value}`).then(()=>{h(),_.value=!1,v.add({severity:"success",summary:e("success"),detail:e("warehouseRequest.deleteSuccess"),life:3e3})}).catch(n=>{v.add({severity:"error",summary:e("error"),detail:e("warehouseRequest.deleteError"),life:3e3})})},Z=()=>{V.post(`/api/warehouse-request/accept/${z.value}`).then(()=>{h(),b.value=!1,v.add({severity:"success",summary:e("success"),detail:e("warehouseRequest.acceptSuccess"),life:3e3})}).catch(n=>{v.add({severity:"error",summary:e("error"),detail:e("warehouseRequest.acceptError"),life:3e3})})},H=()=>{if(!w.value.trim()){v.add({severity:"error",summary:e("error"),detail:e("warehouseRequest.rejectedMessageRequired"),life:3e3});return}V.post(`/api/warehouse-request/reject/${U.value}`,{rejected_message:w.value}).then(()=>{h(),f.value=!1,v.add({severity:"success",summary:e("success"),detail:e("warehouseRequest.rejectSuccess"),life:3e3})}).catch(n=>{v.add({severity:"error",summary:e("error"),detail:e("warehouseRequest.rejectError"),life:3e3})})},J=n=>{N.push({name:"warehouse_request_show",params:{id:n}})},K=()=>{F.value={global:{value:null,matchMode:ye.CONTAINS}}};me(()=>{K()});const h=()=>{C.value=!0,V.get("/api/warehouse-request",{params:{page:c.value,limit:y.value,search:R.value}}).then(n=>{C.value=!1,I.value=n.data.data,M.value=n.data.pagination.total,m.value=n.data.pagination.last_page,A.value=n.data.pagination.from,G.value=n.data.pagination.to}).catch(n=>{C.value=!1,v.add({severity:"error",summary:e("error"),detail:e("warehouseRequest.loadError"),life:3e3}),console.error("Error fetching data:",n)})};he(R,n=>{c.value=1,h()});const x=n=>{n>=1&&n<=m.value&&(c.value=n,h())},ee=n=>{y.value=n,c.value=1,h()};ge(()=>{h()});const te=()=>{N.push({name:"warehouse-request-create"})};return(n,t)=>{const se=p("InputText"),d=p("Button"),ae=p("Toolbar"),le=p("Toast"),g=p("Column"),oe=p("Tag"),ne=p("ProgressSpinner"),ie=p("DataTable"),re=p("Dropdown"),S=p("Dialog"),ue=p("Textarea"),j=L("tooltip"),B=L("can");return k(),D("div",ke,[a("div",qe,[a("div",Ce,[o(ae,{class:"mb-4"},{start:u(()=>[a("h2",Re,r(l(e)("warehouseRequest.title")),1)]),end:u(()=>[a("div",je,[a("span",Te,[t[13]||(t[13]=a("i",{class:"pi pi-search"},null,-1)),o(se,{modelValue:R.value,"onUpdate:modelValue":t[0]||(t[0]=s=>R.value=s),placeholder:l(e)("warehouseRequest.search")},null,8,["modelValue","placeholder"])]),o(d,{label:l(e)("warehouseRequest.export"),icon:"pi pi-upload",class:"p-export",onClick:O},null,8,["label"]),o(d,{label:l(e)("warehouseRequest.new"),icon:"pi pi-plus",class:"p-button-success",onClick:te},null,8,["label"])])]),_:1}),o(le),a("div",De,[q((k(),_e(ie,{ref_key:"dt",ref:P,value:I.value,loading:C.value,"data-key":"id",paginator:!1,rows:y.value,filters:F.value,totalRecords:M.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:u(()=>[a("div",Ve,[t[14]||(t[14]=a("i",{class:"mb-2 text-2xl pi pi-exclamation-circle"},null,-1)),a("p",$e,r(l(e)("warehouseRequest.noData")),1)])]),loading:u(()=>[a("div",Me,[o(ne,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:u(()=>[o(g,{"selection-mode":"multiple","header-style":"width: 3rem"}),o(g,{field:"number",header:l(e)("warehouseRequest.number"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:u(s=>[$(r(s.data.number),1)]),_:1},8,["header"]),o(g,{field:"name",header:l(e)("warehouseRequest.name"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:u(s=>[$(r(s.data.name),1)]),_:1},8,["header"]),o(g,{field:"email",header:l(e)("warehouseRequest.email"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:u(s=>[$(r(s.data.email),1)]),_:1},8,["header"]),o(g,{field:"address",header:l(e)("warehouseRequest.address"),sortable:!0,"header-style":"width:20%; min-width:15rem;"},{body:u(s=>[$(r(s.data.address),1)]),_:1},8,["header"]),o(g,{field:"status_description",header:l(e)("warehouseRequest.status"),sortable:!0,"header-style":"width:14%; min-width:10rem;"},{body:u(s=>[o(oe,{value:s.data.status_description,severity:{active:"success",pending:"warning",rejected:"danger"}[s.data.status_description]||"danger"},null,8,["value","severity"])]),_:1},8,["header"]),o(g,{header:l(e)("actions"),"header-style":"min-width:15rem;"},{body:u(s=>[q(o(d,{icon:"pi pi-eye",class:"mr-2 p-detail",onClick:T=>J(s.data.id)},null,8,["onClick"]),[[j,l(e)("view"),void 0,{top:!0}]]),q(o(d,{icon:"pi pi-check",class:"mr-2 p-show",onClick:T=>X(s.data.id)},null,8,["onClick"]),[[B,"accept warehouse requests"],[j,l(e)("accept"),void 0,{top:!0}]]),q(o(d,{icon:"pi pi-times",class:"mr-2 p-delete",onClick:T=>W(s.data.id),disabled:s.data.status_description=="active"},null,8,["onClick","disabled"]),[[B,"reject warehouse requests"],[j,l(e)("reject"),void 0,{top:!0}]]),q(o(d,{icon:"pi pi-trash",class:"mr-2 p-delete",onClick:T=>Q(s.data.number)},null,8,["onClick"]),[[j,l(e)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[B,"list warehouse requests"]]),m.value>0?(k(),D("div",Se,[a("div",Be,[a("span",Ne,r(l(e)("showing"))+" "+r(A.value)+" "+r(l(e)("to"))+" "+r(G.value)+" "+r(l(e)("of"))+" "+r(M.value)+" "+r(l(e)("entries")),1)]),a("div",Ee,[a("span",Ue,[a("button",{class:"p-paginator-first p-paginator-element p-link",disabled:c.value===1,onClick:t[1]||(t[1]=s=>x(1))},[...t[15]||(t[15]=[a("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)])],8,ze),a("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:c.value===1,onClick:t[2]||(t[2]=s=>x(c.value-1))},[...t[16]||(t[16]=[a("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)])],8,Ie),(k(!0),D(fe,null,be(m.value,s=>(k(),D("button",{key:s,class:xe(["p-paginator-page p-paginator-element p-link",{"p-highlight":c.value===s}]),onClick:T=>x(s)},r(s),11,Pe))),128)),a("button",{class:"p-paginator-next p-paginator-element p-link",disabled:c.value===m.value,onClick:t[3]||(t[3]=s=>x(c.value+1))},[...t[17]||(t[17]=[a("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)])],8,Fe),a("button",{class:"p-paginator-last p-paginator-element p-link",disabled:c.value===m.value,onClick:t[4]||(t[4]=s=>x(m.value))},[...t[18]||(t[18]=[a("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)])],8,Ae)]),a("span",Ge,[o(re,{modelValue:y.value,"onUpdate:modelValue":t[5]||(t[5]=s=>y.value=s),options:[5,10,20,30],onChange:ee,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])):we("",!0)]),o(S,{visible:_.value,"onUpdate:visible":t[7]||(t[7]=s=>_.value=s),style:{width:"450px"},header:l(e)("warehouseRequest.deleteConfirmTitle"),modal:!0},{footer:u(()=>[o(d,{label:l(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[6]||(t[6]=s=>_.value=!1)},null,8,["label"]),o(d,{label:l(e)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:Y},null,8,["label"])]),default:u(()=>[a("div",Le,[t[19]||(t[19]=a("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),a("span",null,r(l(e)("warehouseRequest.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"]),o(S,{visible:b.value,"onUpdate:visible":t[9]||(t[9]=s=>b.value=s),style:{width:"450px"},header:l(e)("warehouseRequest.acceptConfirmTitle"),modal:!0},{footer:u(()=>[o(d,{label:l(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[8]||(t[8]=s=>b.value=!1)},null,8,["label"]),o(d,{label:l(e)("yes"),icon:"pi pi-check",class:"p-button-text p-button-success",onClick:Z},null,8,["label"])]),default:u(()=>[a("div",Oe,[t[20]||(t[20]=a("i",{class:"mr-3 pi pi-check-circle",style:{"font-size":"2rem",color:"var(--green-500)"}},null,-1)),a("span",null,r(l(e)("warehouseRequest.acceptConfirmMessage")),1)])]),_:1},8,["visible","header"]),o(S,{visible:f.value,"onUpdate:visible":t[12]||(t[12]=s=>f.value=s),style:{width:"450px"},header:l(e)("warehouseRequest.rejectConfirmTitle"),modal:!0},{footer:u(()=>[o(d,{label:l(e)("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[11]||(t[11]=s=>f.value=!1)},null,8,["label"]),o(d,{label:l(e)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:H},null,8,["label"])]),default:u(()=>[a("div",Qe,[a("div",We,[t[21]||(t[21]=a("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),a("span",null,r(l(e)("warehouseRequest.rejectConfirmMessage")),1)]),a("div",Xe,[a("p",Ye,r(l(e)("warehouseRequest.rejectedMessage")),1),o(ue,{modelValue:w.value,"onUpdate:modelValue":t[10]||(t[10]=s=>w.value=s),id:"rejectedMessage",rows:"4",class:"w-full mt-4",placeholder:l(e)("warehouseRequest.rejectedMessagePlaceholder")},null,8,["modelValue","placeholder"])])])]),_:1},8,["visible","header"])])])])}}},Ke=de(Ze,[["__scopeId","data-v-59384eda"]]);export{Ke as default};
