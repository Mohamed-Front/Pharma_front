import{_ as A,i as J,j as Y,u as Z,r as c,d as H,Y as m,Z as K,o as g,c as f,M as Q,k as t,t as s,z as i,v as T,C as V,F as W,B as w,q as p,l as u}from"./index-800b62dc.js";const X={class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg"},ee={class:"text-3xl font-bold text-center mb-8 text-gray-800"},ae={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},te={class:"space-y-2"},oe={for:"category",class:"block text-sm font-medium text-gray-700"},le={class:"space-y-2"},re={for:"company",class:"block text-sm font-medium text-gray-700"},se={class:"space-y-2"},ie={for:"commercial_name",class:"block text-sm font-medium text-gray-700"},ne={class:"space-y-2 md:col-span-2"},ue={for:"active_ingredient",class:"block text-sm font-medium text-gray-700"},de={class:"space-y-2 md:col-span-2"},ce={for:"usage",class:"block text-sm font-medium text-gray-700"},pe={class:"space-y-2"},me={for:"calibres",class:"block text-sm font-medium text-gray-700"},_e={class:"space-y-2"},ve={for:"quantity",class:"block text-sm font-medium text-gray-700"},ge={class:"space-y-2"},fe={for:"quantity_unit",class:"block text-sm font-medium text-gray-700"},be={class:"space-y-2"},ye={for:"price",class:"block text-sm font-medium text-gray-700"},xe={class:"space-y-2"},he={for:"price_unit",class:"block text-sm font-medium text-gray-700"},Ve={class:"space-y-2"},we={for:"expiration_from",class:"block text-sm font-medium text-gray-700"},$e={class:"space-y-2"},ke={for:"expiration_to",class:"block text-sm font-medium text-gray-700"},qe={class:"space-y-2 md:col-span-2"},De={for:"storage_notes",class:"block text-sm font-medium text-gray-700"},Ue={class:"space-y-2"},Fe={for:"pharmaceutical_form",class:"block text-sm font-medium text-gray-700"},Ie={class:"md:col-span-2 space-y-2"},Ce={class:"block text-sm font-medium text-gray-700"},Te={class:"flex justify-center"},je={key:0,class:"p-4"},Be={class:"relative group"},Le=["src"],Me={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},Ne={class:"opacity-0 group-hover:opacity-100 space-x-3 transition-all duration-300 transform translate-y-4 group-hover:translate-y-0"},Pe={class:"mt-2 text-center text-sm text-gray-500"},Re={key:1,class:"p-8 flex flex-col items-center justify-center"},Ge={class:"text-sm text-center text-gray-600 mb-1"},Se={class:"text-blue-500 font-medium"},Ee={class:"pt-4 flex justify-center"},Oe={key:0},ze={key:1,class:"pi pi-spinner pi-spin"},Ae={__name:"create",setup(Je){const j=J(),$=Y(),{t:_}=Z(),B=c(),b=c(!1);c([]);const k=c([]),q=c([]),D=c([]),x=c(null),h=c(null),y=c(!1),r=c({category_id:!1,company_id:!1,commercial_name:!1,active_ingredient:!1,usage:!1,calibres:!1,quantity:!1,quantity_unit:!1,price:!1,price_unit:!1,expiration_from:!1,expiration_to:!1,pharmaceutical_form:!1}),o=c({category_id:null,company_id:null,commercial_name:"",active_ingredient:[],product_image:null,usage:"",calibres:"",quantity:null,quantity_unit:null,price:null,price_unit:null,expiration_from:null,expiration_to:null,storage_notes:"",pharmaceutical_form:""}),L=async()=>{try{const[e,a,n]=await Promise.all([w.get("/api/category"),w.get("/api/company"),w.get("/api/scientific-structure")]);k.value=e.data.data,q.value=a.data.data,D.value=n.data.data}catch(e){console.error("Error fetching dropdown options:",e),$.add({severity:"error",summary:_("error"),detail:_("error_fetching_data"),life:3e3})}},M=e=>{e.preventDefault(),y.value=!0},N=()=>{y.value=!1},P=e=>{x.value=e;const a=new FileReader;a.onload=n=>{h.value=n.target.result},a.readAsDataURL(e),y.value=!1},U=e=>{var n,d,v;const a=((n=e.target.files)==null?void 0:n[0])||((v=(d=e.dataTransfer)==null?void 0:d.files)==null?void 0:v[0]);a&&a.type.match("image.*")&&P(a)},R=()=>{x.value=null,h.value=null},G=()=>(r.value.category_id=!o.value.category_id,r.value.company_id=!o.value.company_id,r.value.commercial_name=!o.value.commercial_name,r.value.active_ingredient=!o.value.active_ingredient||o.value.active_ingredient.length===0,r.value.price=o.value.price===null||o.value.price==="",r.value.price_unit=!o.value.price_unit,r.value.expiration_from=!o.value.expiration_from||o.value.expiration_from==="",r.value.expiration_to=!o.value.expiration_to||o.value.expiration_to==="",!Object.values(r.value).some(e=>e)),F=async()=>{var a,n;if(!G())return;b.value=!0;const e=new FormData;e.append("category_id",o.value.category_id||""),e.append("company_id",o.value.company_id||""),e.append("commercial_name",o.value.commercial_name||""),o.value.active_ingredient.forEach((d,v)=>{e.append(`scientific_structure[${v}]`,d||"")}),e.append("usage",o.value.usage||""),e.append("calibres",o.value.calibres||""),e.append("quantity",o.value.quantity?Math.floor(o.value.quantity):""),e.append("quantity_unit",o.value.quantity_unit||""),e.append("price",o.value.price?Number(o.value.price).toFixed(2):""),e.append("price_unit",o.value.price_unit||""),e.append("expiration_from",o.value.expiration_from||""),e.append("expiration_to",o.value.expiration_to||""),e.append("storage_notes",o.value.storage_notes||""),e.append("pharmaceutical_form",o.value.pharmaceutical_form||""),x.value&&e.append("product_image",x.value);try{await w.post("/api/product",e),j.push({name:"products"}),$.add({severity:"success",summary:_("success"),detail:_("product_created"),life:3e3})}catch(d){console.error("Error:",d),$.add({severity:"error",summary:_("error"),detail:((n=(a=d.response)==null?void 0:a.data)==null?void 0:n.message)||_("error_creating_product"),life:3e3})}finally{b.value=!1}};return H(()=>{L()}),(e,a)=>{const n=m("Dropdown"),d=m("InputText"),v=m("MultiSelect"),I=m("Textarea"),C=m("InputNumber"),S=m("Button"),E=m("Form"),O=m("Toast"),z=K("can");return g(),f(W,null,[Q((g(),f("div",X,[t("h1",ee,s(e.$t("product.create_new_product")),1),i(E,{ref_key:"form",ref:B,model:o.value,onSubmit:V(F,["prevent"]),class:"space-y-6"},{default:T(()=>[t("div",ae,[t("div",te,[t("label",oe,[p(s(e.$t("product.category"))+" ",1),a[14]||(a[14]=t("span",{class:"text-red-500"},"*",-1))]),i(n,{id:"category",modelValue:o.value.category_id,"onUpdate:modelValue":a[0]||(a[0]=l=>o.value.category_id=l),options:k.value,optionLabel:"name_ar",optionValue:"id",placeholder:e.$t("product.select_category"),class:u(["w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",{"p-invalid":r.value.category_id}])},null,8,["modelValue","options","placeholder","class"])]),t("div",le,[t("label",re,[p(s(e.$t("product.company"))+" ",1),a[15]||(a[15]=t("span",{class:"text-red-500"},"*",-1))]),i(n,{id:"company",modelValue:o.value.company_id,"onUpdate:modelValue":a[1]||(a[1]=l=>o.value.company_id=l),options:q.value,optionLabel:"name",optionValue:"id",placeholder:e.$t("product.select_company"),class:u(["w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",{"p-invalid":r.value.company_id}])},null,8,["modelValue","options","placeholder","class"])]),t("div",se,[t("label",ie,[p(s(e.$t("product.commercial_name"))+" ",1),a[16]||(a[16]=t("span",{class:"text-red-500"},"*",-1))]),i(d,{id:"commercial_name",modelValue:o.value.commercial_name,"onUpdate:modelValue":a[2]||(a[2]=l=>o.value.commercial_name=l),placeholder:e.$t("product.enter_commercial_name"),class:u(["w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",{"p-invalid":r.value.commercial_name}])},null,8,["modelValue","placeholder","class"])]),t("div",ne,[t("label",ue,[p(s(e.$t("product.active_ingredient"))+" ",1),a[17]||(a[17]=t("span",{class:"text-red-500"},"*",-1))]),i(v,{id:"active_ingredient",modelValue:o.value.active_ingredient,"onUpdate:modelValue":a[3]||(a[3]=l=>o.value.active_ingredient=l),options:D.value,optionLabel:"name",optionValue:"name",placeholder:e.$t("product.select_active_ingredient"),class:u(["w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",{"p-invalid":r.value.active_ingredient}]),display:"chip"},null,8,["modelValue","options","placeholder","class"])]),t("div",de,[t("label",ce,s(e.$t("product.usage")),1),i(I,{id:"usage",modelValue:o.value.usage,"onUpdate:modelValue":a[4]||(a[4]=l=>o.value.usage=l),placeholder:e.$t("product.enter_usage"),class:u(["w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",{"p-invalid":r.value.usage}])},null,8,["modelValue","placeholder","class"])]),t("div",pe,[t("label",me,s(e.$t("product.calibres")),1),i(d,{id:"calibres",modelValue:o.value.calibres,"onUpdate:modelValue":a[5]||(a[5]=l=>o.value.calibres=l),placeholder:e.$t("product.enter_calibres"),class:u(["w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",{"p-invalid":r.value.calibres}])},null,8,["modelValue","placeholder","class"])]),t("div",_e,[t("label",ve,s(e.$t("product.quantity")),1),i(C,{id:"quantity",modelValue:o.value.quantity,"onUpdate:modelValue":a[6]||(a[6]=l=>o.value.quantity=l),useGrouping:!1,placeholder:e.$t("product.enter_quantity"),class:u(["w-full",{"p-invalid":r.value.quantity}]),inputClass:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue","placeholder","class"])]),t("div",ge,[t("label",fe,s(e.$t("product.quantity_unit")),1),i(n,{id:"quantity_unit",modelValue:o.value.quantity_unit,"onUpdate:modelValue":a[7]||(a[7]=l=>o.value.quantity_unit=l),options:[{label:"Tablets",value:1},{label:"Capsules",value:2},{label:"Units",value:3}],optionLabel:"label",optionValue:"value",placeholder:e.$t("product.select_quantity_unit"),class:u(["w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",{"p-invalid":r.value.quantity_unit}])},null,8,["modelValue","placeholder","class"])]),t("div",be,[t("label",ye,[p(s(e.$t("product.price"))+" ",1),a[18]||(a[18]=t("span",{class:"text-red-500"},"*",-1))]),i(C,{id:"price",modelValue:o.value.price,"onUpdate:modelValue":a[8]||(a[8]=l=>o.value.price=l),mode:"decimal",minFractionDigits:2,maxFractionDigits:2,placeholder:e.$t("product.enter_price"),class:u(["w-full",{"p-invalid":r.value.price}]),inputClass:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue","placeholder","class"])]),t("div",xe,[t("label",he,[p(s(e.$t("product.price_unit"))+" ",1),a[19]||(a[19]=t("span",{class:"text-red-500"},"*",-1))]),i(n,{id:"price_unit",modelValue:o.value.price_unit,"onUpdate:modelValue":a[9]||(a[9]=l=>o.value.price_unit=l),options:[{label:"USD",value:1},{label:"EUR",value:2},{label:"GBP",value:3}],optionLabel:"label",optionValue:"value",placeholder:e.$t("product.select_price_unit"),class:u(["w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",{"p-invalid":r.value.price_unit}])},null,8,["modelValue","placeholder","class"])]),t("div",Ve,[t("label",we,[p(s(e.$t("product.expiration_from"))+" ",1),a[20]||(a[20]=t("span",{class:"text-red-500"},"*",-1))]),i(d,{type:"date",id:"expiration_from",modelValue:o.value.expiration_from,"onUpdate:modelValue":a[10]||(a[10]=l=>o.value.expiration_from=l),placeholder:e.$t("product.enter_expiration_from"),class:u(["w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",{"p-invalid":r.value.expiration_from}])},null,8,["modelValue","placeholder","class"])]),t("div",$e,[t("label",ke,[p(s(e.$t("product.expiration_to"))+" ",1),a[21]||(a[21]=t("span",{class:"text-red-500"},"*",-1))]),i(d,{type:"date",id:"expiration_to",modelValue:o.value.expiration_to,"onUpdate:modelValue":a[11]||(a[11]=l=>o.value.expiration_to=l),placeholder:e.$t("product.enter_expiration_to"),class:u(["w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",{"p-invalid":r.value.expiration_to}])},null,8,["modelValue","placeholder","class"])]),t("div",qe,[t("label",De,s(e.$t("product.storage_notes")),1),i(I,{id:"storage_notes",modelValue:o.value.storage_notes,"onUpdate:modelValue":a[12]||(a[12]=l=>o.value.storage_notes=l),placeholder:e.$t("product.enter_storage_notes"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue","placeholder"])]),t("div",Ue,[t("label",Fe,s(e.$t("product.pharmaceutical_form")),1),i(d,{id:"pharmaceutical_form",modelValue:o.value.pharmaceutical_form,"onUpdate:modelValue":a[13]||(a[13]=l=>o.value.pharmaceutical_form=l),placeholder:e.$t("product.enter_pharmaceutical_form"),class:u(["w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",{"p-invalid":r.value.pharmaceutical_form}])},null,8,["modelValue","placeholder","class"])]),t("div",Ie,[t("label",Ce,s(e.$t("product.product_image")),1),t("div",Te,[t("label",{onDragover:V(M,["prevent"]),onDragleave:N,onDrop:V(U,["prevent"]),class:u([{"border-blue-500 bg-blue-50":y.value,"border-gray-300":!y.value},"cursor-pointer w-full max-w-md rounded-xl border-2 border-dashed transition-colors duration-300"])},[t("input",{type:"file",onChange:U,accept:"image/*",class:"hidden"},null,32),h.value?(g(),f("div",je,[t("div",Be,[t("img",{src:h.value,alt:"Preview",class:"w-full h-64 object-cover rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,Le),t("div",Me,[t("div",Ne,[t("button",{type:"button",onClick:V(R,["stop"]),class:"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},[...a[22]||(a[22]=[t("i",{class:"pi pi-trash text-sm"},null,-1)])]),a[23]||(a[23]=t("button",{type:"button",class:"bg-white text-gray-700 p-2 rounded-full hover:bg-gray-100 transition"},[t("i",{class:"pi pi-pencil text-sm"})],-1))])])]),t("p",Pe,s(e.$t("product.click_or_drag_to_change_photo")),1)])):(g(),f("div",Re,[a[24]||(a[24]=t("div",{class:"bg-blue-100 p-4 rounded-full mb-4"},[t("i",{class:"pi pi-image text-blue-500 text-2xl"})],-1)),t("p",Ge,[t("span",Se,s(e.$t("product.click_to_upload")),1),p(" "+s(e.$t("product.or_drag_and_drop")),1)]),a[25]||(a[25]=t("p",{class:"text-xs text-gray-400"},"SVG, PNG, JPG or GIF (max. 1MB)",-1))]))],34)])])]),t("div",Ee,[i(S,{type:"submit",label:"Create Product",icon:"pi pi-plus",loading:b.value,class:"px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:b.value,onClick:F},{default:T(()=>[b.value?(g(),f("i",ze)):(g(),f("span",Oe,s(e.$t("product.create_product")),1))]),_:1},8,["loading","disabled"])])]),_:1},8,["model"])])),[[z,"create products"]]),i(O)],64)}}},Ze=A(Ae,[["__scopeId","data-v-30e5e6c0"]]);export{Ze as default};
