import{_ as U,s as F,e as j,u as B,r as v,w as E,a as G,a4 as N,f,g as m,R as O,m as a,t as n,x as c,z as u,v as _,l as d,y,B as C,F as L,q as $,a7 as V,ap as g,G as w,Q as M,C as R,A as z}from"./index-b2b8894e.js";const I={class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg"},S={class:"text-3xl font-bold text-center mb-8 text-gray-800"},A={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Q={class:"space-y-2"},T={for:"product",class:"block text-sm font-medium text-gray-700"},H={class:"space-y-2"},J={for:"discount_type",class:"block text-sm font-medium text-gray-700"},K={key:0,class:"space-y-2"},P={for:"discount_value",class:"block text-sm font-medium text-gray-700"},W={key:0,class:"text-gray-500"},X={key:1,class:"space-y-2"},Y={for:"gift_product_id",class:"block text-sm font-medium text-gray-700"},Z={key:2,class:"space-y-2"},ee={for:"gift_quantity",class:"block text-sm font-medium text-gray-700"},te={class:"space-y-2"},le={for:"min_limit",class:"block text-sm font-medium text-gray-700"},ae={class:"space-y-2"},se={for:"max_limit",class:"block text-sm font-medium text-gray-700"},oe={class:"space-y-2"},ie={for:"start_date",class:"block text-sm font-medium text-gray-700"},ue={class:"space-y-2"},de={for:"end_date",class:"block text-sm font-medium text-gray-700"},ne={class:"space-y-2 md:col-span-2"},re={for:"description",class:"block text-sm font-medium text-gray-700"},ce={class:"pt-6 flex justify-center"},_e={__name:"create",setup(fe){const h=F(),p=j(),{t:r}=B(),x=v(!1),b=v([]),e=v({product_id:null,min_limit:null,max_limit:null,discount_type:null,discount_value:null,gift_product_id:null,gift_quantity:null,start_date:null,end_date:null,description:""}),s=v({product_id:!1,min_limit:!1,max_limit:!1,discount_type:!1,discount_value:!1,gift_product_id:!1,gift_quantity:!1,start_date:!1,end_date:!1}),k=async()=>{try{const l=await $.get("/api/product");b.value=l.data.data}catch(l){console.error("Error fetching products:",l),p.add({severity:"error",summary:r("error"),detail:r("error_fetching_data"),life:3e3})}};E(()=>e.value.discount_type,l=>{l!==3&&(e.value.gift_product_id=null,e.value.gift_quantity=null),l===3&&(e.value.discount_value=null)});const q=()=>{if(Object.keys(s.value).forEach(l=>{s.value[l]=!1}),s.value.product_id=!e.value.product_id,s.value.discount_type=!e.value.discount_type,s.value.min_limit=e.value.min_limit===null||e.value.min_limit==="",s.value.max_limit=e.value.max_limit===null||e.value.max_limit==="",s.value.start_date=!e.value.start_date,s.value.end_date=!e.value.end_date,e.value.discount_type===3?(s.value.gift_product_id=!e.value.gift_product_id,s.value.gift_quantity=e.value.gift_quantity===null||e.value.gift_quantity==="",s.value.discount_value=!1):s.value.discount_value=e.value.discount_value===null||e.value.discount_value==="",e.value.min_limit!=null&&e.value.max_limit!=null&&(s.value.max_limit=s.value.max_limit||e.value.min_limit>e.value.max_limit),e.value.discount_type===1&&e.value.discount_value!=null&&(s.value.discount_value=s.value.discount_value||e.value.discount_value<0||e.value.discount_value>100),e.value.discount_type===2&&e.value.discount_value!=null&&(s.value.discount_value=s.value.discount_value||e.value.discount_value<0),e.value.start_date&&e.value.end_date){const l=new Date(e.value.start_date);new Date(e.value.end_date)<l&&(s.value.end_date=!0,p.add({severity:"error",summary:r("error"),detail:r("end_date_before_start"),life:3e3}))}return!Object.values(s.value).some(l=>l)},D=async()=>{var l,t;if(q()){x.value=!0;try{const i={...e.value};i.discount_type!==3&&(delete i.gift_product_id,delete i.gift_quantity),i.discount_type===3&&delete i.discount_value,await $.post("/api/offer",i),p.add({severity:"success",summary:r("success"),detail:r("offer_created"),life:3e3}),h.push({name:"offers"})}catch(i){console.error("Error:",i);let o=r("error_creating_offer");((l=i.response)==null?void 0:l.status)===422?o=Object.values(i.response.data.errors).flat().join(", "):((t=i.response)==null?void 0:t.status)===500&&(o=r("server_error")),p.add({severity:"error",summary:r("error"),detail:o,life:3e3})}finally{x.value=!1}}};return G(()=>{k()}),(l,t)=>{const i=N("can");return f(),m(L,null,[O((f(),m("div",I,[a("h1",S,n(l.$t("offer.create_new_offer")),1),a("form",{onSubmit:C(D,["prevent"]),class:"space-y-6"},[a("div",A,[a("div",Q,[a("label",T,[c(n(l.$t("offer.product"))+" ",1),t[10]||(t[10]=a("span",{class:"text-red-500"},"*",-1))]),u(d(V),{filter:"",id:"product",modelValue:e.value.product_id,"onUpdate:modelValue":t[0]||(t[0]=o=>e.value.product_id=o),options:b.value,optionLabel:"commercial_name",optionValue:"id",placeholder:l.$t("offer.select_product"),class:_(["w-full",{"p-invalid":s.value.product_id}])},null,8,["modelValue","options","placeholder","class"])]),a("div",H,[a("label",J,[c(n(l.$t("offer.discount_type"))+" ",1),t[11]||(t[11]=a("span",{class:"text-red-500"},"*",-1))]),u(d(V),{id:"discount_type",modelValue:e.value.discount_type,"onUpdate:modelValue":t[1]||(t[1]=o=>e.value.discount_type=o),options:[{label:l.$t("offer.percentage"),value:1},{label:l.$t("offer.fixed_amount"),value:2},{label:l.$t("offer.gift"),value:3}],optionLabel:"label",optionValue:"value",placeholder:l.$t("offer.select_discount_type"),class:_(["w-full",{"p-invalid":s.value.discount_type}])},null,8,["modelValue","options","placeholder","class"])]),e.value.discount_type===1||e.value.discount_type===2?(f(),m("div",K,[a("label",P,[c(n(e.value.discount_type===1?l.$t("offer.percentage"):l.$t("offer.fixed_amount"))+" ",1),t[12]||(t[12]=a("span",{class:"text-red-500"},"*",-1))]),u(d(g),{id:"discount_value",modelValue:e.value.discount_value,"onUpdate:modelValue":t[2]||(t[2]=o=>e.value.discount_value=o),mode:(e.value.discount_type===1,"decimal"),minFractionDigits:e.value.discount_type===1?0:2,maxFractionDigits:(e.value.discount_type===1,2),min:(e.value.discount_type===1,0),max:e.value.discount_type===1?100:null,placeholder:l.$t("offer.enter_discount_value"),class:_(["w-full",{"p-invalid":s.value.discount_value}])},null,8,["modelValue","mode","minFractionDigits","maxFractionDigits","min","max","placeholder","class"]),e.value.discount_type===1?(f(),m("small",W,"Max 100%")):y("",!0)])):y("",!0),e.value.discount_type===3?(f(),m("div",X,[a("label",Y,[c(n(l.$t("offer.gift_product"))+" ",1),t[13]||(t[13]=a("span",{class:"text-red-500"},"*",-1))]),u(d(V),{filter:"",id:"gift_product_id",modelValue:e.value.gift_product_id,"onUpdate:modelValue":t[3]||(t[3]=o=>e.value.gift_product_id=o),options:b.value,optionLabel:"commercial_name",optionValue:"id",placeholder:l.$t("offer.select_gift_product"),class:_(["w-full",{"p-invalid":s.value.gift_product_id}])},null,8,["modelValue","options","placeholder","class"])])):y("",!0),e.value.discount_type===3?(f(),m("div",Z,[a("label",ee,[c(n(l.$t("offer.gift_quantity"))+" ",1),t[14]||(t[14]=a("span",{class:"text-red-500"},"*",-1))]),u(d(g),{id:"gift_quantity",modelValue:e.value.gift_quantity,"onUpdate:modelValue":t[4]||(t[4]=o=>e.value.gift_quantity=o),useGrouping:!1,min:1,placeholder:l.$t("offer.enter_gift_quantity"),class:_(["w-full",{"p-invalid":s.value.gift_quantity}])},null,8,["modelValue","placeholder","class"])])):y("",!0),a("div",te,[a("label",le,[c(n(l.$t("offer.min_limit_tooltip"))+" ",1),t[15]||(t[15]=a("span",{class:"text-red-500"},"*",-1))]),u(d(g),{id:"min_limit",modelValue:e.value.min_limit,"onUpdate:modelValue":t[5]||(t[5]=o=>e.value.min_limit=o),useGrouping:!1,placeholder:l.$t("offer.enter_min_limit"),class:_(["w-full",{"p-invalid":s.value.min_limit}])},null,8,["modelValue","placeholder","class"])]),a("div",ae,[a("label",se,[c(n(l.$t("offer.max_limit_tooltip"))+" ",1),t[16]||(t[16]=a("span",{class:"text-red-500"},"*",-1))]),u(d(g),{id:"max_limit",modelValue:e.value.max_limit,"onUpdate:modelValue":t[6]||(t[6]=o=>e.value.max_limit=o),useGrouping:!1,placeholder:l.$t("offer.enter_max_limit"),class:_(["w-full",{"p-invalid":s.value.max_limit}])},null,8,["modelValue","placeholder","class"])]),a("div",oe,[a("label",ie,[c(n(l.$t("offer.start_date"))+" ",1),t[17]||(t[17]=a("span",{class:"text-red-500"},"*",-1))]),u(d(w),{id:"start_date",modelValue:e.value.start_date,"onUpdate:modelValue":t[7]||(t[7]=o=>e.value.start_date=o),type:"date",class:_(["w-full",{"p-invalid":s.value.start_date}])},null,8,["modelValue","class"])]),a("div",ue,[a("label",de,[c(n(l.$t("offer.end_date"))+" ",1),t[18]||(t[18]=a("span",{class:"text-red-500"},"*",-1))]),u(d(w),{id:"end_date",modelValue:e.value.end_date,"onUpdate:modelValue":t[8]||(t[8]=o=>e.value.end_date=o),type:"date",class:_(["w-full",{"p-invalid":s.value.end_date}])},null,8,["modelValue","class"])]),a("div",ne,[a("label",re,n(l.$t("offer.description")),1),u(d(M),{id:"description",modelValue:e.value.description,"onUpdate:modelValue":t[9]||(t[9]=o=>e.value.description=o),placeholder:l.$t("offer.enter_description"),class:"w-full",rows:"4"},null,8,["modelValue","placeholder"])])]),a("div",ce,[u(d(R),{type:"submit",label:l.$t("offer.create_offer"),icon:"pi pi-plus",loading:x.value,class:"px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300"},null,8,["label","loading"])])],32)])),[[i,"create offers"]]),u(d(z))],64)}}},pe=U(_e,[["__scopeId","data-v-df999891"]]);export{pe as default};
