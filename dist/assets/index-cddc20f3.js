import{_ as ie,u as de,z as ne,a as se,r,a7 as re,m as ue,o as ce,d as v,a8 as L,Z as V,e as f,h as q,g as a,i,w as u,f as pe,t as d,j as o,F as me,y as _e,C as ve,a9 as ye,b as S,B as U,A as he}from"./index-2cd76906.js";const fe={class:"grid"},ge={class:"col-12"},be={class:"p-4 card shadow-2 border-round"},Ve={class:"text-2xl font-bold"},qe={class:"flex gap-2"},xe={class:"p-input-icon-left"},we={class:"card shadow-1 surface-0"},ke=["src"],Ce={key:1},Ue={class:"py-4 text-center"},Ie={class:"text-xl"},Te={class:"flex py-4 justify-content-center align-items-center"},De={key:0,class:"mt-3 p-paginator p-component p-unselectable-text"},Ne={class:"p-paginator-left-content"},$e={class:"p-paginator-current"},Be={class:"p-paginator-right-content"},Se={class:"p-paginator-pages"},Pe=["disabled"],Ee=["disabled"],Fe=["onClick"],Me=["disabled"],Re=["disabled"],je={class:"p-paginator-rpp-options"},ze={class:"p-fluid"},Ae={class:"field my-1"},Ge={for:"commercial_name",class:"my-1"},Le={class:"field my-1"},Oe={for:"quantity",class:"my-1"},Qe={class:"field my-1"},We={for:"quantity_unit",class:"my-1"},Ze={class:"field my-1"},He={for:"price",class:"my-1"},Je={class:"field my-1"},Ke={for:"price_unit",class:"my-1"},Xe={class:"field my-1"},Ye={for:"category_id",class:"my-1"},et={class:"field my-1"},tt={for:"company_id",class:"my-1"},lt={class:"p-fluid"},at={class:"field my-1"},ot={for:"commercial_name_edit",class:"my-1"},it={class:"field my-1"},dt={for:"quantity_edit",class:"my-1"},nt={class:"field my-1"},st={for:"quantity_unit_edit",class:"my-1"},rt={class:"field my-1"},ut={for:"price_edit",class:"my-1"},ct={class:"field my-1"},pt={for:"price_unit_edit",class:"my-1"},mt={class:"field my-1"},_t={for:"category_id_edit",class:"my-1"},vt={class:"field my-1"},yt={for:"company_id_edit",class:"my-1"},ht={class:"flex align-items-center justify-content-center"},ft={__name:"index",setup(gt){const{t}=de(),P=ne(),x=se(),I=r(!0),E=r(""),F=r(null),w=r(!1),T=r(!1),N=r(!1);r(null);const M=r(null),R=r({}),D=r(""),n=r({commercial_name:"",quantity:"",quantity_unit:"",price:"",price_unit:"",category_id:"",company_id:""}),O=r(null),p=r(1),$=r(0),k=r(10),h=r(0),j=r(0),z=r(0),Q=()=>{M.value.exportCSV()},W=s=>{E.value=s,w.value=!0},Z=()=>{S.delete(`/api/product/${E.value}`).then(()=>{g(),w.value=!1,x.add({severity:"success",summary:t("success"),detail:t("product.deleteSuccess"),life:3e3})}).catch(s=>{x.add({severity:"error",summary:t("error"),detail:t("product.deleteError"),life:3e3})})},H=()=>{R.value={global:{value:null,matchMode:ye.CONTAINS}}},J=()=>{n.value={commercial_name:"",quantity:"",quantity_unit:"",price:"",price_unit:"",category_id:"",company_id:""},O.value=null},K=()=>{P.push({name:"product-create"})},X=s=>{P.push({name:"product-update",params:{id:s}})},A=()=>{S.post("/api/product",n.value).then(()=>{g(),T.value=!1,x.add({severity:"success",summary:t("success"),detail:t("product.createSuccess"),life:3e3}),J()}).catch(s=>{x.add({severity:"error",summary:t("error"),detail:t("product.createError"),life:3e3})})};re(()=>{H()});const g=()=>{I.value=!0,S.get("/api/product",{params:{page:p.value,limit:k.value,search:D.value}}).then(s=>{I.value=!1,F.value=s.data.data,$.value=s.data.pagination.total,h.value=s.data.pagination.last_page,j.value=s.data.pagination.from,z.value=s.data.pagination.to}).catch(s=>{I.value=!1,x.add({severity:"error",summary:t("error"),detail:t("product.loadError"),life:3e3}),console.error("Error fetching data:",s)})};ue(D,()=>{p.value=1,g()});const C=s=>{s>=1&&s<=h.value&&(p.value=s,g())},Y=s=>{k.value=s.value,p.value=1,g()};return ce(()=>{g()}),(s,l)=>{const c=v("InputText"),_=v("Button"),ee=v("Toolbar"),te=v("Toast"),y=v("Column"),le=v("ProgressSpinner"),ae=v("DataTable"),oe=v("Dropdown"),B=v("Dialog"),b=L("can"),G=L("tooltip");return V((f(),q("div",fe,[a("div",ge,[a("div",be,[i(ee,{class:"mb-4"},{start:u(()=>[a("h2",Ve,d(o(t)("product.managementTitle")),1)]),end:u(()=>[a("div",qe,[a("span",xe,[l[26]||(l[26]=a("i",{class:"pi pi-search"},null,-1)),i(c,{modelValue:D.value,"onUpdate:modelValue":l[0]||(l[0]=e=>D.value=e),placeholder:s.$t("product.search")},null,8,["modelValue","placeholder"])]),V(i(_,{label:o(t)("product.export"),icon:"pi pi-upload",class:"p-export",onClick:Q},null,8,["label"]),[[b,"create products"]]),V(i(_,{label:o(t)("product.new"),icon:"pi pi-plus",class:"p-button-success",onClick:K},null,8,["label"]),[[b,"create products"]])])]),_:1}),i(te),a("div",we,[V((f(),pe(ae,{ref_key:"dt",ref:M,value:F.value,loading:I.value,"data-key":"id",paginator:!1,rows:k.value,filters:R.value,totalRecords:$.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:u(()=>[a("div",Ue,[l[27]||(l[27]=a("i",{class:"mb-2 text-2xl pi pi-exclamation-circle"},null,-1)),a("p",Ie,d(o(t)("product.noData")),1)])]),loading:u(()=>[a("div",Te,[i(le,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:u(()=>[i(y,{"selection-mode":"multiple","header-style":"width: 3rem"}),i(y,{field:"commercial_name",header:o(t)("product.commercialName"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:u(e=>[U(d(e.data.commercial_name),1)]),_:1},8,["header"]),i(y,{field:"media[0].url",header:o(t)("product.image"),"header-style":"width:10%; min-width:8rem;"},{body:u(e=>[e.data.media&&e.data.media[0]&&e.data.media[0].url?(f(),q("img",{key:0,src:e.data.media[0].url,alt:"Product Image",style:{width:"50px",height:"auto"}},null,8,ke)):(f(),q("span",Ce,d(o(t)("product.noImage")),1))]),_:1},8,["header"]),i(y,{field:"quantity",header:o(t)("product.quantity"),sortable:!0,"header-style":"width:10%; min-width:8rem;"},{body:u(e=>{var m;return[U(d((m=e.data)==null?void 0:m.quantity)+" "+d(e.data.quantity_unit),1)]}),_:1},8,["header"]),i(y,{field:"price",header:o(t)("product.price"),sortable:!0,"header-style":"width:10%; min-width:8rem;"},{body:u(e=>[U(d(e.data.price)+" "+d(e.data.price_unit),1)]),_:1},8,["header"]),i(y,{field:"category.name_en",header:o(t)("product.category"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:u(e=>{var m;return[U(d((m=e.data.category)==null?void 0:m.name_en),1)]}),_:1},8,["header"]),i(y,{field:"company.name",header:o(t)("product.company"),sortable:!0,"header-style":"width:15%; min-width:10rem;"},{body:u(e=>{var m;return[U(d((m=e.data.company)==null?void 0:m.name),1)]}),_:1},8,["header"]),i(y,{header:o(t)("product.actions"),"header-style":"min-width:10rem;"},{body:u(e=>[V(i(_,{icon:"pi pi-pencil",class:"p-detail",onClick:m=>X(e.data.id)},null,8,["onClick"]),[[b,"edit products"],[G,o(t)("edit"),void 0,{top:!0}]]),V(i(_,{icon:"pi pi-trash mx-2",class:"p-delete",onClick:m=>W(e.data.id)},null,8,["onClick"]),[[b,"delete products"],[G,o(t)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[b,"list products"]]),h.value>0?(f(),q("div",De,[a("div",Ne,[a("span",$e,d(o(t)("product.showing"))+" "+d(j.value)+" "+d(o(t)("product.to"))+" "+d(z.value)+" "+d(o(t)("product.of"))+" "+d($.value)+" "+d(o(t)("product.entries")),1)]),a("div",Be,[a("span",Se,[a("button",{class:"p-paginator-first p-paginator-element p-link",disabled:p.value===1,onClick:l[1]||(l[1]=e=>C(1))},[...l[28]||(l[28]=[a("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)])],8,Pe),a("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:p.value===1,onClick:l[2]||(l[2]=e=>C(p.value-1))},[...l[29]||(l[29]=[a("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)])],8,Ee),(f(!0),q(me,null,_e(h.value,e=>(f(),q("button",{key:e,class:he(["p-paginator-page p-paginator-element p-link",{"p-highlight":p.value===e}]),onClick:m=>C(e)},d(e),11,Fe))),128)),a("button",{class:"p-paginator-next p-paginator-element p-link",disabled:p.value===h.value,onClick:l[3]||(l[3]=e=>C(p.value+1))},[...l[30]||(l[30]=[a("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)])],8,Me),a("button",{class:"p-paginator-last p-paginator-element p-link",disabled:p.value===h.value,onClick:l[4]||(l[4]=e=>C(h.value))},[...l[31]||(l[31]=[a("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)])],8,Re)]),a("span",je,[i(oe,{modelValue:k.value,"onUpdate:modelValue":l[5]||(l[5]=e=>k.value=e),options:[5,10,20,30],onChange:Y,class:"ml-2",style:{width:"100px"}},null,8,["modelValue"])])])])):ve("",!0)]),i(B,{visible:T.value,"onUpdate:visible":l[14]||(l[14]=e=>T.value=e),style:{width:"450px"},header:o(t)("product.createTitle"),modal:!0},{footer:u(()=>[i(_,{label:o(t)("cancel"),icon:"pi pi-times",class:"p-button-text",onClick:l[13]||(l[13]=e=>T.value=!1)},null,8,["label"]),i(_,{label:o(t)("save"),icon:"pi pi-check",class:"p-button-text p-button-success",onClick:A},null,8,["label"])]),default:u(()=>[a("div",ze,[a("div",Ae,[a("p",Ge,d(o(t)("product.commercialName")),1),i(c,{id:"commercial_name",modelValue:n.value.commercial_name,"onUpdate:modelValue":l[6]||(l[6]=e=>n.value.commercial_name=e),required:"",placeholder:o(t)("product.commercialName")},null,8,["modelValue","placeholder"])]),a("div",Le,[a("p",Oe,d(o(t)("product.quantity")),1),i(c,{id:"quantity",modelValue:n.value.quantity,"onUpdate:modelValue":l[7]||(l[7]=e=>n.value.quantity=e),type:"number",required:"",placeholder:o(t)("product.quantity")},null,8,["modelValue","placeholder"])]),a("div",Qe,[a("p",We,d(o(t)("product.quantityUnit")),1),i(c,{id:"quantity_unit",modelValue:n.value.quantity_unit,"onUpdate:modelValue":l[8]||(l[8]=e=>n.value.quantity_unit=e),required:"",placeholder:o(t)("product.quantityUnit")},null,8,["modelValue","placeholder"])]),a("div",Ze,[a("p",He,d(o(t)("product.price")),1),i(c,{id:"price",modelValue:n.value.price,"onUpdate:modelValue":l[9]||(l[9]=e=>n.value.price=e),type:"number",required:"",placeholder:o(t)("product.price")},null,8,["modelValue","placeholder"])]),a("div",Je,[a("p",Ke,d(o(t)("product.priceUnit")),1),i(c,{id:"price_unit",modelValue:n.value.price_unit,"onUpdate:modelValue":l[10]||(l[10]=e=>n.value.price_unit=e),required:"",placeholder:o(t)("product.priceUnit")},null,8,["modelValue","placeholder"])]),a("div",Xe,[a("p",Ye,d(o(t)("product.categoryId")),1),i(c,{id:"category_id",modelValue:n.value.category_id,"onUpdate:modelValue":l[11]||(l[11]=e=>n.value.category_id=e),type:"number",required:"",placeholder:o(t)("product.categoryId")},null,8,["modelValue","placeholder"])]),a("div",et,[a("p",tt,d(o(t)("product.companyId")),1),i(c,{id:"company_id",modelValue:n.value.company_id,"onUpdate:modelValue":l[12]||(l[12]=e=>n.value.company_id=e),type:"number",required:"",placeholder:o(t)("product.companyId")},null,8,["modelValue","placeholder"])])])]),_:1},8,["visible","header"]),i(B,{visible:N.value,"onUpdate:visible":l[23]||(l[23]=e=>N.value=e),style:{width:"450px"},header:o(t)("product.editTitle"),modal:!0},{footer:u(()=>[i(_,{label:o(t)("cancel"),icon:"pi pi-times",class:"p-button-text",onClick:l[22]||(l[22]=e=>N.value=!1)},null,8,["label"]),i(_,{label:o(t)("save"),icon:"pi pi-check",class:"p-button-text p-button-success",onClick:A},null,8,["label"])]),default:u(()=>[a("div",lt,[a("div",at,[a("p",ot,d(o(t)("product.commercialName")),1),i(c,{id:"commercial_name_edit",modelValue:n.value.commercial_name,"onUpdate:modelValue":l[15]||(l[15]=e=>n.value.commercial_name=e),required:"",placeholder:o(t)("product.commercialName")},null,8,["modelValue","placeholder"])]),a("div",it,[a("p",dt,d(o(t)("product.quantity")),1),i(c,{id:"quantity_edit",modelValue:n.value.quantity,"onUpdate:modelValue":l[16]||(l[16]=e=>n.value.quantity=e),type:"number",required:"",placeholder:o(t)("product.quantity")},null,8,["modelValue","placeholder"])]),a("div",nt,[a("p",st,d(o(t)("product.quantityUnit")),1),i(c,{id:"quantity_unit_edit",modelValue:n.value.quantity_unit,"onUpdate:modelValue":l[17]||(l[17]=e=>n.value.quantity_unit=e),required:"",placeholder:o(t)("product.quantityUnit")},null,8,["modelValue","placeholder"])]),a("div",rt,[a("p",ut,d(o(t)("product.price")),1),i(c,{id:"price_edit",modelValue:n.value.price,"onUpdate:modelValue":l[18]||(l[18]=e=>n.value.price=e),type:"number",required:"",placeholder:o(t)("product.price")},null,8,["modelValue","placeholder"])]),a("div",ct,[a("p",pt,d(o(t)("product.priceUnit")),1),i(c,{id:"price_unit_edit",modelValue:n.value.price_unit,"onUpdate:modelValue":l[19]||(l[19]=e=>n.value.price_unit=e),required:"",placeholder:o(t)("product.priceUnit")},null,8,["modelValue","placeholder"])]),a("div",mt,[a("p",_t,d(o(t)("product.categoryId")),1),i(c,{id:"category_id_edit",modelValue:n.value.category_id,"onUpdate:modelValue":l[20]||(l[20]=e=>n.value.category_id=e),type:"number",required:"",placeholder:o(t)("product.categoryId")},null,8,["modelValue","placeholder"])]),a("div",vt,[a("p",yt,d(o(t)("product.companyId")),1),i(c,{id:"company_id_edit",modelValue:n.value.company_id,"onUpdate:modelValue":l[21]||(l[21]=e=>n.value.company_id=e),type:"number",required:"",placeholder:o(t)("product.companyId")},null,8,["modelValue","placeholder"])])])]),_:1},8,["visible","header"]),i(B,{visible:w.value,"onUpdate:visible":l[25]||(l[25]=e=>w.value=e),style:{width:"450px"},header:o(t)("product.deleteConfirmTitle"),modal:!0},{footer:u(()=>[i(_,{label:o(t)("no"),icon:"pi pi-times",class:"p-button-text",onClick:l[24]||(l[24]=e=>w.value=!1)},null,8,["label"]),i(_,{label:o(t)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:Z},null,8,["label"])]),default:u(()=>[a("div",ht,[l[32]||(l[32]=a("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),a("span",null,d(o(t)("product.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])),[[b,"list products"]])}}},Vt=ie(ft,[["__scopeId","data-v-6f62b246"]]);export{Vt as default};
